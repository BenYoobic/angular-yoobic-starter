!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/common/http"),require("@angular/common"),require("@shared/stencil"),require("localforage-cordovasqlitedriver"),require("localforage"),require("rxjs"),require("lodash-es"),require("@angular/core"),require("postscribe"),require("@ionic-native/geolocation/ngx"),require("@ionic-native/network/ngx")):"function"==typeof define&&define.amd?define("common",["exports","@angular/common/http","@angular/common","@shared/stencil","localforage-cordovasqlitedriver","localforage","rxjs","lodash-es","@angular/core","postscribe","@ionic-native/geolocation/ngx","@ionic-native/network/ngx"],e):e(t.common={},t.ng.common.http,t.ng.common,t.DesignSystem,t.dovaSQLiteDriver,t.localForage,t.rxjs,t["lodash-es"],t.ng.core,t.postscribe,t.Geolocation,t.Network)}(this,function(t,o,n,r,i,f,s,c,a,u,l,p){"use strict";function g(t,e){var o="function"==typeof Symbol&&t[Symbol.iterator];if(!o)return t;var n,r,i=o.call(t),s=[];try{for(;(void 0===e||0<e--)&&!(n=i.next()).done;)s.push(n.value)}catch(c){r={error:c}}finally{try{n&&!n.done&&(o=i["return"])&&o.call(i)}finally{if(r)throw r.error}}return s}function d(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(g(arguments[e]));return t}u=u&&u.hasOwnProperty("default")?u["default"]:u;var e=new a.InjectionToken("CoreConfigConstants"),h=function(){function t(t,e){this.platformId=t,this.configConstants={},this.configConstants=e}return t.prototype.setStencil=function(){r.setIsWeb(this.isWeb()),r.setIsIonic(this.isIonic())},t.prototype.isWeb=function(){return this.configConstants.configIsWeb},t.prototype.isIonic=function(){return this.configConstants.configIsIonic2},t.prototype.isCordova=function(){return r.isCordova()},t.prototype.isCapacitorNative=function(){return r.isCapacitorNative()},t.prototype.isHybrid=function(){return this.isCordova()||this.isCapacitorNative()},t.prototype.isElectron=function(){return r.isElectron()},t.prototype.isFirefox=function(){return r.isFirefox()},t.prototype.isIE=function(){return r.isIE()},t.prototype.isIE11=function(){return r.isIE11()},t.prototype.isUniversal=function(){return n.isPlatformServer(this.platformId)},t.prototype.getPlatform=function(){return this.configConstants.configPlatform},t.prototype.getPlatformClean=function(){return this.getPlatform().toLowerCase().replace("ionic","mobile")},t.prototype.isIOS=function(){return r.isIOS()},t.prototype.isIOS9=function(){return r.isIOS9()},t.prototype.isIphoneX=function(){return r.isIphoneX()},t.prototype.isIphone5=function(){return r.isIphone5()},t.prototype.isIphoneSE=function(){return r.isIphoneSE()},t.prototype.isAndroid=function(){return r.isAndroid()},t.prototype.isWKWebView=function(){return r.isWKWebView()},t.prototype.isTablet=function(){return r.isTablet()},t.prototype.isPhablet=function(){return r.isPhablet()},t.prototype.isSamsung=function(){return r.isSamsung()},t.prototype.isZebraScanner=function(){return r.isZebraScanner()},t.prototype.isSurface=function(){return r.isSurface()},t.prototype.isLocalhost=function(){return"localhost"===location.hostname||"127.0.0.1"===location.hostname},t.prototype.reload=function(t){void 0===t&&(t=!1),this.isElectron()||location&&location.reload&&(location.reload(),t&&location.replace(location.origin))},t.prototype.isFullScreenEnabled=function(){return!this.isUniversal()&&(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)},t.prototype.isFullScreen=function(){return!this.isUniversal()&&!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)},t.prototype.requestFullScreen=function(){if(!this.isUniversal()&&document&&document.body){var t=document.body;t.requestFullscreen?t.requestFullscreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.msRequestFullscreen&&t.msRequestFullscreen()}},t.prototype.exitFullScreen=function(){this.isUniversal()||document&&(document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen())},t.prototype.getProtocol=function(){return r.getProtocol()},t.prototype.getMode=function(){return this.configConstants.configMode},t.prototype.getKey=function(t){return this.configConstants[t]},t.prototype.getAppId=function(){return window.BuildInfo?window.BuildInfo.basePackageName:window.location.hostname},t.prototype.getAppVersion=function(){return this.configConstants.appVersion},t.prototype.getAppName=function(){return this.configConstants.appName},t.prototype.getFullAppName=function(){return this.getAppName()+"-"+this.getPlatformClean()+"-"+this.getAppVersion()},t.prototype.getWebUrl=function(){return this.configConstants.webUrl},t.prototype.getCssPublicUrl=function(){return"https://storage.googleapis.com/yoobic-mobile-apps/"+this.getAppVersion()+"/"+this.getAppName()+"/"+this.getPlatformClean()+"/"},t.prototype.getSyncedCollections=function(){return this.configConstants.syncedCollections},t.decorators=[{type:a.Injectable}],t.ctorParameters=function(){return[{type:undefined,decorators:[{type:a.Inject,args:[a.PLATFORM_ID]}]},{type:undefined,decorators:[{type:a.Inject,args:[e]}]}]},t}(),m=function(){function o(t){var e;"string"==typeof t?(e=g(t.split(",").map(parseFloat),2),this.latitude=e[0],this.longitude=e[1]):o.isPosition(t)?(this.latitude=t.latitude,this.longitude=t.longitude,this.accuracy=t.accuracy):(this.latitude=t.lat,this.longitude=t.lng)}return o.isPosition=function(t){return t instanceof o||c.isNumber(t.latitude)&&c.isNumber(t.longitude)},o.prototype.toGeoLoc=function(t){return void 0===t&&(t=!1),t?[this.longitude,this.latitude]:[this.latitude,this.longitude]},o.prototype.toJson=function(){return{latitude:this.latitude,longitude:this.longitude}},o.prototype.toStringLoc=function(){return this.latitude+","+this.longitude},o}(),y=function(){function t(t,e){this.geolocation=t,this.coreConfig=e,this.defaultPosition=new m({latitude:51.53162,longitude:-.2376447}),this.timeout=3e4}return t.prototype.getDistance=function(t,e,o,n,r){void 0===r&&(r="K");var i=Math.PI*t/180,s=Math.PI*o/180,c=e-n,u=Math.PI*c/180,a=Math.sin(i)*Math.sin(s)+Math.cos(i)*Math.cos(s)*Math.cos(u);return a=60*(a=180*(a=Math.acos(a))/Math.PI)*1.1515,"K"===r&&(a*=1.609344),"N"===r&&(a*=.8684),a},t.prototype.getLocation=function(o){var n=this;return void 0===o&&(o=!1),this.coreConfig.isCordova()?this.geolocation.getCurrentPosition({enableHighAccuracy:!0,maximumAge:9e4,timeout:this.timeout}).then(function(t){return new m(t.coords)},function(t){return n.defaultPosition}):navigator&&navigator.geolocation?new Promise(function(e,t){!o&&n.cache&&(!n.cacheTimestamp||15<r.dateDiffInMinutes(new Date,n.cacheTimestamp))?e(n.cache):navigator.geolocation.getCurrentPosition(function(t){n.cache=new m(t.coords),n.cacheTimestamp=new Date,e(n.cache)},function(t){n.cache=n.defaultPosition,n.cacheTimestamp=new Date,e(n.defaultPosition)},{enableHighAccuracy:!1,timeout:1e4,maximumAge:6e5})}):Promise.resolve(null)},t.decorators=[{type:a.Injectable}],t.ctorParameters=function(){return[{type:l.Geolocation},{type:h}]},t}(),v=function(){function t(t){this.coreConfig=t}return t.prototype.log=function(t){for(var e,o=[],n=1;n<arguments.length;n++)o[n-1]=arguments[n];"dev"===this.coreConfig.getMode()&&(e=window.console).log.apply(e,d([t],o))},t.prototype.forceLog=function(t){for(var e,o=[],n=1;n<arguments.length;n++)o[n-1]=arguments[n];(e=window.console).log.apply(e,d([t],o))},t.prototype.error=function(t){for(var e,o=[],n=1;n<arguments.length;n++)o[n-1]=arguments[n];"dev"===this.coreConfig.getMode()&&(e=window.console).error.apply(e,d([t],o))},t.prototype.alert=function(t){window.alert(t)},t.decorators=[{type:a.Injectable}],t.ctorParameters=function(){return[{type:h}]},t}(),b=function(){function t(t,e){this.coreConfig=t,this.log=e,this.init().then(function(){},function(t){})}return t.prototype.init=function(){var t=this;if(this.coreConfig.isCordova())try{return f.defineDriver(i).then(function(){return f.setDriver.bind(f)([i._driver,f.INDEXEDDB,f.WEBSQL,f.LOCALSTORAGE]).then(function(){return t.log.log("setDriver:"+f.driver.bind(f)()),Promise.resolve()})})}catch(e){return this.log.error(e),Promise.resolve()}else if(f.supports(f.WEBSQL))return f.setDriver.bind(f)(f.WEBSQL);return Promise.resolve()},t.prototype.set=function(t,e){return f.setItem.bind(f)(t,e)},t.prototype.get=function(t){return f.getItem.bind(f)(t)},t.prototype.remove=function(t){return f.removeItem.bind(f)(t)},t.prototype.clear=function(){return f.clear.bind(f)()},t.decorators=[{type:a.Injectable}],t.ctorParameters=function(){return[{type:h},{type:v}]},t}(),C=function(){function t(t){if((this.coreConfig=t).isUniversal())this.localStorage={};else{if("undefined"==typeof localStorage)throw new Error("Current browser does not support Local Storage");this.localStorage=localStorage}}return t.prototype.set=function(t,e){try{this.localStorage[t]=e}catch(o){}},t.prototype.get=function(t){return this.localStorage[t]||!1},t.prototype.setObject=function(t,e){this.localStorage[t]=JSON.stringify(e)},t.prototype.getObject=function(t){return this.localStorage[t]?JSON.parse(this.localStorage[t]):null},t.prototype.remove=function(t){this.coreConfig.isUniversal()?delete this.localStorage[t]:this.localStorage.removeItem(t)},t.prototype.clear=function(){if(this.coreConfig.isUniversal())this.localStorage={};else{var t=this.get("SERVER");this.localStorage.clear(),t&&this.set("SERVER",t)}},t.decorators=[{type:a.Injectable}],t.ctorParameters=function(){return[{type:h}]},t}();function w(c,u,a,l){return function(t,e){var o,n=Object.assign({},{storageKey:c||e});u?f.getItem(n.storageKey).then(function(t){o=t,a&&a(t)},function(){}):"undefined"!=typeof window&&(o=localStorage.getItem(n.storageKey)&&function s(t){try{JSON.parse(t)}catch(e){return!1}return!0}(localStorage.getItem(n.storageKey))?JSON.parse(localStorage.getItem(n.storageKey)):null);var r=!1,i={get:function(){return r=!0,o},set:function(t){if((r||(r=!0)===l)&&void 0!==t){o=t;try{u?f.setItem(n.storageKey,t)["catch"](function(){}):localStorage.setItem(n.storageKey,JSON.stringify(t))}catch(e){}}},enumerable:!1};Object.defineProperty(t,e,i)}}var S=function(){function t(t,e){var o=this;if(this.coreConfig=t,this.networkNative=e,this._isForcedOffline=!1,this._isOffline=!1,this._supportedConnections=["wifi","ethernet","4g","3g"],this._connectionChange=new s.Subject,this.coreConfig.isCordova()){var n=this.networkNative.type;c.isUndefined(n)?this._isOffline=!navigator.onLine:this._isOffline=this._supportedConnections.indexOf(n)<0}else this.coreConfig.isUniversal()?this._isOffline=!1:this._isOffline=!navigator.onLine;this.emit(),this.coreConfig.isCordova()?(this._onConnectSubscription=this.networkNative.onConnect().subscribe(function(){o._isOffline=!1,o.emit()}),this._onDisconnectSubscription=this.networkNative.onDisconnect().subscribe(function(){o._isOffline=!0,o.emit()})):this.coreConfig.isUniversal()||(this.onlineListener=function(){o._isOffline=!1,o.emit()},this.offlineListener=function(){o._isOffline=!0,o.emit()},window.addEventListener("online",this.onlineListener),window.addEventListener("offline",this.offlineListener))}return t.prototype.ngOnDestroy=function(){this._onConnectSubscription&&this._onConnectSubscription.unsubscribe(),this._onDisconnectSubscription&&this._onDisconnectSubscription.unsubscribe(),window.removeEventListener("online",this.onlineListener),window.removeEventListener("offline",this.offlineListener)},Object.defineProperty(t.prototype,"connectionChange$",{get:function(){return this._connectionChange.asObservable()},enumerable:!0,configurable:!0}),t.prototype.isOffline=function(){return this._isForcedOffline||this._isOffline},t.prototype.isForcedOffline=function(){return this._isForcedOffline},t.prototype.getConnection=function(){return this.networkNative.type},t.prototype.emit=function(){this._connectionChange.next(this._isForcedOffline||this._isOffline)},t.prototype.forceOffline=function(t,e){void 0===e&&(e=!0),this._isForcedOffline=t,e&&this.emit()},t.decorators=[{type:a.Injectable}],t.ctorParameters=function(){return[{type:h},{type:p.Network}]},function u(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(r=t[c])&&(s=(i<3?r(s):3<i?r(e,o,s):r(e,o))||s);return 3<i&&s&&Object.defineProperty(e,o,s),s}([w(),function o(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:type",Boolean)],t.prototype,"_isForcedOffline",void 0),t}(),I=function(){function t(){var c=this;this.retryOnFailure=function(o,t,n){void 0===t&&(t=3),void 0===n&&(n=300);var r,i=t,s=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return i<1?Promise.reject(r):(i--,o.apply(void 0,d(e))["catch"](function(t){return r=t,c.wait(n).then(function(){return s.apply(void 0,d(e))})}))};return s}}return t.prototype.wait=function(o){return new Promise(function(t,e){setTimeout(t,o)})},t.prototype.promiseTimeout=function(n,t){var e=new Promise(function(t,e){var o=setTimeout(function(){clearTimeout(o),e("Timed out in "+n+"ms.")},n)});return Promise.race([t,e])},t.prototype.sequential=function(t){return new Promise(function(e,o){if(!t||0===t.length)return e([]);var n=0,r=[];(t=t.concat(function(){return Promise.resolve()})).reduce(function(t,e){return t.then(function(t){return 0!=n++&&(r=r.concat(t)),e(t,r,n)})["catch"](function(t){return o(t)})},Promise.resolve(!1)).then(function(t){e(r)})})},t.decorators=[{type:a.Injectable}],t}(),P=function(){function t(t){this.coreConfig=t}return t.prototype.loadScript=function(n){var r=this;return new Promise(function(t,e){if(r.coreConfig.isUniversal())t(!0);else{var o=document.getElementsByTagName("head")[0];u(o,"<script async type=text/javascript src="+n+"><\/script>",{done:function(){t(!0)}})}})},t.prototype.getUrlParameterByName=function(t,e){e||(e=window.location.href),t=t.replace(/[\[\]]/g,"\\$&");var o=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)").exec(e);return o?o[2]?decodeURIComponent(o[2].replace(/\+/g," ")):"":null},t.prototype.removeParameterFromUrl=function(t,e){var o=e.split("?")[0],n=[],r=-1!==e.indexOf("?")?e.split("?")[1]:"";if(""!==r){for(var i=(n=r.split("&")).length-1;0<=i;i-=1)n[i].split("=")[0]===t&&n.splice(i,1);o=o+"?"+n.join("&")}return o},t.decorators=[{type:a.Injectable}],t.ctorParameters=function(){return[{type:h}]},t}(),O=function(){function e(){}return e.forRoot=function(t){return void 0===t&&(t=[]),{ngModule:e,providers:d(t,[h,y,b,C,v,S,I,P,l.Geolocation,p.Network])}},e.decorators=[{type:a.NgModule,args:[{declarations:[],imports:[n.CommonModule,o.HttpClientModule],exports:[n.CommonModule,o.HttpClientModule]}]}],e}();var F=function(){function n(){}return n.hexToRgb=function(t,e){void 0===e&&(e=1);var o=parseInt(t.replace("#",""),16);return"rgba("+(o>>16&255)+","+(o>>8&255)+","+(255&o)+","+e+")"},n.getKeys=function(){return["success","danger","black","warning","stable"]},n.getCssColor=function(t,e){if(document){var o=getComputedStyle(document.body).getPropertyValue("--"+t)||e||n[t.replace("-color","")];return o=(o||"").trim()}return e||n[t]},n.lightenDarkenColor=function(t,e){var o=!1;"#"===t[0]&&(t=t.slice(1),o=!0);var n=parseInt(t,16),r=(n>>16)+e;255<r?r=255:r<0&&(r=0);var i=(n>>8&255)+e;255<i?i=255:i<0&&(i=0);var s=(255&n)+e;return 255<s?s=255:s<0&&(s=0),(o?"#":"")+(s|i<<8|r<<16).toString(16)},n.toggleDarkTheme=function(){n.setDarkTheme(!n.isDarkTheme())},n.isDarkTheme=function(){return n._isDarkTheme},n.setDarkTheme=function(t){n._isDarkTheme=t,document&&(t?document.documentElement.classList.add("dark-theme"):document.documentElement.classList.remove("dark-theme"),n.success=n.getCssColor("success"),n.danger=n.getCssColor("danger"),n.warning=n.getCssColor("warning"),n.black=n.getCssColor("black"),n.light=n.getCssColor("light"),n.stable=n.getCssColor("stable"))},n.toggleBigFonts=function(){n.setBigFonts(!n.isBigFonts())},n.isBigFonts=function(){return n._isBigFonts},n.setBigFonts=function(t){n._isBigFonts=t,document&&(t?document.documentElement.classList.add("big-fonts"):document.documentElement.classList.remove("big-fonts"))},n._isDarkTheme=!1,n._isBigFonts=!1,n.success=n.getCssColor("success"),n.danger=n.getCssColor("danger"),n.warning=n.getCssColor("warning"),n.black=n.getCssColor("black"),n.light=n.getCssColor("light"),n.stable=n.getCssColor("stable"),n}();t.CommonModule=O,t.MixIn=function E(t){return function(n){t.forEach(function(e){var o={};e.apply(o),Object.getOwnPropertyNames(o).forEach(function(t){n.prototype[t]=o[t]}),Object.getOwnPropertyNames(e.prototype).forEach(function(t){"constructor"!==t&&(n.prototype[t]=e.prototype[t])})})}},t.Persistent=w,t.AutoUnsubscribe=function _(n){return void 0===n&&(n=[]),function(t){var o=t.prototype.ngOnDestroy;t.prototype.ngOnDestroy=function(){for(var t in this){var e=this[t];n.indexOf(t)<0&&e&&"function"==typeof e.unsubscribe&&e.unsubscribe()}o&&"function"==typeof o&&o.apply(this,arguments)}}},t.Colors=F,t.CORECONFIG_CONSTANTS=e,t.CoreConfig=h,t.Position=m,t.GeoLocation=y,t.LocalForageService=b,t.LocalStorage=C,t.Log=v,t.Network=S,t.PromiseService=I,t.Utils=P,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=common.umd.min.js.map