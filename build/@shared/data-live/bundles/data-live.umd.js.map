{"version":3,"file":"data-live.umd.js.map","sources":["node_modules/tslib/tslib.es6.js","ng://data-live/lib/interfaces/channel/channel.interface.ts","ng://data-live/lib/services/pubnub/pubnub.service.ts","ng://data-live/lib/services/channel/channel.service.ts","ng://data-live/lib/services/intercom/web-intercom.service.ts","ng://data-live/lib/services/intercom/intercom.service.ts","ng://data-live/lib/services/messages/messages.service.ts","ng://data-live/lib/services/track/track.service.ts","ng://data-live/lib/services/twilio-token/twilio-token.service.ts","ng://data-live/lib/services/video-call/video-call.service.ts","ng://data-live/lib/services/sentry-error-handler/sentry-error-handler.service.ts","ng://data-live/lib/data-live.module.ts","ng://data-live/lib/interfaces/channels/channels.interface.ts","ng://data-live/lib/interfaces/message/message.model.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","import { Entity, IAcl, User, Model, Editable } from '@shared/data-core';\nimport { FormFieldType } from '@shared/stencil';\n\n@Model({\n  className: 'Channel',\n  collectionName: 'channel',\n  fields: null,\n  include: ['users'],\n  searchSubquery: { collectionName: 'user', field: 'usersRef', values: '_id' }\n})\nexport class Channel extends Entity {\n  // export class Channel implements IEntity {\n  _id: string;\n  _acl: IAcl;\n  _lmt?: string;\n  _ect?: string;\n\n  channel: string;\n  isSupport: boolean;\n  isFavorite: boolean;\n  isOnline: boolean;\n  //All Users in the Channel\n  @Editable('Channel', {\n    type: FormFieldType.autocomplete,\n    collectionName: 'user',\n    multiple: true,\n    subQuery: { field: 'usersRef', values: '_id', collectionName: 'user' },\n    subQueryOverride: { field: 'usersRef', values: '_id', collectionName: 'user' }\n  })\n  users: Array<User>;\n  //other Users than the logged in user\n  others: Array<User>;\n\n  lastMessage: any;\n  lastMessageAlternate: boolean;\n  lastMessageDate?: any;\n\n  deleteMessages: Array<any>;\n}\n","import { Injectable } from '@angular/core';\nimport { Log, CoreConfig } from '@shared/common';\nimport { Translate } from '@shared/translate';\nimport { User, Authentication, Session, Push } from '@shared/data-core';\n\nimport { ChatMessage as Message } from '../../interfaces/message/message.interface';\nimport { Channels } from '../../interfaces/channels/channels.interface';\nimport { IPubNub, PresenceEvent, MessageEvent, StatusEvent, ChannelState, HereNowResponse, UUIDState, GlobalState } from '../../interfaces/pubnub/pubnub.interface';\n\nimport { includes, isObject, pick, forEach, each, merge } from 'lodash-es';\n\nimport { Subscription, Observable, Subject, from, of } from 'rxjs';\nimport { filter, map } from 'rxjs/operators';\nimport Big from 'big.js';\n\ndeclare const PubNub: any;\n\n//import * as pubnubLib from 'pubnub/dist/web/pubnub';\n\nexport class PubnubSender {\n  id: string;\n  username: string;\n  image: string;\n  appTitle: string;\n\n  constructor(id, username, image, appTitle = 'YOOBIC') {\n    this.id = id;\n    this.username = username;\n    this.image = image;\n    this.appTitle = appTitle;\n  }\n}\n\n@Injectable()\nexport class Pubnub {\n  //private static _pubnub: any = null;\n\n  protected sender: PubnubSender;\n  protected onlineUsers = new Map<string, any>();\n\n  private _supportId = '53fb03c6546847ee0536386a';\n  private _mainChannel = 'yoobicchannel';\n  private _supportPrefix = 'support_';\n  private _groupPrefix = 'group_';\n  private _channels: {\n    [channel: string]: {\n      messages: Subject<Message>;\n      subscription: Subscription;\n      typing?: Subject<[string, boolean]>;\n    };\n  } = {};\n  private _presenceSubject = new Subject<PresenceEvent>();\n  private _messageSubject = new Subject<MessageEvent>();\n  private _statusSubject = new Subject<StatusEvent>();\n\n  private _parentSubscription = new Subscription();\n\n  private pubnub: IPubNub;\n\n  constructor(private authentication: Authentication, private session: Session, private translate: Translate, private log: Log, protected push: Push, private coreConfig: CoreConfig) {}\n\n  get supportId() {\n    return this._supportId;\n  }\n\n  changeState(channels: string[], state: ChannelState): Promise<ChannelState> {\n    return this.pubnub.setState({ uuid: this.sender.id, channels, state }).then(r => r.state);\n  }\n\n  setIsTyping(channel: string, isTyping: boolean): Promise<ChannelState> {\n    return this.changeState([channel], { isTyping: isTyping.toString() });\n  }\n\n  isOnline(userId: string): boolean {\n    return this.onlineUsers.has(userId);\n  }\n\n  isPresent(userId: string, channel = this._mainChannel): Promise<boolean> {\n    return this.pubnub\n      .whereNow({ uuid: userId })\n      .then(res => {\n        return includes(res.channels, channel);\n      })\n      .catch(err => {\n        // if we get an error, don't reject, just return false;\n        return false;\n      });\n  }\n\n  getChannelId(user1Id: string, user2Id: string) {\n    return user1Id < user2Id ? user1Id + '_' + user2Id : user2Id + '_' + user1Id;\n  }\n\n  getSupportChannelId(userId: string) {\n    return this._supportPrefix + this.supportId + '_' + userId;\n  }\n\n  isSupportChannel(channel) {\n    return channel.indexOf(this._supportPrefix) >= 0;\n  }\n\n  parseSupportChannel(channel) {\n    return channel.replace(this._supportPrefix, '').replace(this._supportId + '_', '');\n  }\n\n  getGroupChannelId(channelId) {\n    return this._groupPrefix + channelId;\n  }\n\n  isGroupChannel(channel) {\n    return channel.indexOf(this._groupPrefix) === 0;\n  }\n\n  parseGroupChannel(channel) {\n    return channel.replace(this._groupPrefix, '');\n  }\n\n  getHistory(channel: string, count = 10, start?: number): Observable<[Array<Message>, number, number]> {\n    if (!this.pubnub) {\n      return of(<any>[]);\n    }\n    return from(this.pubnub.history({ channel: channel, count: count, reverse: false, start: start })).pipe(\n      map(\n        ({ messages, startTimeToken, endTimeToken }): [Array<Message>, number, number] => {\n          return [messages.map(item => merge(item.entry, { timetoken: item.timetoken })), startTimeToken, endTimeToken];\n        }\n      )\n    );\n  }\n\n  deleteMessages(channel: string, timetokens: Array<number>) {\n    let promises = timetokens.map(timetoken => this.pubnub.deleteMessages({ channel: channel, start: Number(new Big(timetoken).minus(2)), end: Number(new Big(timetoken).plus(2)) }));\n    return Promise.all(promises).then((ret: any) => {\n      return ret;\n    });\n  }\n\n  getChannelTyping(channel: string): Subject<[string, boolean]> {\n    if (channel && this._channels[channel] && this._channels[channel].typing) {\n      return this._channels[channel].typing;\n    } else {\n      return null;\n    }\n  }\n\n  initChannelTyping(channel: string, parent: Subscription): Subject<[string, boolean]> {\n    let typing = new Subject<[string, boolean]>();\n    let typingSubscription = this._presenceSubject\n      .pipe(\n        filter(m => m.channel === channel && m.uuid !== this.sender.id),\n        map(({ uuid, action, state }) => {\n          switch (action) {\n            case 'leave':\n            case 'timeout':\n              return [uuid, false];\n            case 'join':\n            case 'state-change':\n              return [uuid, isObject(state) && state.isTyping === 'true'];\n          }\n        })\n      )\n      .subscribe(typing);\n    parent.add(typing);\n    parent.add(typingSubscription);\n    return typing;\n  }\n\n  join(channel: string, withPresence = false, withTyping = false): Observable<Message> {\n    if (!this._channels[channel] || this._channels[channel].subscription.closed) {\n      let messages = new Subject<Message>();\n      if (this._messageSubject) {\n        let subscription = this._messageSubject\n          .pipe(\n            filter(m => m.channel === channel),\n            map(m => merge(m.message, { timetoken: m.timetoken }))\n          )\n          .subscribe(messages);\n        subscription.add(messages);\n        let typing;\n        if (withTyping) {\n          typing = this.initChannelTyping(channel, subscription);\n        }\n        this._parentSubscription.add(subscription);\n        this._channels[channel] = { messages, subscription, typing };\n      }\n      if (this.pubnub) {\n        this.pubnub.subscribe({ channels: [channel], withPresence: withPresence || withTyping });\n      }\n    }\n    if (this._channels && this._channels[channel] && this._channels[channel].messages) {\n      return this._channels[channel].messages;\n    } else {\n      return new Subject<Message>();\n    }\n  }\n\n  leave(channel: string) {\n    if (channel && this._channels[channel] && this.pubnub) {\n      this._channels[channel].subscription.unsubscribe();\n      this.pubnub.unsubscribe({ channels: [channel] });\n    }\n  }\n\n  publish(channel: string, message: Message) {\n    this.pubnub.publish({ channel: channel, message: message });\n  }\n\n  sendChatMessage(channel: string, text: string, receiverId: string, receiverUsername: string, channels?: Channels, photo?: any, type = 'chat', options = {}) {\n    let isGroup = this.isGroupChannel(channel);\n    let alertText = ''; //this.sender.username;\n    if (text.indexOf('ionic-chat-image') >= 0) {\n      alertText += '' + this.translate.get('SENDANEWPHOTO'); //': '\n    } else {\n      alertText += '' + text.substr(0, 50) + '...';\n    }\n    let message: Message = {\n      channel: channel,\n      message: text,\n      type: type,\n      options: options,\n      //entityId: entityId,\n      sender_id: this.sender.id,\n      sender_username: this.sender.username,\n      sender_photo: this.sender.image,\n      receiver_id: receiverId,\n      receiver_username: receiverUsername,\n      isGroup: isGroup,\n      groupName: !isGroup ? null : channels.name,\n      date_sent: new Date(),\n      photo: photo ? <any>pick(photo, ['_id', 'value', 'edit', 'texts', 'title', 'name', 'missiondescriptionRef', 'missionRef', 'missiondataRef', 'userRef', 'userDisplayname', 'address']) : null\n    };\n    // let offlineMessage = Object.assign({}, message, {\n    //     pn_apns: { aps: { alert: alertText, badge: 1 }, sender_username: this.sender.username, channel: channel }, //type: type || chatEvent.newMessage,\n    //     pn_gcm: { data: { message: alertText, title: 'Yoobic', sender_username: this.sender.username, channel: channel } }, //type: type || chatEvent.newMessage,\n    //     pn_debug: false\n    // });\n\n    let otherIds = [];\n    if (!isGroup) {\n      otherIds = [receiverId];\n    } else {\n      otherIds = channels.others.map(u => u._id);\n    }\n\n    otherIds.forEach(otherId => {\n      let promise = !this.isOnline(otherId) ? Promise.resolve(false) : this.isPresent(otherId, channel);\n      promise.then(\n        present => {\n          if (!present) {\n            if (this.isOnline(otherId)) {\n              this.publish(otherId, message);\n              this.push\n                .notifyUserById(otherId, {\n                  title: 'SILENTNOTIFICATION',\n                  mode: 'notification',\n                  pendingBadgePath: 'pendingBadges._communicate' + (isGroup ? '.team' : '.direct'),\n                  notificationOptions: {\n                    content_available: true\n                  }\n                })\n                .subscribe(() => {});\n            } else {\n              this.push\n                .notifyUserById(otherId, {\n                  title: (isGroup ? channels.name + ' - ' : '') + this.sender.username,\n                  body: alertText,\n                  mode: 'notification',\n                  pendingBadgePath: 'pendingBadges._communicate' + (isGroup ? '.team' : '.direct'),\n                  data: message\n                })\n                .subscribe(() => {});\n            }\n          }\n        },\n        err => {}\n      );\n    });\n    this.publish(channel, message);\n  }\n\n  safeMultiplexMessageObservable(channels: string[]): Observable<Message> {\n    return new Observable<Message>(observer => {\n      forEach(channels, (channel: string) => {\n        this._parentSubscription.add(this._channels[channel].messages.subscribe(m => observer.next(m)));\n      });\n    });\n  }\n\n  isAvailable() {\n    let available: boolean = true;\n    try {\n      if (!PubNub) {\n        available = false;\n      }\n    } catch (e) {\n      if (e instanceof ReferenceError) {\n        available = false;\n      }\n    }\n    return available;\n  }\n\n  init(user: User): Observable<Message> {\n    //return from(this.getPubnub()).pipe(mergeMap(pubnub => {\n    if (!this.isAvailable()) {\n      return;\n    }\n\n    this._presenceSubject = !this._presenceSubject || this._presenceSubject.closed ? new Subject<PresenceEvent>() : this._presenceSubject;\n    this._messageSubject = !this._messageSubject || this._messageSubject.closed ? new Subject<MessageEvent>() : this._messageSubject;\n    this._statusSubject = !this._statusSubject || this._statusSubject.closed ? new Subject<StatusEvent>() : this._statusSubject;\n    this._parentSubscription = !this._parentSubscription || this._parentSubscription.closed ? new Subscription() : this._parentSubscription;\n\n    this.sender = new PubnubSender(user._id, User.getDisplayName(user), user.imageData);\n    this.pubnub = new PubNub({\n      ssl: true,\n      keepAlive: true,\n      announceFailedHeartbeats: false,\n      heartbeatInterval: 600,\n      presenceTimeout: 300,\n      // setPresenceTimeout: 0,\n      // setPresenceTimeoutWithCustomInterval: 0,\n      publishKey: this.coreConfig.getKey('pubnubPublishKey'),\n      subscribeKey: this.coreConfig.getKey('pubnubSubscribeKey'),\n      uuid: this.sender.id\n    });\n\n    this._parentSubscription.add(this._presenceSubject);\n    this._parentSubscription.add(this._messageSubject);\n    this._parentSubscription.add(this._statusSubject);\n    // connect listener to subjects\n    this.pubnub.addListener({\n      presence: (p: PresenceEvent) => {\n        if (this._presenceSubject && this._presenceSubject.next) {\n          this._presenceSubject.next(p);\n        }\n      },\n      message: (m: MessageEvent) => {\n        if (this._messageSubject && this._messageSubject.next) {\n          this._messageSubject.next(m);\n        }\n      },\n      status: (s: StatusEvent) => {\n        if (this._statusSubject && this._statusSubject.next) {\n          if (s.error) {\n            this._statusSubject.error(s.error);\n          } else {\n            this._statusSubject.next(s);\n          }\n        }\n      }\n    });\n\n    // subscribe to _presenceSubject on the main channel to manage online user, ignore own events.\n    let onlineUsersSubscription = this._presenceSubject.pipe(filter(({ uuid, channel }) => uuid !== this.sender.id && channel === this._mainChannel)).subscribe((presence: PresenceEvent) => {\n      switch (presence.action) {\n        case 'leave':\n          this.onlineUsers.delete(presence.uuid);\n          break;\n        case 'join':\n        case 'state-change':\n          this.onlineUsers.set(presence.uuid, presence.state || {});\n          break;\n        case 'timeout':\n          this.onlineUsers.set(presence.uuid, null);\n          break;\n        case 'interval':\n          each(presence.join, userId => {\n            this.onlineUsers.set(userId, {});\n          });\n          // each(presence.timedout, userId => {\n          //     this.onlineUsers.set(userId, null);\n          // });\n          each(presence.leave, userId => {\n            this.onlineUsers.delete(userId);\n          });\n\n          if (presence.here_now_refresh && presence.channel === this._mainChannel) {\n            this.updateOnlineUsers();\n          }\n          break;\n      }\n    });\n    this._parentSubscription.add(onlineUsersSubscription);\n\n    let initMessageChannels: string[] = [];\n    //we use the main channel for online/presence detection, subscribe to the presence channel as well.\n    this.join(this._mainChannel, true);\n    this.updateOnlineUsers();\n    initMessageChannels.push(this._mainChannel);\n\n    //we use a specific user channel for notification\n    this.join(this.sender.id);\n    initMessageChannels.push(this.sender.id);\n\n    //we subscribe to each group of the current user for feed notification for example\n    if (!this.authentication.isAdmin() && this.session.groups) {\n      this.session.groups.forEach(group => {\n        this.join(group);\n        initMessageChannels.push(group);\n      });\n    }\n\n    return this.safeMultiplexMessageObservable(initMessageChannels);\n    //}));\n  }\n\n  updateOnlineUsers() {\n    this.pubnub.hereNow({ channels: [this._mainChannel], includeUUIDs: true }).then((response: HereNowResponse<UUIDState<GlobalState>>) => {\n      this.onlineUsers.clear();\n      response.channels[this._mainChannel].occupants.forEach(occupant => {\n        this.onlineUsers.set(occupant.uuid, occupant.state || {});\n      });\n    });\n  }\n\n  disconnect() {\n    if (this.sender && this.sender.id && this.pubnub) {\n      this.pubnub.unsubscribeAll();\n      this.pubnub.removeAllListeners();\n      this._channels = {};\n      this.pubnub.stop();\n    }\n    if (this._parentSubscription) {\n      this._parentSubscription.unsubscribe();\n    }\n    delete this._presenceSubject;\n    delete this._messageSubject;\n    delete this._statusSubject;\n    delete this._parentSubscription;\n  }\n\n  registerDevice(token, channel, type) {\n    this.pubnub.push.addChannels({ device: token, channels: [channel], pushGateway: type }, error => {\n      if (error) {\n        this.log.log('pubnub registered error ' + token, error);\n      } else {\n        this.log.log('pubnub registered success ' + token);\n      }\n    });\n  }\n\n  unregisterDevice(token, channel, type) {\n    this.pubnub.push.removeChannels({ device: token, channels: [channel], pushGateway: type }, error => {\n      if (error) {\n        this.log.log('pubnub unregistered error ' + token, error);\n      } else {\n        this.log.log('pubnub unregistered success ' + token);\n      }\n    });\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Broker, ResponseObject, Session, User, Users } from '@shared/data-core';\nimport { Filter } from '@shared/stencil';\n\nimport { Channel as ChannelInterface } from '../../interfaces/channel/channel.interface';\nimport { Channels } from '../../interfaces/channels/channels.interface';\nimport { Pubnub } from '../pubnub/pubnub.service';\n\nimport { Observable, Observer, forkJoin } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { uniqBy, orderBy } from 'lodash-es';\nimport { Translate } from '@shared/translate';\n\nexport { ChannelInterface };\n\n@Injectable()\nexport class Channel {\n  constructor(private broker: Broker, private pubnub: Pubnub, private session: Session, protected translate: Translate) {}\n\n  createChannels(channels: Channels) {\n    return new Observable<Channels>((observer: Observer<Channels>) => {\n      this.broker.save('channels', channels).subscribe(c => {\n        this.hydrateOthers(c, true);\n        this.updateChannels(c).subscribe(ret => {\n          observer.next(c);\n          observer.complete();\n        });\n      });\n    });\n  }\n\n  getChannelsById(channelsId: string) {\n    return this.broker.getAll('channels', null, null, null, [[{ field: 'channel', operator: { _id: 'eq' }, value: channelsId }]]).pipe(\n      map(retVal => {\n        if (retVal && retVal.data && retVal.data.length > 0) {\n          let channels = retVal.data[0];\n          this.hydrateOthers(channels, true);\n          return channels;\n        }\n        return null;\n      })\n    );\n  }\n\n  getChannelById(channelId: string) {\n    return this.broker.getAll('channel', null, null, null, [[{ field: 'channel', operator: { _id: 'eq' }, value: channelId }]]).pipe(\n      map(retVal => {\n        if (retVal && retVal.data && retVal.data.length > 0) {\n          let channel = retVal.data[0];\n          this.hydrateOthers(channel, false);\n          return channel;\n        }\n        return null;\n      })\n    );\n  }\n\n  //update the channel itself when we publish a new message\n  update(channel: ChannelInterface) {\n    channel = Object.assign({}, channel);\n    delete channel.others;\n    return this.broker.save('channel', channel);\n  }\n\n  // delete a channel\n  deleteChannel(channel: ChannelInterface) {\n    // TODO: implement pubnub.deleteChannels\n    return this.broker.delete('channel', channel._id);\n  }\n\n  updateChannels(channel: Channels) {\n    channel = Object.assign({}, channel);\n    delete channel.others;\n    return this.broker.save('channels', channel);\n  }\n\n  // delete a group channel\n  deleteChannels(channels: Channels) {\n    // TODO: implement pubnub.deleteChannels\n    return this.broker.delete('channels', channels._id);\n  }\n\n  //Get the channel filter for a specific user\n  getFilter(user1: User, user2?: User, isSupport?: boolean): Filter {\n    let usersRef = [{ field: 'usersRef', operator: { _id: 'inq' }, value: [{ _id: user1._id }] }];\n    if (user2) {\n      usersRef.push({ field: 'usersRef', operator: { _id: 'inq' }, value: [{ _id: user2._id }] });\n    }\n    if (!isSupport) {\n      usersRef.push({ field: 'usersRef', operator: { _id: 'nin' }, value: Users.adminIds });\n    }\n    return [...usersRef, { field: 'channel', operator: { _id: 'like' }, value: '_' }, { field: 'isSupport', operator: { _id: 'eq' }, value: isSupport === true }];\n  }\n\n  getChannelsFilter(user: User): Filter {\n    return [{ field: 'usersRef', operator: { _id: 'inq' }, value: [{ _id: user._id }] }];\n  }\n\n  hydrateOthers(channel: ChannelInterface | Channels, isGroup = false): ChannelInterface | Channels {\n    if (channel && channel.users) {\n      channel.others = channel.users.filter(u => u._id !== this.session.userId);\n    }\n    if (isGroup && (!channel.channel || !channel.channel.startsWith('group_'))) {\n      channel.channel = 'group_' + channel._id;\n    }\n    return channel;\n  }\n\n  //return the channel beetween 2 users\n  getByUsers(user1: User, user2?: User, isSupport?: boolean) {\n    return new Observable<ChannelInterface>((observer: Observer<ChannelInterface>) => {\n      this.broker.getAll('channel', null, null, null, [this.getFilter(user1, user2, isSupport)]).subscribe(retVal => {\n        let channel;\n        if (retVal.data.length > 0) {\n          channel = retVal.data[0];\n          this.hydrateOthers(channel);\n          observer.next(channel);\n          observer.complete();\n        } else {\n          channel = {\n            usersRef: isSupport ? [this.pubnub.supportId, user1._id] : [user1._id, user2._id],\n            channel: isSupport ? this.pubnub.getSupportChannelId(user1._id) : this.pubnub.getChannelId(user1._id, user2._id),\n            isSupport: isSupport === true,\n            isFavorite: false,\n            _tenantRef: user2 ? user2._tenantRef : user1._tenantRef,\n            users: isSupport\n              ? [\n                  {\n                    _id: this.pubnub.supportId,\n                    username: 'smartin@yoobic.com',\n                    firstName: 'Sarah',\n                    lastName: 'Martin',\n                    imageData: 'http://res.cloudinary.com/www-yoobic-com/image/upload/a_exif/v1466421996/jv0vc0yizwqefj22iirh.png'\n                  },\n                  user1\n                ]\n              : [user1, user2]\n          };\n          this.broker.setAcl(channel, null, null, null, user2 ? [user1._id, user2._id] : [user1._id]);\n          this.update(<any>channel).subscribe(c => {\n            this.hydrateOthers(c);\n            observer.next(c);\n            observer.complete();\n          });\n        }\n      });\n    });\n  }\n\n  //Return the support channel for a specific user\n  getSupportByUser(user: User): Observable<ChannelInterface> {\n    return this.getByUsers(user, null, true);\n  }\n\n  getTransform(userId: string, isGroup = false) {\n    return (res: ResponseObject) => {\n      let channels = [];\n      return new Observable<ResponseObject>((observer: Observer<ResponseObject>) => {\n        if (res.data && res.data.map) {\n          if (!isGroup) {\n            res.data = uniqBy(res.data, 'channel');\n          }\n          channels = res.data\n            .map((channel: any) => {\n              this.hydrateOthers(channel, isGroup);\n              if (channel.others && channel.others.length > 0) {\n                if (!isGroup) {\n                  channel.isOnline = this.pubnub.isOnline(channel.others[0]._id);\n                }\n                return channel;\n              } else {\n                return undefined;\n              }\n            })\n            .filter(x => x !== undefined);\n        }\n        if (channels.length === 0) {\n          observer.next({ count: 0, data: [] });\n          observer.complete();\n        } else {\n          forkJoin(\n            channels.map((channel: ChannelInterface) => {\n              return this.pubnub.getHistory(channel.channel, 1).pipe(\n                map((retVal: any) => {\n                  if (retVal.length > 0) {\n                    channel.lastMessage = null;\n                    channel.lastMessageAlternate = null;\n                    channel.lastMessageDate = '';\n\n                    let messages = retVal[0];\n                    if (messages.length > 0) {\n                      let lastMessage = messages[0];\n                      if (!channel.deleteMessages || channel.deleteMessages.indexOf(lastMessage.date_sent) < 0) {\n                        channel.lastMessage = lastMessage.message;\n                        channel.lastMessageDate = lastMessage.date_sent;\n                        if (channel.lastMessage && channel.lastMessage.indexOf('ionic-chat-image') > 0) {\n                          channel.lastMessage = this.translate.get('PHOTO');\n                        }\n                        channel.lastMessageAlternate = lastMessage.sender_id !== this.session.userId;\n                      }\n                    }\n                  }\n                  return channel;\n                })\n              );\n            })\n          ).subscribe(c => {\n            c = orderBy(c, ['lastMessageDate'], ['desc']);\n            observer.next({ count: res.count, data: <any>c });\n            observer.complete();\n          });\n        }\n      });\n    };\n  }\n\n  //Remove the current user from the users list and assign the others attribute\n  getTransformChannel(userId: string) {\n    return this.getTransform(userId, false);\n  }\n\n  //Remove the current user from the users list and assign the others attribute\n  getTransformChannels(userId: string) {\n    return this.getTransform(userId, true);\n  }\n}\n","import { Inject, Injectable, PLATFORM_ID, /*Optional, Injector, isDevMode, */ Renderer2, RendererFactory2, ViewEncapsulation } from '@angular/core';\n// import { Router } from '@angular/router';\nimport { isPlatformBrowser, DOCUMENT } from '@angular/common';\n\nimport { IntercomConfig, Any, BootInput } from '../../interfaces/intercom/intercom.interface';\n\n/**\n * A provider with every Intercom.JS method\n */\n@Injectable()\nexport class WebIntercom {\n  private id: string;\n\n  private renderer2: Renderer2;\n  private config: IntercomConfig;\n  private isInitialized: boolean = false;\n\n  // private router: Router;\n\n  constructor(\n    // private injector: Injector,\n    @Inject(PLATFORM_ID) protected platformId: Object,\n    // private router: Router,\n    private rendererFactory: RendererFactory2,\n    @Inject(DOCUMENT) private document\n  ) {\n    if (!isPlatformBrowser(this.platformId)) {\n      return;\n    }\n\n    // this.router = this.injector.get(Router);\n\n    this.renderer2 = this.rendererFactory.createRenderer(this.document, {\n      id: '-1',\n      encapsulation: ViewEncapsulation.None,\n      styles: [],\n      data: {}\n    });\n\n    // Subscribe to router changes\n  }\n  public init(config: IntercomConfig = { appId: '' }) {\n    this.config = config;\n    if (this.isInitialized) {\n      return;\n    }\n    this.isInitialized = false;\n    // if (config && config.updateOnRouterChange) {\n    //   this.router.events.subscribe(event => {\n    //     this.update();\n    //   });\n    // } else if (isDevMode()) {\n    //   console.warn(`\n    //   Common practice in single page applications is to update whenever the route changes.\n    //   ng-intercom supports this functionality out of the box just set 'updateOnRouterChange' to true in your Intercom Module config.\n    //   This warning will not appear in production, if you choose not to use router updating.\n    //   `);\n    // }\n  }\n\n  /**\n   * If you'd like to control when Intercom is loaded, you can use the 'boot' method.\n   * This is useful in situations like a one-page Javascript based application where the user may not be logged in\n   * when the page loads. You call this method with the standard intercomSettings object.\n   */\n  public boot({ app_id, ...intercomData }: BootInput = {}): void {\n    if (!isPlatformBrowser(this.platformId)) {\n      return;\n    }\n    if (app_id !== this.config.appId) {\n      this.config.appId = app_id || this.config.appId;\n      if ((<any>window).Intercom) {\n        this.shutdown();\n      }\n    }\n    // Run load and attach to window\n    this.loadIntercom(this.config, (event: Event) => {\n      // then boot the intercom js\n      const data = {\n        ...intercomData,\n        app_id: this.config.appId\n      };\n\n      return (<any>window).Intercom('boot', data);\n    });\n  }\n\n  /**\n   * If you have the Respond product (combined with another product like Engage)\n   * you should call the Intercom shutdown method to clear your usersâ conversations anytime they logout\n   * of your application. Otherwise, the cookie we use to track who was most recently logged in on a given device\n   * or computer will keep these conversations in the Messenger for one week.\n   * This method will effectively clear out any user data that you have been passing through the JS API.\n   */\n  public shutdown(): void {\n    if (!isPlatformBrowser(this.platformId)) {\n      return;\n    }\n    if (!(<any>window).Intercom) {\n      return;\n    }\n    return (<any>window).Intercom('shutdown');\n  }\n\n  /**\n   * Calling the update method without any other arguments will trigger the JavaScript to look for new messages\n   * that should be displayed to the current user (the one whose details are in the window.intercomSettings variable)\n   * and show them if they exist.\n   *\n   * Calling the update method with a JSON object of user details will update those fields on the current user\n   * in addition to logging an impression at the current URL and looking for new messages for the user.\n   */\n  public update(data?: Any): void {\n    if (!isPlatformBrowser(this.platformId)) {\n      return;\n    }\n    if (!(<any>window).Intercom) {\n      return;\n    }\n    if (data) {\n      return (<any>window).Intercom('update', data);\n    } else {\n      return (<any>window).Intercom('update');\n    }\n  }\n\n  /**\n   * This will hide the main Messenger panel if it is open. It will not hide the Messenger Launcher.\n   */\n  public hide(): void {\n    if (!isPlatformBrowser(this.platformId)) {\n      return;\n    }\n    if (!(<any>window).Intercom) {\n      return;\n    }\n    return (<any>window).Intercom('hide');\n  }\n\n  /**\n   * This will show the Messenger. If there are no conversations it will open with the new message view,\n   * if there are it will open with the message list.\n   *\n   * If a `message` parameter is supplied, it will automatically open a new message window, aliasing showNewMessage().\n   *\n   */\n  public show(message?: string): void {\n    if (!isPlatformBrowser(this.platformId)) {\n      return;\n    }\n    if (!(<any>window).Intercom) {\n      return;\n    }\n    if (message) {\n      return (<any>window).Intercom('show');\n    } else {\n      return this.showNewMessage(message);\n    }\n  }\n\n  /**\n   * To open the message window with the message list you can call `showMessages()`.\n   */\n  public showMessages(): void {\n    if (!isPlatformBrowser(this.platformId)) {\n      return;\n    }\n    if (!(<any>window).Intercom) {\n      return;\n    }\n    return (<any>window).Intercom('showMessages');\n  }\n\n  /**\n   * To open the message window with the new message view you can call showNewMessage().\n   *\n   * This function takes an optional parameter that can be used to pre-populate the message composer as shown below.\n   */\n  public showNewMessage(message?: string): void {\n    if (!isPlatformBrowser(this.platformId)) {\n      return;\n    }\n    if (!(<any>window).Intercom) {\n      return;\n    }\n    if (message) {\n      return (<any>window).Intercom('showNewMessage', message);\n    } else {\n      return (<any>window).Intercom('showNewMessage');\n    }\n  }\n\n  /**\n   * You can submit an event using the trackEvent method.\n   * This will associate the event with the currently logged in user and send it to Intercom.\n   * The final parameter is a map that can be used to send optional metadata about the event.\n   *\n   * You can also add custom information to events in the form of event metadata.\n   */\n  public trackEvent(eventName: string, metadata?: any): void {\n    if (!isPlatformBrowser(this.platformId)) {\n      return;\n    }\n    if (!(<any>window).Intercom) {\n      return;\n    }\n    if (metadata) {\n      return (<any>window).Intercom('trackEvent', eventName, metadata);\n    } else {\n      return (<any>window).Intercom('trackEvent', eventName);\n    }\n  }\n\n  /**\n   * A visitor is someone who goes to your site but does not use the messenger.\n   * You can track these visitors via the visitor user_id.\n   * This user_id can be used to retrieve the visitor or lead through the REST API.\n   */\n  public getVisitorId(): string {\n    if (!isPlatformBrowser(this.platformId)) {\n      return;\n    }\n    if (!(<any>window).Intercom) {\n      return;\n    }\n    return (<any>window).Intercom('getVisitorId');\n  }\n\n  /**\n   * Alias for getVisitorId()\n   * @alias getVisitorId()\n   * @readonly\n   */\n  get visitorId(): string {\n    if (!isPlatformBrowser(this.platformId)) {\n      return;\n    }\n    if (!(<any>window).Intercom) {\n      return;\n    }\n    return (<any>window).Intercom('getVisitorId');\n  }\n\n  /**\n   * Gives you the ability to hook into the show event. Requires a function argument.\n   */\n  public onShow(handler: () => void): void {\n    if (!isPlatformBrowser(this.platformId)) {\n      return;\n    }\n    if (!(<any>window).Intercom) {\n      return;\n    }\n    return (<any>window).Intercom('onShow', handler);\n  }\n\n  /**\n   * Gives you the ability to hook into the hide event. Requires a function argument.\n   */\n  public onHide(handler: () => void): void {\n    if (!isPlatformBrowser(this.platformId)) {\n      return;\n    }\n    if (!(<any>window).Intercom) {\n      return;\n    }\n    return (<any>window).Intercom('onHide', handler);\n  }\n\n  /**\n   * This method allows you to register a function that will be called when the current number of unread messages changes.\n   */\n  public onUnreadCountChange(handler: (unreadCount?: number) => void): void {\n    if (!isPlatformBrowser(this.platformId)) {\n      return;\n    }\n    if (!(<any>window).Intercom) {\n      return;\n    }\n    return (<any>window).Intercom('onUnreadCountChange', handler);\n  }\n\n  injectIntercomScript(conf: IntercomConfig, afterInjectCallback: (ev: Event) => any): void {\n    // if (!isPlatformBrowser(this.platformId)) {\n    //   return\n    // }\n\n    const s = this.document.createElement('script');\n    s.type = 'text/javascript';\n    s.async = true;\n    s.src = `https://widget.intercom.io/widget/${this.id}`;\n\n    if (s.attachEvent) {\n      s.attachEvent('onload', afterInjectCallback);\n    } else {\n      s.addEventListener('load', afterInjectCallback, false);\n    }\n\n    if (this.renderer2 && this.renderer2.appendChild) {\n      this.renderer2.appendChild(this.document.head, s);\n    }\n\n    (<any>window).Intercom('update', conf);\n  }\n\n  loadIntercom(config: IntercomConfig, afterLoadCallback: (ev: Event) => any): void {\n    this.id = config.appId;\n    const w = <any>window;\n    const ic = w.Intercom;\n    if (typeof ic === 'function') {\n      ic('reattach_activator');\n      ic('update', config);\n    } else {\n      const i: any = function() {\n        i.c(arguments);\n      };\n      i.q = [];\n      i.c = function(args: any) {\n        i.q.push(args);\n      };\n      w.Intercom = i;\n      this.injectIntercomScript(config, afterLoadCallback);\n    }\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { CoreConfig } from '@shared/common';\nimport { Authentication, User, Config, Session } from '@shared/data-core';\nimport { Subject } from 'rxjs';\nimport { Intercom as IntercomNative } from '@ionic-native/intercom/ngx';\nimport { toDate, unix } from '@shared/stencil';\n\nimport { WebIntercom } from './web-intercom.service';\n\n@Injectable()\nexport class Intercom {\n  public unreadCount$ = new Subject<number>();\n\n  protected get app_id() {\n    return this.config.serverName === 'Production' ? this.coreConfig.getKey('intercomIdProd') : this.coreConfig.getKey('intercomIdDev');\n  }\n\n  constructor(protected coreConfig: CoreConfig, protected config: Config, protected intercomNative: IntercomNative, protected authentication: Authentication, protected session: Session, protected webIntercom: WebIntercom) {\n    this.authentication.login$.subscribe(() => this.init());\n    this.authentication.logout$.subscribe(() => this.logout());\n    this.authentication.profileUpdated$.subscribe(user => this.identify(user));\n  }\n\n  isEnabled() {\n    if (this.config.isE2E) {\n      return false;\n    }\n    if (this.coreConfig.isLocalhost() && !this.coreConfig.isCordova()) {\n      return false;\n    }\n    return true;\n  }\n\n  init() {\n    // initialize intercom when lauching the app or log in\n    if (!this.isEnabled()) {\n      return;\n    }\n    if (!this.coreConfig.isCordova()) {\n      this.webIntercom.init({ appId: this.app_id });\n      this.webIntercom.boot({\n        app_id: this.app_id,\n        hide_default_launcher: true\n      });\n      // if (window.Intercom) {\n      //     window.Intercom('boot', {\n      //         app_id: this.app_id,\n      //         hide_default_launcher: true\n      //     });\n      // }\n    } else {\n      // register identified user only if the app is loggedin\n      if (this.authentication.isLoggedIn() && this.session.userId) {\n        this.intercomNative.setLauncherVisibility('GONE');\n        this.intercomNative.registerIdentifiedUser({ userId: this.session.userId });\n      }\n    }\n  }\n\n  registerForPush() {\n    if (this.coreConfig.isCordova()) {\n      this.intercomNative.registerForPush();\n    }\n  }\n\n  logout() {\n    if (!this.isEnabled()) {\n      return;\n    }\n    // This resets the Intercom integration's cache of your user's identity and wipes the slate clean and also hide the launcher.\n    if (!this.coreConfig.isCordova()) {\n      this.webIntercom.shutdown();\n      // if (window.Intercom) {\n      //     window.Intercom('shutdown');\n      // }\n    } else {\n      this.intercomNative.reset();\n      //this.ionicIntercom.setLauncherVisibility('HIDE');\n    }\n  }\n\n  identify(user: User) {\n    if (!this.isEnabled() || !user) {\n      return;\n    }\n    let traits = {\n      user_id: user._id,\n      language_override: user.language,\n      avatar: {\n        type: 'avatar',\n        image_url: user.imageData\n      },\n      email: user.email || user.username,\n      username: user.username,\n      firstName: user.firstName,\n      lastName: user.lastName,\n      createdAt: unix(toDate(user._ect)),\n      phone: user.telephone,\n      gender: user.gender,\n      device: user.device,\n      target: this.coreConfig.getFullAppName(),\n      company: user.company,\n      role: user.role,\n      tenant: user._tenant ? user._tenant.name : '',\n      hide_default_launcher: true //,\n      //logrocketURL: 'https://app.logrocket.com/' + this.coreConfig.getKey('logrocketId') + '+/sessions?u=' + user._id\n      //custom_launcher_selector: '#intercom_launcher'\n    };\n    if (!this.coreConfig.isCordova()) {\n      this.webIntercom.update(traits);\n      this.webIntercom.onUnreadCountChange(unreadCount => {\n        this.unreadCount$.next(unreadCount);\n      });\n      // if (window.Intercom) {\n      //     window.Intercom('update', traits);\n      //     window.Intercom('onUnreadCountChange', (unreadCount) => {\n      //         this.unreadCount$.next(unreadCount);\n      //     });\n      // }\n    } else {\n      this.intercomNative.updateUser(traits);\n      this.intercomNative.unreadConversationCount().then(unreadCount => {\n        this.unreadCount$.next(unreadCount);\n      });\n    }\n  }\n\n  trackEvent(eventName: string, metaData: any) {\n    if (!this.coreConfig.isCordova()) {\n      this.webIntercom.trackEvent(eventName, metaData);\n    } else {\n      this.intercomNative.logEvent(eventName, metaData);\n    }\n  }\n\n  update(metaData: any) {\n    if (!this.coreConfig.isCordova()) {\n      this.webIntercom.update(metaData);\n    } else {\n      this.intercomNative.updateUser(metaData);\n    }\n  }\n\n  show() {\n    if (!this.isEnabled()) {\n      return;\n    }\n    if (!this.coreConfig.isCordova()) {\n      this.webIntercom.show();\n      // if (window.Intercom) {\n      //     window.Intercom('show');\n      // }\n    } else {\n      this.intercomNative.displayMessenger();\n    }\n  }\n}\n","/* tslint:disable:variable-name */\nimport { Injectable } from '@angular/core';\nimport { Broker, Requestor } from '@shared/data-core';\nimport { Message } from '../../interfaces/message/message.model';\nimport { Observable } from 'rxjs';\n\n@Injectable()\nexport class Messages {\n  constructor(private broker: Broker, private rq: Requestor) {}\n\n  getJsonMessage(message: Message) {\n    return {\n      to: message.to,\n      content: {\n        title: message.title,\n        body: message.body,\n        //footer: message.footer,\n        actionURL: message.actionURL,\n        actionText: message.actionText,\n        action: message.actionURL ? true : false,\n        thankyou: message.thankyou\n      }\n    };\n  }\n\n  sendMail(message: Message): any {\n    return this.rq.post(this.apiUrl + 'mail', this.getJsonMessage(message));\n  }\n\n  unblockEmails(emails: Array<string>): Observable<any> {\n    return this.rq.post(this.broker.getApiUrl() + 'businesslogic/unblockEmails', { emails });\n  }\n\n  private get apiUrl() {\n    return this.broker.getApiUrl() + 'Messages/';\n  }\n}\n","import { Injectable, Injector } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { Network, CoreConfig, Log, LocalStorage, Colors } from '@shared/common';\nimport { User, Authentication, Session, Push, Config } from '@shared/data-core'; //, Requestor, Config\nimport { Intercom } from '../intercom/intercom.service';\nimport { merge } from 'lodash-es';\n//import { captureException, init, sessionURL, getSessionURL, identify } from 'logrocket';\n//const LogRocket = require('logrocket');\n@Injectable()\nexport class Track {\n  constructor(protected network: Network, protected push: Push, protected session: Session, protected localStorage: LocalStorage, protected authentication: Authentication, protected coreConfig: CoreConfig, protected config: Config, protected log: Log, protected injector: Injector, protected intercom: Intercom) {\n    this.loadAnalytics();\n    //this.loadLogRocket();\n    //this.loadSessionStack();\n  }\n\n  isEnabled(forceLoggedIn: boolean = true, ignoreE2E: boolean = false) {\n    if (this.network.isOffline()) {\n      return false;\n    }\n    if (this.coreConfig.isLocalhost() && !this.coreConfig.isCordova()) {\n      return false;\n    }\n    if (this.coreConfig.getMode() !== 'prod') {\n      return false;\n    }\n    if (this.config.isE2E && !ignoreE2E) {\n      return false;\n    }\n    if (forceLoggedIn && !this.authentication.isLoggedIn()) {\n      return false;\n    }\n    if (this.session.user && this.session.user.disableTracking) {\n      return false;\n    }\n    return true;\n  }\n\n  // loadLogRocket() {\n  //   if (this.isEnabled(false)) {\n  //     try {\n  //       LogRocket.init(this.coreConfig.getKey('logrocketId'), {\n  //         dom: {\n  //           baseHref: this.coreConfig.getCssPublicUrl()\n  //         }\n  //       });\n  //     } catch (error) { }\n  //   }\n  // }\n\n  loadSessionStack() {\n    return new Promise((resolve, reject) => {\n      try {\n        if (!window['SessionStack'] && this.isEnabled(false, true)) {\n          if (this.coreConfig.isIOS() && this.coreConfig.isCordova()) {\n            Object.defineProperty(window.document, 'cookie', {\n              enumerable: true,\n              configurable: true,\n              get: () => {\n                return this.localStorage.get('document-cookie');\n              },\n              set: cookieString => {\n                let cookie = this.localStorage.get('document-cookie');\n                if (cookie) {\n                  let cookies = cookie.split('; ');\n                  let name = cookieString.split('=')[0];\n                  cookies = cookies.filter(c => c.indexOf(name + '=') < 0);\n                  cookies.push(cookieString.trim());\n                  cookie = cookies.join('; ');\n                } else {\n                  cookie = cookieString;\n                }\n                this.localStorage.set('document-cookie', cookie);\n              }\n            });\n          }\n\n          window['SessionStackKey'] = 'SessionStack';\n          window['SessionStack'] = window['SessionStack'] || {\n            t: this.coreConfig.isIonic() ? this.coreConfig.getKey('sessionStackMobile') : this.coreConfig.getKey('sessionStackWeb'),\n            q: []\n          };\n          ['start', 'stop', 'identify', 'getSessionId', 'log', 'setOnDataCallback'].forEach(key => {\n            window['SessionStack'][key] =\n              window['SessionStack'][key] ||\n              function() {\n                window['SessionStack'].q.push([key].concat([].slice.call(arguments, 0)));\n              };\n          });\n          let f = document.createElement('script');\n          f.async = !0;\n          f.src = 'https://cdn.sessionstack.com/sessionstack.js';\n          f.onload = () => {\n            resolve(true);\n          };\n          f.onerror = err => {\n            reject(err);\n          };\n          let g = document.getElementsByTagName('script')[0];\n          g.parentNode.insertBefore(f, g);\n        } else {\n          resolve(false);\n        }\n      } catch (err) {\n        reject(err);\n      }\n    });\n  }\n\n  // sendLogRocketError(err) {\n  //   try {\n  //     if (this.isEnabled(false)) {\n  //       LogRocket.captureException(err);\n  //     }\n  //   } catch (err) { }\n  // }\n\n  // getLogRocketSessionUrl() {\n  //   try {\n  //     return LogRocket.sessionURL;\n  //   } catch (error) { }\n  //   return '';\n  // }\n\n  getSessionStackSession(): Promise<string> {\n    return new Promise(resolve => {\n      if (window['SessionStack']) {\n        window['SessionStack'].getSessionId(sessionId => {\n          this.log.log('SessionStack sessionid', sessionId);\n          resolve(sessionId);\n        });\n      } else {\n        resolve(null);\n      }\n    });\n  }\n\n  getSessionStackUrl(): any {\n    return 'https://app.sessionstack.com/player/#/sessions/';\n  }\n\n  sendSessionStackError(err) {\n    // try {\n    //   if (this.isEnabled(false) && window['SessionStack']) {\n    //     window['SessionStack'].log(err);\n    //   }\n    // } catch (err) { }\n  }\n\n  loadAnalytics() {\n    if (!this.isEnabled(false)) {\n      return;\n    }\n    let analytics = (window.analytics = window.analytics || []);\n    if (!analytics.initialize) {\n      if (analytics.invoked) {\n        this.log.error('Segment snippet included twice.');\n      } else {\n        analytics.invoked = !0;\n        analytics.methods = ['trackSubmit', 'trackClick', 'trackLink', 'trackForm', 'pageview', 'identify', 'reset', 'group', 'track', 'ready', 'alias', 'debug', 'page', 'once', 'off', 'on'];\n        analytics.factory = function(tt) {\n          return function() {\n            let e = Array.prototype.slice.call(arguments);\n            e.unshift(tt);\n            analytics.push(e);\n            return analytics;\n          };\n        };\n        for (let t = 0; t < analytics.methods.length; t++) {\n          let e = analytics.methods[t];\n          analytics[e] = analytics.factory(e);\n        }\n        analytics.load = function(t) {\n          let e = document.createElement('script');\n          e.type = 'text/javascript';\n          e.async = !0;\n          e.src = ('https:' === document.location.protocol ? 'https://' : 'http://') + 'cdn.segment.com/analytics.js/v1/' + t + '/analytics.min.js';\n          let n = document.getElementsByTagName('script')[0];\n          n.parentNode.insertBefore(e, n);\n        };\n        analytics.SNIPPET_VERSION = '4.0.0';\n        analytics.load(this.config.serverName === 'Production' ? this.coreConfig.getKey('segmentApiWriteKey') : this.coreConfig.getKey('segmentApiWriteKeyDev'));\n        analytics.page();\n\n        // LogRocket.getSessionURL(url => {\n        //   analytics.track('LogRocket', { sessionURL: url });\n        //   this.intercom.trackEvent('LogRocket', { sessionURL: url });\n        // });\n      }\n    }\n  }\n\n  track(event: string, properties?: Object): void {\n    if (!event || event === '') {\n      return;\n    }\n    event = event\n      .split(' ')\n      .map(word => word.charAt(0).toUpperCase() + word.slice(1).toLowerCase())\n      .join(' ');\n    if (this.session.debugEvent) {\n      this.log.log('EVENT', event, properties);\n    }\n    if (this.isEnabled() && window.analytics) {\n      try {\n        window.analytics.track(event, merge(this.globalTrackedProps(this.session.user), properties));\n      } catch (error) {}\n    }\n  }\n\n  page(name: string, category?: string, properties?: any) {\n    if (this.isEnabled() && window.analytics) {\n      try {\n        window.analytics.page(category, name, merge(this.globalTrackedProps(this.session.user), properties));\n      } catch (error) {}\n    }\n  }\n\n  identify(user: User) {\n    if (!user) {\n      return;\n    }\n    setTimeout(() => {\n      if (this.isEnabled()) {\n        // try {\n        // let traits = {\n        //   avatar: user.imageData || '',\n        //   email: user.email || user.username || '',\n        //   firstName: user.firstName || '',\n        //   lastName: user.lastName || '',\n        //   createdAt: user._ect || '',\n        //   phone: user.telephone || '',\n        //   gender: user.gender || '',\n        //   device: user.device || '',\n        //   target: this.coreConfig.getFullAppName(),\n        //   language: user.language || ''\n        // };\n        //   LogRocket.identify(user._id, traits);\n        // } catch (error) { }\n        if (window.analytics) {\n          try {\n            let segment_traits = {\n              user_id: user._id || '',\n              user_tags: user.tags || '',\n              email: user.email || user.username || '',\n              operating_system: this.coreConfig.getPlatform(),\n              avatar: user.imageData || '',\n              phone: user.telephone || '',\n              gender: user.gender || '',\n              target: this.coreConfig.getFullAppName(),\n              version: this.coreConfig.getAppVersion(),\n              is_dark_theme: Colors.isDarkTheme()\n            };\n            window.analytics.identify(user._id, merge(this.globalTrackedProps(user), segment_traits));\n          } catch (error) {}\n        }\n        // this.loadSessionStack().then(success => {\n        //   if (success && window['SessionStack']) {\n        //     //&& !(this.coreConfig.isIOS() && this.coreConfig.isCordova())\n        //     try {\n        //       this.log.log('SessionStack: identify');\n        //       window['SessionStack'].identify({\n        //         userId: user._id || '',\n        //         email: user.email || user.username || '',\n        //         displayName: User.getDisplayName(user),\n        //         // Add your own custom user variables here.\n        //         user_tags: user.tags || '',\n        //         operating_system: this.coreConfig.getPlatform(),\n        //         avatar: user.imageData || '',\n        //         phone: user.telephone || '',\n        //         gender: user.gender || '',\n        //         target: this.coreConfig.getFullAppName(),\n        //         version: this.coreConfig.getAppVersion();\n        //         is_dark_theme: Colors.isDarkTheme()\n        //       });\n        //       setTimeout(() => {\n        //         this.getSessionStackSession().then(sessionId => {\n        //           let sessionstackURL = this.getSessionStackUrl() + (sessionId || 'notfound');\n        //           this.log.log('SessionStack: link to intercom', sessionstackURL);\n        //           this.intercom.update({\n        //             sessionstackURL: sessionstackURL\n        //           });\n        //         });\n        //       }, 2000);\n        //     } catch (error) { }\n        //   }\n        // });\n      }\n      this.intercom.identify(user);\n      setTimeout(() => {\n        if (window && window['FS'] && window['FS'].getCurrentSessionURL) {\n          let fullstoryURL = window['FS'].getCurrentSessionURL();\n          this.intercom.update({\n            fullstoryURL: fullstoryURL\n          });\n        }\n      }, 2000);\n    }, 3000);\n  }\n\n  intercomRegisterForPush() {\n    this.intercom.registerForPush();\n  }\n\n  globalTrackedProps(user: User) {\n    let props = {\n      user_groups: this.authentication.isAdmin() ? [] : this.session.groups,\n      user_username: user.username || '',\n      user_firstname: user.firstName || '',\n      user_lastname: user.lastName || '',\n      user_language: user.language || '',\n      user_company_name: user.company || '',\n      user_tenant: user._tenant ? user._tenant.name : null,\n      user_role: user.role || '',\n      user_roles: this.session.roles || [],\n      user_environment: this.config.serverName.toUpperCase()\n    };\n    try {\n      let router: Router;\n      router = this.injector.get(Router);\n      props = merge(props, { page: router.url });\n    } catch (err) {}\n    return props;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Requestor, Config } from '@shared/data-core';\n\nimport { map } from 'rxjs/operators';\n\n@Injectable()\nexport class TwilioToken {\n  constructor(private rq: Requestor, private config: Config) {}\n\n  getToken(): any {\n    return this.rq.get(this.config.apiUrl + 'Twilio/getToken').pipe(\n      map(ret => {\n        return ret.TwilioVideoToken;\n      })\n    );\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Session, User } from '@shared/data-core';\nimport { Log, CoreConfig } from '@shared/common';\nimport { showAlert, closeModal } from '@shared/stencil';\nimport { VxtConferenceConfig, WebRTCConstraints, ScreenShareOptions } from '../../interfaces/voxeet/voxeet.interface';\nimport { Translate } from '@shared/translate';\n\nimport VoxeetSdk from '@voxeet/voxeet-web-sdk';\nimport { Pubnub } from '../pubnub/pubnub.service';\nimport { isFunction } from 'lodash-es';\n\n@Injectable()\nexport class VideoCall {\n  protected isInit: boolean;\n  private voxeet: VoxeetSdk;\n  private voxeetUserId: string;\n  private userInfo: any;\n  private videoModal: HTMLYooIonModalElement;\n  private videoToast: HTMLYooToastElement;\n  private constraints = {\n    audio: true,\n    video: {\n      width: { ideal: 4096 },\n      height: { ideal: 2160 }\n    }\n  };\n  constructor(protected session: Session, protected log: Log, protected coreConfig: CoreConfig, protected pubnub: Pubnub, protected translate: Translate) {}\n\n  useCordova() {\n    return this.coreConfig.isCordova() && window['Voxeet'];\n  }\n\n  init() {\n    if (!this.isInit) {\n      this.isInit = true;\n      this.onInitUserInfo();\n      if (this.useCordova() && window['Voxeet']) {\n        this.onInitCordova();\n      } else {\n        this.onInitWeb();\n      }\n    } else {\n      this.reconnect();\n    }\n    return Promise.resolve();\n  }\n\n  onInitUserInfo(): void {\n    if (this.session && this.session.user) {\n      this.userInfo = this.convertUserInfo(this.session.user);\n    } else {\n      this.userInfo = this.convertUserInfo();\n    }\n  }\n\n  convertUserInfo(\n    user?: User\n  ): {\n    name: string;\n    externalId: string;\n    avatarUrl: string;\n  } {\n    let userId = '';\n    let userName = '';\n    let imageData = '';\n    if (user) {\n      if (user._id) {\n        userId = user._id;\n      }\n      if (User.getDisplayName(user)) {\n        userName = User.getDisplayName(user);\n      }\n      if (user.imageData) {\n        imageData = user.imageData;\n      }\n    }\n    return {\n      name: userName,\n      externalId: userId,\n      avatarUrl: imageData\n    };\n  }\n\n  onInitCordova(): void {\n    this.voxeet = window['Voxeet'];\n    if (this.voxeet) {\n      this.voxeet\n        .initialize(this.coreConfig.getKey('voxeetKey'), this.coreConfig.getKey('voxeetSecret'))\n        .then(myUserId => {\n          this.voxeetUserId = myUserId;\n          this.log.log('voxeet is init for cordova:', this.voxeetUserId);\n          this.voxeet.appearMaximized(true);\n        })\n        .then(() => {\n          this.log.log('appearMaximized');\n          this.voxeet.defaultBuiltInSpeaker(true);\n        })\n        .then(() => {\n          this.log.log('defaultBuiltInSpeaker');\n          this.voxeet.defaultVideo(true);\n        })\n        .then(() => {\n          this.log.log('defaultVideo');\n          this.voxeet.connect(this.getUserInfo());\n        })\n        .then(() => {\n          this.log.log('voxeet connected');\n        });\n    }\n  }\n\n  onInitWeb(): void {\n    this.voxeet = new VoxeetSdk();\n    if (this.voxeet) {\n      return this.voxeet\n        .initialize(this.coreConfig.getKey('voxeetKey'), this.coreConfig.getKey('voxeetSecret'), this.getUserInfo())\n        .then(myUserId => {\n          this.voxeetUserId = myUserId;\n          this.log.log('voxeet is init for web:', this.voxeetUserId);\n        })\n        .catch(error => {\n          this.log.error(error);\n        });\n    }\n  }\n\n  getUserInfo(): any {\n    if (this.useCordova()) {\n      return new window['UserInfo'](this.userInfo.externalId, this.userInfo.name, this.userInfo.avatarUrl);\n    } else {\n      return this.userInfo;\n    }\n  }\n\n  createConference(alias: string) {\n    if (this.useCordova()) {\n      return this.voxeet.create({ conferenceAlias: alias, params: { videoCodec: 'H264' } });\n    } else {\n      return this.voxeet.createConference({ alias });\n    }\n  }\n\n  joinConference(conf: any, options?: VxtConferenceConfig) {\n    if (this.useCordova()) {\n      return this.voxeet.join(conf.conferenceId ? conf.conferenceId : conf);\n    } else {\n      return this.voxeet.joinConference(\n        conf.conferenceId ? conf.conferenceId : conf,\n        options || {\n          constraints: { video: true, audio: true },\n          user: {\n            name: User.getDisplayName(this.session.user),\n            externalId: this.session.userId,\n            avatarUrl: this.session.user.imageData\n          },\n          audio3D: true,\n          conference: { params: { videoCodec: 'H264', liveRecording: true } }\n        }\n      );\n    }\n  }\n\n  hasWebCam(): Promise<boolean> {\n    if (window && window.navigator) {\n      let mediaDevices = window.navigator.mediaDevices as any;\n      mediaDevices.getMedia = mediaDevices.getUserMedia || mediaDevices.webkitGetUserMedia || mediaDevices.mozGetUserMedia || mediaDevices.msGetUserMedia;\n      return new Promise<boolean>((resolve, reject) => {\n        mediaDevices.getMedia({ video: true }).then(\n          () => {\n            resolve(true);\n          },\n          () => resolve(false)\n        );\n      });\n    } else {\n      return Promise.resolve(false);\n    }\n  }\n\n  hasMicrophone(): Promise<boolean> {\n    if (window && window.navigator) {\n      let mediaDevices = window.navigator.mediaDevices as any;\n      mediaDevices.getMedia = mediaDevices.getUserMedia || mediaDevices.webkitGetUserMedia || mediaDevices.mozGetUserMedia || mediaDevices.msGetUserMedia;\n      return new Promise<boolean>((resolve, reject) => {\n        mediaDevices.getMedia({ audio: true }).then(\n          () => {\n            resolve(true);\n          },\n          () => resolve(false)\n        );\n      });\n    } else {\n      return Promise.resolve(false);\n    }\n  }\n\n  getConstraint(): { video: any; audio: any } {\n    let constraints: any = this.constraints;\n    let camPromise = this.hasWebCam();\n    let micPromise = this.hasMicrophone();\n    camPromise.then(hasCam => {\n      if (!hasCam) {\n        constraints.video = false;\n      }\n    });\n    micPromise.then(hasMic => {\n      if (!hasMic) {\n        constraints.audio = false;\n      }\n    });\n    return constraints;\n  }\n\n  inviteParticipants(conferenceId: string, externalIds: Array<User>): void {\n    if (this.useCordova()) {\n      return this.voxeet.invite(\n        conferenceId,\n        externalIds.map(user => {\n          let userInfo = this.convertUserInfo(user);\n          return new window['UserInfo'](userInfo.externalId, userInfo.name, userInfo.avatarUrl);\n        })\n      );\n    } else {\n      return this.voxeet.invite(conferenceId, externalIds.map(user => user._id));\n    }\n  }\n\n  leaveConference(leaveRoom: boolean = true) {\n    if (this.useCordova()) {\n      return this.voxeet.leave();\n    } else {\n      return this.voxeet.leaveConference(leaveRoom);\n    }\n  }\n\n  addListener(event: string, handler: Function) {\n    if (!this.useCordova() && event && handler) {\n      this.voxeet.on(event, handler);\n    }\n  }\n\n  removeListener(event: string, handler: Function) {\n    if (!this.useCordova() && event && handler) {\n      this.voxeet.removeListener(event, handler);\n    }\n  }\n\n  removeAllListeners(): Promise<any> {\n    if (this.voxeet && this.voxeet.removeAllListeners) {\n      return this.voxeet.removeAllListeners();\n    }\n    return Promise.resolve();\n  }\n\n  getUserId() {\n    return this.voxeetUserId;\n  }\n\n  startVideo(userId?: string, constraints?: WebRTCConstraints) {\n    if (!this.useCordova()) {\n      return this.voxeet.startVideoForUser(userId || this.getUserId(), constraints || this.constraints);\n    }\n  }\n\n  stopVideo(userId?: string) {\n    if (!this.useCordova()) {\n      return this.voxeet.stopVideoForUser(userId || this.getUserId());\n    }\n  }\n\n  startAudio(userId?: string) {\n    if (!this.useCordova()) {\n      return this.voxeet.startAudioForUser(userId || this.getUserId());\n    }\n  }\n\n  stopAudio(userId?: string) {\n    if (!this.useCordova()) {\n      return this.voxeet.stopAudioForUser(userId || this.getUserId());\n    }\n  }\n\n  muteUser(isMuted: boolean, userId?: string): void {\n    if (!this.useCordova()) {\n      return this.voxeet.muteUser(userId || this.getUserId(), isMuted);\n    }\n  }\n\n  toggleMute(userId?: string) {\n    if (!this.useCordova()) {\n      return this.voxeet.toggleMute(userId || this.getUserId());\n    }\n  }\n\n  setUserPosition(userId: string, x: number, y: number) {\n    if (!this.useCordova()) {\n      return this.voxeet.setUserPosition(userId, x, y);\n    }\n  }\n\n  getCurrentSession() {\n    if (!this.useCordova()) {\n      return this.voxeet;\n    } else {\n      return this.voxeet;\n    }\n  }\n\n  getEnumerateAudioDevices(option?: string): Promise<any> {\n    if (!this.useCordova()) {\n      return this.voxeet.enumerateAudioDevices(option);\n    } else {\n      return Promise.resolve(null);\n    }\n  }\n\n  getEnumerateVideoDevices(): Promise<any> {\n    if (!this.useCordova()) {\n      return this.voxeet.enumerateVideoDevices();\n    } else {\n      return Promise.resolve(null);\n    }\n  }\n\n  selectAudioInput(deviceId: string, constraints?: {}): Promise<any> {\n    return this.voxeet.selectAudioInput(deviceId, constraints);\n  }\n\n  selectAudioOutput(deviceId: string, constraints?: {}): Promise<any> {\n    return this.voxeet.selectAudioOutput(deviceId, constraints);\n  }\n\n  selectVideoInput(deviceId: string, constraints?: {}): Promise<any> {\n    return this.voxeet.selectVideoInput(deviceId, constraints);\n  }\n\n  startVideoForUser(userId: string, constraints?: {}): Promise<any> {\n    return this.voxeet.startVideoForUser(userId, constraints);\n  }\n\n  stopVideoForUser(userId: string, constraints?: {}): Promise<any> {\n    return this.voxeet.stopVideoForUser(userId, constraints);\n  }\n\n  startAudioForUser(userId: string, constraints?: {}): Promise<any> {\n    return this.voxeet.startAudioForUser(userId, constraints);\n  }\n\n  stopAudioForUser(userId: string, constraints?: {}): Promise<any> {\n    return this.voxeet.stopAudioForUser(userId, constraints);\n  }\n\n  startScreenShare(options: Array<ScreenShareOptions>): Promise<any> {\n    return this.voxeet.startScreenShare(options);\n  }\n\n  stopScreenShare(): Promise<any> {\n    return this.voxeet.stopScreenShare();\n  }\n\n  startRecording(): Promise<any> {\n    return this.voxeet.startRecording();\n  }\n\n  stopRecording(): Promise<any> {\n    return this.voxeet.stopRecording();\n  }\n\n  replayRecording(conferenceId: string, offset?: any): Promise<any> {\n    if (conferenceId && this.voxeet && this.voxeet.replayConference) {\n      return this.voxeet.replayConference(conferenceId, offset || 0);\n    } else {\n      return Promise.reject('ConferenceId is not provided');\n    }\n  }\n\n  shareVideo(url: string): Promise<any> {\n    return this.voxeet.videoPresentation.start(url);\n  }\n\n  updateMediaSettings(settings: { microphone: MediaDeviceInfo; video: MediaDeviceInfo }): Array<Promise<any>> {\n    let promises: any = [];\n    let microphone = settings.microphone;\n    let video = settings.video;\n    if (microphone && microphone.deviceId) {\n      promises.push(this.selectAudioInput(microphone.deviceId));\n    }\n    if (video && video.deviceId) {\n      promises.push(this.selectVideoInput(video.deviceId));\n    }\n    if (promises.length < 1) {\n      promises.push(Promise.resolve());\n    }\n    return promises;\n  }\n\n  sendChatMessage(users: Array<User>, roomName: string, conferenceId: string): void {\n    let others = users.filter(user => user._id !== this.session.userId);\n    if (others) {\n      this.inviteParticipants(conferenceId, others);\n      others\n        .map(user => user._id)\n        .forEach(userId => {\n          this.pubnub.sendChatMessage(userId, this.translate.get('VIDEOCALLCALLING', { user: User.getDisplayName(this.session.user) }), userId, null, null, null, 'videocall', { conferenceId, user: this.session.user, users });\n        });\n    }\n  }\n\n  disconnect(): void {\n    if (this.voxeet && isFunction(this.voxeet.disconnect)) {\n      this.isInit = false;\n      this.voxeet.disconnect().then(() => {\n        this.log.log('voxeet disconnected');\n      });\n    }\n  }\n\n  reconnect(): void {\n    if (this.useCordova()) {\n      this.voxeet.connect(this.getUserInfo());\n    }\n  }\n\n  sendRecordedConferenceId(currentMessage: string, channel) {\n    if (currentMessage && channel && channel.others && channel.others[0] && channel.others[0]._id) {\n      this.pubnub.sendChatMessage(channel.channel, currentMessage, channel.others[0]._id, null, <any>channel, {}, 'conference');\n    }\n  }\n\n  showNoWebCamAlert(): void {\n    showAlert(this.translate.get('NOWEBCAM'), [this.translate.get('OK')], null, '');\n  }\n\n  showFailedConnectAlert(): void {\n    showAlert(this.translate.get('CONFERENCEFAILED'), [this.translate.get('OK')], null, '');\n  }\n\n  showCallerLeftAlert(): Promise<any> {\n    return showAlert('', [this.translate.get('OK')], '', this.translate.get('CALLERLEFT'));\n  }\n\n  showRecieverLeft(): Promise<any> {\n    return showAlert('', [this.translate.get('OK')], '', this.translate.get('RECIEVERLEFT'));\n  }\n\n  showRecordCompleteAlert(): Promise<any> {\n    return showAlert('', [this.translate.get('OK')], '', this.translate.get('CALLRECORDED'));\n  }\n\n  setVideoToast(toast: HTMLYooToastElement): void {\n    this.videoToast = toast;\n  }\n\n  setVideoModal(modal: HTMLYooIonModalElement): void {\n    this.videoModal = modal;\n  }\n\n  closeVideoModal(): void {\n    if (this.videoModal) {\n      closeModal(this.videoModal);\n      this.videoModal = null;\n    }\n  }\n\n  dismissVideoToast(): void {\n    if (this.videoToast) {\n      this.videoToast.dismiss();\n      this.videoToast = null;\n    }\n  }\n\n  onSendDeclineMessage(data: any): void {\n    if (data && data.options && data.sender_id) {\n      this.pubnub.sendChatMessage(data.sender_id, this.translate.get('VIDEOCALLCANCEL', { user: User.getDisplayName(this.session.user) }), this.session.user._id, null, null, null, 'videocallcancel', { declineCall: true });\n    }\n  }\n\n  onSendCancelNotificationMessage(users: Array<User>, conferenceId: string): void {\n    let others = users.filter(user => user._id !== this.session.userId);\n    if (others) {\n      others\n        .map(user => user._id)\n        .forEach(userId => {\n          this.pubnub.sendChatMessage(userId, this.translate.get('VIDEOCALLCANCEL', { user: User.getDisplayName(this.session.user) }), userId, null, null, null, 'videocallcancel', { cancelCall: true });\n        });\n    }\n  }\n\n  onReceiveDeclineMessage(data: any) {\n    if (data && data.options && data.sender_id && this.session.user._id) {\n      if (data.options.declineCall && data.sender_id !== this.session.user._id) {\n        showAlert('', [this.translate.get('OK')], '', this.translate.get('USERDECLINECALL')).then(res => {\n          this.closeVideoModal();\n        });\n      } else if (data.options.cancelCall) {\n        this.dismissVideoToast();\n      }\n    }\n  }\n}\n","import { Injectable, NgZone, ErrorHandler } from '@angular/core';\nimport { Log, CoreConfig } from '@shared/common';\nimport { Config } from '@shared/data-core';\nimport { Track } from '../track/track.service';\n\nimport * as Sentry from '@sentry/browser';\n\n@Injectable()\nexport class SentryErrorHandler implements ErrorHandler {\n  public static disabledErrorMessages: Array<string> = [\"Cannot read property 'disconnect' of null\", 'PubNub call failed', 'PubNub call failed, check status for details', \"InvalidStateError: Failed to execute 'transaction'\", 'Loading chunk', \"You provided 'undefined' where a stream was expected\", \"Cannot read property 'value' of undefined\", 'Uncaught (in promise): OK', 'Uncaught (in promise): Error: Timeout', 'NS_ERROR_NOT_INITIALIZED', 'Error: No available storage method found'];\n\n  constructor(private log: Log, private zone: NgZone, private trackService: Track, protected coreConfig: CoreConfig, protected config: Config) {\n    if (this.isEnabled()) {\n      try {\n        let currentEnv = this.config.getCurrentConfig().initialSelection;\n        this.zone.runOutsideAngular(() => {\n          let options = {\n            dsn: this.coreConfig.getKey('sentryClientKey'),\n            release: this.coreConfig.getAppVersion(),\n            environment: (currentEnv ? currentEnv._id : '') || 'prod'\n          };\n          Sentry.init(options);\n        });\n      } catch (err) {\n        this.log.error(err);\n      }\n    }\n  }\n\n  isEnabled() {\n    return this.coreConfig.getMode() === 'prod' && this.coreConfig.getKey('sentryClientKey') && this.coreConfig.getKey('sentryClientKey').length > 0; //\n  }\n\n  handleError(err: any): void {\n    let disabled = false;\n    SentryErrorHandler.disabledErrorMessages.forEach(m => {\n      if (err && err.message && err.message.indexOf(m) >= 0) {\n        disabled = true;\n      }\n    });\n    if (disabled) {\n      return;\n    }\n    if (err && this.isEnabled()) {\n      try {\n        Sentry.captureException(err.originalError || err);\n      } catch (e) {}\n      //this.trackService.sendLogRocketError(err.originalError || err);\n      //this.trackService.sendSessionStackError(err.originalError || err);\n      this.trackService.track('App Crash', { error: err.originalError || err });\n      this.log.error(err.originalError || err);\n    } else if (err && this.coreConfig.getMode() === 'dev') {\n      this.log.error(err);\n    }\n  }\n\n  identify(id, email, username) {\n    if (this.isEnabled() && id) {\n      try {\n        this.trackService.getSessionStackSession().then(session_id => {\n          Sentry.configureScope(scope => {\n            scope.setUser({ email, username, id });\n            scope.addEventProcessor(async event => {\n              event.contexts = event.contexts || {};\n              event.contexts.sessionstack = {\n                session_id: session_id,\n                timestamp: new Date().getTime()\n              };\n              event.extra = event.extra || {};\n              //event.extra.sessionstackUrl = this.trackService.getSessionStackUrl() + session_id;\n              if (window && window['FS'] && window['FS'].getCurrentSessionURL) {\n                event.extra.fullstoryUrl = window['FS'].getCurrentSessionURL();\n              }\n              return event;\n            });\n          });\n        });\n      } catch (e) {}\n    }\n  }\n}\n","import { NgModule, ModuleWithProviders, Provider } from '@angular/core';\n\nimport { DataCoreModule } from '@shared/data-core';\n//import { DATA_LIVE_PROVIDERS } from './services';\nimport { Channel } from './services/channel/channel.service';\nimport { Intercom } from './services/intercom/intercom.service';\nimport { WebIntercom } from './services/intercom/web-intercom.service';\nimport { Messages } from './services/messages/messages.service';\nimport { Pubnub } from './services/pubnub/pubnub.service';\nimport { Track } from './services/track/track.service';\nimport { TwilioToken } from './services/twilio-token/twilio-token.service';\nimport { VideoCall } from './services/video-call/video-call.service';\nimport { SentryErrorHandler } from './services/sentry-error-handler/sentry-error-handler.service';\n\nimport { Intercom as IntercomNative } from '@ionic-native/intercom/ngx';\n\n@NgModule({\n  declarations: [],\n  imports: [DataCoreModule],\n  exports: [DataCoreModule]\n})\nexport class DataLiveModule {\n  static forRoot(configuredProviders: Array<Provider> = []): ModuleWithProviders {\n    return {\n      ngModule: DataLiveModule,\n      providers: [...configuredProviders, Channel, Intercom, IntercomNative, Messages, Pubnub, SentryErrorHandler, Track, TwilioToken, VideoCall, WebIntercom]\n    };\n  }\n}\n","import { Entity, IAcl, User, Model, Editable, Searchable, FORM_FILES_IMAGE_FILTER, getGroupsTransform } from '@shared/data-core';\nimport { FormFieldType } from '@shared/stencil';\n\n@Model({\n  className: 'Channels',\n  collectionName: 'channels',\n  fields: ['*'],\n  include: ['users']\n})\nexport class Channels extends Entity {\n  // export class Channels implements IEntity {\n  _id: string;\n  _acl: IAcl;\n  _lmt?: string;\n  _ect?: string;\n\n  channel: string;\n\n  @Editable('Channels', { required: true, type: FormFieldType.text })\n  @Searchable('Channels')\n  name: string;\n\n  @Editable('Channels', {\n    type: FormFieldType.autocomplete,\n    filters: FORM_FILES_IMAGE_FILTER,\n    forceModal: true,\n    hiddenFields: ['mimeType'],\n    mode: 'tile',\n    pageSize: 20,\n    fixedPosition: true,\n    collectionName: 'files',\n    title: 'BACKGROUND',\n    required: false,\n    columnDefinition: { name: '_downloadURL' }\n  })\n  background: any;\n\n  @Editable('Channels', {\n    title: 'GROUPS',\n    flex: 100,\n    required: true,\n    type: FormFieldType.autocomplete,\n    collectionName: 'groups',\n    filters: [[{ field: 'isRole', operator: { _id: 'neq' }, value: true }, { field: 'type', operator: { _id: 'nin' }, value: ['plan'] }]],\n    hiddenFields: ['isRole', 'type'],\n    idOnly: true,\n    mapTransform: getGroupsTransform,\n    multiple: true,\n    clearable: false\n  })\n  group: string;\n\n  @Editable('Channels', {\n    type: FormFieldType.autocomplete,\n    required: true,\n    collectionName: 'user',\n    clearable: true,\n    multiple: true,\n    columnDefinition: { name: 'username' }\n  })\n  users: Array<User>;\n\n  others: Array<User>;\n\n  lastMessage: any;\n  lastMessageAlternate: boolean;\n  lastMessageDate?: any;\n\n  deleteMessages: Array<any>;\n}\n","import { MessageInterface } from './message.interface';\nimport { Entity, IAcl, Model, Editable, Searchable } from '@shared/data-core';\nimport { FormFieldType } from '@shared/stencil';\n\n@Model({\n  className: 'Message',\n  collectionName: 'messages',\n  fields: ['*', 'from.imageData', 'from.username', 'from.email'],\n  include: ['from']\n})\nexport class Message extends Entity implements MessageInterface {\n  _id?: string;\n  _acl?: IAcl;\n  _lmt?: string;\n  _ect?: string;\n\n  @Editable('Message', {\n    title: 'TO',\n    type: FormFieldType.emailreport,\n    required: true,\n    showUsers: true\n  })\n  @Searchable('Message')\n  to: Array<string>;\n\n  @Editable('Message', { title: 'SUBJECT', required: true, type: FormFieldType.text })\n  @Searchable('Message')\n  title: string;\n\n  @Editable('Message', { title: 'BODY', required: true, type: FormFieldType.textarea })\n  body: string;\n\n  // @Editable('Message', { title: 'FOOTER', type: FormFieldType.textarea })\n  // footer: string;\n\n  actionURL: string;\n  actionText: string;\n\n  @Editable('Message', { title: 'THANKYOU', type: FormFieldType.text })\n  thankyou: string;\n}\n"],"names":["tslib_1.__extends","tslib_1.__decorate","Editable","FormFieldType","Model","Entity","translate","Subject","Subscription","includes","of","from","map","merge","filter","isObject","pick","Observable","forEach","User","each","Injectable","Authentication","Session","Translate","Log","Push","CoreConfig","Channel","Users","uniqBy","forkJoin","orderBy","Broker","isPlatformBrowser","ViewEncapsulation","Inject","PLATFORM_ID","RendererFactory2","DOCUMENT","unix","toDate","Config","IntercomNative","Requestor","Colors","router","Router","Network","LocalStorage","Injector","isFunction","showAlert","closeModal","Sentry.init","Sentry.captureException","Sentry.configureScope","NgZone","NgModule","DataCoreModule","Searchable","FORM_FILES_IMAGE_FILTER","getGroupsTransform"],"mappings":";;;;;;;;;IAAA;;;;;;;;;;;;;;IAcA;IAEA,IAAI,aAAa,GAAG,UAAS,CAAC,EAAE,CAAC;QAC7B,aAAa,GAAG,MAAM,CAAC,cAAc;aAChC,EAAE,SAAS,EAAE,EAAE,EAAE,YAAY,KAAK,IAAI,UAAU,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,SAAS,GAAG,CAAC,CAAC,EAAE,CAAC;YAC5E,UAAU,CAAC,EAAE,CAAC,IAAI,KAAK,IAAI,CAAC,IAAI,CAAC;gBAAE,IAAI,CAAC,CAAC,cAAc,CAAC,CAAC,CAAC;oBAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;QAC/E,OAAO,aAAa,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IAC/B,CAAC,CAAC;AAEF,aAAgB,SAAS,CAAC,CAAC,EAAE,CAAC;QAC1B,aAAa,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;QACpB,SAAS,EAAE,KAAK,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC,EAAE;QACvC,CAAC,CAAC,SAAS,GAAG,CAAC,KAAK,IAAI,GAAG,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,SAAS,GAAG,CAAC,CAAC,SAAS,EAAE,IAAI,EAAE,EAAE,CAAC,CAAC;IACzF,CAAC;AAED,IAAO,IAAI,QAAQ,GAAG;QAClB,QAAQ,GAAG,MAAM,CAAC,MAAM,IAAI,SAAS,QAAQ,CAAC,CAAC;YAC3C,KAAK,IAAI,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,SAAS,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE;gBACjD,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;gBACjB,KAAK,IAAI,CAAC,IAAI,CAAC;oBAAE,IAAI,MAAM,CAAC,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC;wBAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;aAChF;YACD,OAAO,CAAC,CAAC;SACZ,CAAA;QACD,OAAO,QAAQ,CAAC,KAAK,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;IAC3C,CAAC,CAAA;AAED,aAAgB,MAAM,CAAC,CAAC,EAAE,CAAC;QACvB,IAAI,CAAC,GAAG,EAAE,CAAC;QACX,KAAK,IAAI,CAAC,IAAI,CAAC;YAAE,IAAI,MAAM,CAAC,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,CAAC;gBAC/E,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;QAChB,IAAI,CAAC,IAAI,IAAI,IAAI,OAAO,MAAM,CAAC,qBAAqB,KAAK,UAAU;YAC/D,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,CAAC,qBAAqB,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,CAAC,EAAE;gBAAE,IAAI,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC;oBAC3F,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAC1B,OAAO,CAAC,CAAC;IACb,CAAC;AAED,aAAgB,UAAU,CAAC,UAAU,EAAE,MAAM,EAAE,GAAG,EAAE,IAAI;QACpD,IAAI,CAAC,GAAG,SAAS,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,MAAM,GAAG,IAAI,KAAK,IAAI,GAAG,IAAI,GAAG,MAAM,CAAC,wBAAwB,CAAC,MAAM,EAAE,GAAG,CAAC,GAAG,IAAI,EAAE,CAAC,CAAC;QAC7H,IAAI,OAAO,OAAO,KAAK,QAAQ,IAAI,OAAO,OAAO,CAAC,QAAQ,KAAK,UAAU;YAAE,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,UAAU,EAAE,MAAM,EAAE,GAAG,EAAE,IAAI,CAAC,CAAC;;YAC1H,KAAK,IAAI,CAAC,GAAG,UAAU,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE;gBAAE,IAAI,CAAC,GAAG,UAAU,CAAC,CAAC,CAAC;oBAAE,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,GAAG,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,GAAG,CAAC,KAAK,CAAC,CAAC;QAClJ,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,MAAM,CAAC,cAAc,CAAC,MAAM,EAAE,GAAG,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;IAClE,CAAC;AAED,aAIgB,UAAU,CAAC,WAAW,EAAE,aAAa;QACjD,IAAI,OAAO,OAAO,KAAK,QAAQ,IAAI,OAAO,OAAO,CAAC,QAAQ,KAAK,UAAU;YAAE,OAAO,OAAO,CAAC,QAAQ,CAAC,WAAW,EAAE,aAAa,CAAC,CAAC;IACnI,CAAC;AAED,aAAgB,SAAS,CAAC,OAAO,EAAE,UAAU,EAAE,CAAC,EAAE,SAAS;QACvD,OAAO,KAAK,CAAC,KAAK,CAAC,GAAG,OAAO,CAAC,EAAE,UAAU,OAAO,EAAE,MAAM;YACrD,SAAS,SAAS,CAAC,KAAK,IAAI,IAAI;gBAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;aAAE;YAAC,OAAO,CAAC,EAAE;gBAAE,MAAM,CAAC,CAAC,CAAC,CAAC;aAAE,EAAE;YAC3F,SAAS,QAAQ,CAAC,KAAK,IAAI,IAAI;gBAAE,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;aAAE;YAAC,OAAO,CAAC,EAAE;gBAAE,MAAM,CAAC,CAAC,CAAC,CAAC;aAAE,EAAE;YAC9F,SAAS,IAAI,CAAC,MAAM,IAAI,MAAM,CAAC,IAAI,GAAG,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC,CAAC,UAAU,OAAO,IAAI,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,SAAS,EAAE,QAAQ,CAAC,CAAC,EAAE;YAC/I,IAAI,CAAC,CAAC,SAAS,GAAG,SAAS,CAAC,KAAK,CAAC,OAAO,EAAE,UAAU,IAAI,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,CAAC;SACzE,CAAC,CAAC;IACP,CAAC;AAED,aAAgB,WAAW,CAAC,OAAO,EAAE,IAAI;QACrC,IAAI,CAAC,GAAG,EAAE,KAAK,EAAE,CAAC,EAAE,IAAI,EAAE,cAAa,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC;gBAAE,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;QACjH,OAAO,CAAC,GAAG,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC,CAAC,EAAE,OAAO,EAAE,IAAI,CAAC,CAAC,CAAC,EAAE,QAAQ,EAAE,IAAI,CAAC,CAAC,CAAC,EAAE,EAAE,OAAO,MAAM,KAAK,UAAU,KAAK,CAAC,CAAC,MAAM,CAAC,QAAQ,CAAC,GAAG,cAAa,OAAO,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;QACzJ,SAAS,IAAI,CAAC,CAAC,IAAI,OAAO,UAAU,CAAC,IAAI,OAAO,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE;QAClE,SAAS,IAAI,CAAC,EAAE;YACZ,IAAI,CAAC;gBAAE,MAAM,IAAI,SAAS,CAAC,iCAAiC,CAAC,CAAC;YAC9D,OAAO,CAAC;gBAAE,IAAI;oBACV,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,KAAK,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,QAAQ,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,IAAI;wBAAE,OAAO,CAAC,CAAC;oBAC7J,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC;wBAAE,EAAE,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC;oBACxC,QAAQ,EAAE,CAAC,CAAC,CAAC;wBACT,KAAK,CAAC,CAAC;wBAAC,KAAK,CAAC;4BAAE,CAAC,GAAG,EAAE,CAAC;4BAAC,MAAM;wBAC9B,KAAK,CAAC;4BAAE,CAAC,CAAC,KAAK,EAAE,CAAC;4BAAC,OAAO,EAAE,KAAK,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC;wBACxD,KAAK,CAAC;4BAAE,CAAC,CAAC,KAAK,EAAE,CAAC;4BAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC;4BAAC,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC;4BAAC,SAAS;wBACjD,KAAK,CAAC;4BAAE,EAAE,GAAG,CAAC,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC;4BAAC,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC;4BAAC,SAAS;wBACjD;4BACI,IAAI,EAAE,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,CAAC,GAAG,CAAC,CAAC,MAAM,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE;gCAAE,CAAC,GAAG,CAAC,CAAC;gCAAC,SAAS;6BAAE;4BAC5G,IAAI,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;gCAAE,CAAC,CAAC,KAAK,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC;gCAAC,MAAM;6BAAE;4BACtF,IAAI,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE;gCAAE,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;gCAAC,CAAC,GAAG,EAAE,CAAC;gCAAC,MAAM;6BAAE;4BACrE,IAAI,CAAC,IAAI,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE;gCAAE,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;gCAAC,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;gCAAC,MAAM;6BAAE;4BACnE,IAAI,CAAC,CAAC,CAAC,CAAC;gCAAE,CAAC,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC;4BACtB,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC;4BAAC,SAAS;qBAC9B;oBACD,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC;iBAC9B;gBAAC,OAAO,CAAC,EAAE;oBAAE,EAAE,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;oBAAC,CAAC,GAAG,CAAC,CAAC;iBAAE;wBAAS;oBAAE,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;iBAAE;YAC1D,IAAI,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC;gBAAE,MAAM,EAAE,CAAC,CAAC,CAAC,CAAC;YAAC,OAAO,EAAE,KAAK,EAAE,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC;SACpF;IACL,CAAC;AAED,aAegB,MAAM,CAAC,CAAC,EAAE,CAAC;QACvB,IAAI,CAAC,GAAG,OAAO,MAAM,KAAK,UAAU,IAAI,CAAC,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;QAC3D,IAAI,CAAC,CAAC;YAAE,OAAO,CAAC,CAAC;QACjB,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,CAAC,CAAC;QACjC,IAAI;YACA,OAAO,CAAC,CAAC,KAAK,KAAK,CAAC,IAAI,CAAC,EAAE,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,EAAE,IAAI;gBAAE,EAAE,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;SAC9E;QACD,OAAO,KAAK,EAAE;YAAE,CAAC,GAAG,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC;SAAE;gBAC/B;YACJ,IAAI;gBACA,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,KAAK,CAAC,GAAG,CAAC,CAAC,QAAQ,CAAC,CAAC;oBAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;aACpD;oBACO;gBAAE,IAAI,CAAC;oBAAE,MAAM,CAAC,CAAC,KAAK,CAAC;aAAE;SACpC;QACD,OAAO,EAAE,CAAC;IACd,CAAC;AAED,aAAgB,QAAQ;QACpB,KAAK,IAAI,EAAE,GAAG,EAAE,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,SAAS,CAAC,MAAM,EAAE,CAAC,EAAE;YAC9C,EAAE,GAAG,EAAE,CAAC,MAAM,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACzC,OAAO,EAAE,CAAC;IACd,CAAC;;;;;;;QChI4BA,2BAAM;;;SA4BlC;QATCC;YAPCC,iBAAQ,CAAC,SAAS,EAAE;gBACnB,IAAI,EAAEC,qBAAa,CAAC,YAAY;gBAChC,cAAc,EAAE,MAAM;gBACtB,QAAQ,EAAE,IAAI;gBACd,QAAQ,EAAE,EAAE,KAAK,EAAE,UAAU,EAAE,MAAM,EAAE,KAAK,EAAE,cAAc,EAAE,MAAM,EAAE;gBACtE,gBAAgB,EAAE,EAAE,KAAK,EAAE,UAAU,EAAE,MAAM,EAAE,KAAK,EAAE,cAAc,EAAE,MAAM,EAAE;aAC/E,CAAC;sCACK,KAAK;8CAAO;QAnBR,OAAO;YAPnBC,cAAK,CAAC;gBACL,SAAS,EAAE,SAAS;gBACpB,cAAc,EAAE,SAAS;gBACzB,MAAM,EAAE,IAAI;gBACZ,OAAO,EAAE,CAAC,OAAO,CAAC;gBAClB,cAAc,EAAE,EAAE,cAAc,EAAE,MAAM,EAAE,KAAK,EAAE,UAAU,EAAE,MAAM,EAAE,KAAK,EAAE;aAC7E,CAAC;WACW,OAAO,CA4BnB;QAAD,cAAC;KAAA,CA5B4BC,eAAM;;;;;;ACVnC;AAmBA;;;QAME,sBAAY,EAAE,EAAE,QAAQ,EAAE,KAAK,EAAE,QAAmB;YAAnB,yBAAA;gBAAA,mBAAmB;;YAClD,IAAI,CAAC,EAAE,GAAG,EAAE,CAAC;YACb,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;YACzB,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;YACnB,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;SAC1B;QACH,mBAAC;IAAD,CAAC,IAAA;;QA4BC,gBAAoB,cAA8B,EAAU,OAAgB,EAAUC,YAAoB,EAAU,GAAQ,EAAY,IAAU,EAAU,UAAsB;YAA9J,mBAAc,GAAd,cAAc,CAAgB;YAAU,YAAO,GAAP,OAAO,CAAS;YAAU,cAAS,GAATA,YAAS,CAAW;YAAU,QAAG,GAAH,GAAG,CAAK;YAAY,SAAI,GAAJ,IAAI,CAAM;YAAU,eAAU,GAAV,UAAU,CAAY;YArBxK,gBAAW,GAAG,IAAI,GAAG,EAAe,CAAC;YAEvC,eAAU,GAAG,0BAA0B,CAAC;YACxC,iBAAY,GAAG,eAAe,CAAC;YAC/B,mBAAc,GAAG,UAAU,CAAC;YAC5B,iBAAY,GAAG,QAAQ,CAAC;YACxB,cAAS,GAMb,EAAE,CAAC;YACC,qBAAgB,GAAG,IAAIC,YAAO,EAAiB,CAAC;YAChD,oBAAe,GAAG,IAAIA,YAAO,EAAgB,CAAC;YAC9C,mBAAc,GAAG,IAAIA,YAAO,EAAe,CAAC;YAE5C,wBAAmB,GAAG,IAAIC,iBAAY,EAAE,CAAC;SAIqI;QAEtL,sBAAI,6BAAS;;;gBAAb;gBACE,OAAO,IAAI,CAAC,UAAU,CAAC;aACxB;;;WAAA;;;;;;QAED,4BAAW;;;;;YAAX,UAAY,QAAkB,EAAE,KAAmB;gBACjD,OAAO,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,EAAE,IAAI,EAAE,IAAI,CAAC,MAAM,CAAC,EAAE,EAAE,QAAQ,UAAA,EAAE,KAAK,OAAA,EAAE,CAAC,CAAC,IAAI;;;mBAAC,UAAA,CAAC,IAAI,OAAA,CAAC,CAAC,KAAK,GAAA,EAAC,CAAC;aAC3F;;;;;;QAED,4BAAW;;;;;YAAX,UAAY,OAAe,EAAE,QAAiB;gBAC5C,OAAO,IAAI,CAAC,WAAW,CAAC,CAAC,OAAO,CAAC,EAAE,EAAE,QAAQ,EAAE,QAAQ,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAC;aACvE;;;;;QAED,yBAAQ;;;;YAAR,UAAS,MAAc;gBACrB,OAAO,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;aACrC;;;;;;QAED,0BAAS;;;;;YAAT,UAAU,MAAc,EAAE,OAA2B;gBAA3B,wBAAA;oBAAA,UAAU,IAAI,CAAC,YAAY;;gBACnD,OAAO,IAAI,CAAC,MAAM;qBACf,QAAQ,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;qBAC1B,IAAI;;;eAAC,UAAA,GAAG;oBACP,OAAOC,iBAAQ,CAAC,GAAG,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC;iBACxC,EAAC;qBACD,KAAK;;;eAAC,UAAA,GAAG;;oBAER,OAAO,KAAK,CAAC;iBACd,EAAC,CAAC;aACN;;;;;;QAED,6BAAY;;;;;YAAZ,UAAa,OAAe,EAAE,OAAe;gBAC3C,OAAO,OAAO,GAAG,OAAO,GAAG,OAAO,GAAG,GAAG,GAAG,OAAO,GAAG,OAAO,GAAG,GAAG,GAAG,OAAO,CAAC;aAC9E;;;;;QAED,oCAAmB;;;;YAAnB,UAAoB,MAAc;gBAChC,OAAO,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,SAAS,GAAG,GAAG,GAAG,MAAM,CAAC;aAC5D;;;;;QAED,iCAAgB;;;;YAAhB,UAAiB,OAAO;gBACtB,OAAO,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;aAClD;;;;;QAED,oCAAmB;;;;YAAnB,UAAoB,OAAO;gBACzB,OAAO,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,cAAc,EAAE,EAAE,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,UAAU,GAAG,GAAG,EAAE,EAAE,CAAC,CAAC;aACpF;;;;;QAED,kCAAiB;;;;YAAjB,UAAkB,SAAS;gBACzB,OAAO,IAAI,CAAC,YAAY,GAAG,SAAS,CAAC;aACtC;;;;;QAED,+BAAc;;;;YAAd,UAAe,OAAO;gBACpB,OAAO,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;aACjD;;;;;QAED,kCAAiB;;;;YAAjB,UAAkB,OAAO;gBACvB,OAAO,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,YAAY,EAAE,EAAE,CAAC,CAAC;aAC/C;;;;;;;QAED,2BAAU;;;;;;YAAV,UAAW,OAAe,EAAE,KAAU,EAAE,KAAc;gBAA1B,sBAAA;oBAAA,UAAU;;gBACpC,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE;oBAChB,OAAOC,OAAE,oBAAM,EAAE,GAAC,CAAC;iBACpB;gBACD,OAAOC,SAAI,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,KAAK,EAAE,KAAK,EAAE,OAAO,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC,IAAI,CACrGC,aAAG;;;mBACD,UAAC,EAA0C;wBAAxC,sBAAQ,EAAE,kCAAc,EAAE,8BAAY;oBACvC,OAAO,CAAC,QAAQ,CAAC,GAAG;;;+BAAC,UAAA,IAAI,IAAI,OAAAC,cAAK,CAAC,IAAI,CAAC,KAAK,EAAE,EAAE,SAAS,EAAE,IAAI,CAAC,SAAS,EAAE,CAAC,GAAA,EAAC,EAAE,cAAc,EAAE,YAAY,CAAC,CAAC;iBAC/G,EACF,CACF,CAAC;aACH;;;;;;QAED,+BAAc;;;;;YAAd,UAAe,OAAe,EAAE,UAAyB;gBAAzD,iBAKC;;oBAJK,QAAQ,GAAG,UAAU,CAAC,GAAG;;;mBAAC,UAAA,SAAS,IAAI,OAAA,KAAI,CAAC,MAAM,CAAC,cAAc,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,KAAK,EAAE,MAAM,CAAC,IAAI,GAAG,CAAC,SAAS,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,EAAE,GAAG,EAAE,MAAM,CAAC,IAAI,GAAG,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,GAAA,EAAC;gBACjL,OAAO,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,IAAI;;;mBAAC,UAAC,GAAQ;oBACzC,OAAO,GAAG,CAAC;iBACZ,EAAC,CAAC;aACJ;;;;;QAED,iCAAgB;;;;YAAhB,UAAiB,OAAe;gBAC9B,IAAI,OAAO,IAAI,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,IAAI,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,MAAM,EAAE;oBACxE,OAAO,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,MAAM,CAAC;iBACvC;qBAAM;oBACL,OAAO,IAAI,CAAC;iBACb;aACF;;;;;;QAED,kCAAiB;;;;;YAAjB,UAAkB,OAAe,EAAE,MAAoB;gBAAvD,iBAoBC;;oBAnBK,MAAM,GAAG,IAAIN,YAAO,EAAqB;;oBACzC,kBAAkB,GAAG,IAAI,CAAC,gBAAgB;qBAC3C,IAAI,CACHO,gBAAM;;;eAAC,UAAA,CAAC,IAAI,OAAA,CAAC,CAAC,OAAO,KAAK,OAAO,IAAI,CAAC,CAAC,IAAI,KAAK,KAAI,CAAC,MAAM,CAAC,EAAE,GAAA,EAAC,EAC/DF,aAAG;;;mBAAC,UAAC,EAAuB;wBAArB,cAAI,EAAE,kBAAM,EAAE,gBAAK;oBACxB,QAAQ,MAAM;wBACZ,KAAK,OAAO,CAAC;wBACb,KAAK,SAAS;4BACZ,OAAO,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;wBACvB,KAAK,MAAM,CAAC;wBACZ,KAAK,cAAc;4BACjB,OAAO,CAAC,IAAI,EAAEG,iBAAQ,CAAC,KAAK,CAAC,IAAI,KAAK,CAAC,QAAQ,KAAK,MAAM,CAAC,CAAC;qBAC/D;iBACF,EAAC,CACH;qBACA,SAAS,CAAC,MAAM,CAAC;gBACpB,MAAM,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;gBACnB,MAAM,CAAC,GAAG,CAAC,kBAAkB,CAAC,CAAC;gBAC/B,OAAO,MAAM,CAAC;aACf;;;;;;;QAED,qBAAI;;;;;;YAAJ,UAAK,OAAe,EAAE,YAAoB,EAAE,UAAkB;gBAAxC,6BAAA;oBAAA,oBAAoB;;gBAAE,2BAAA;oBAAA,kBAAkB;;gBAC5D,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,IAAI,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,YAAY,CAAC,MAAM,EAAE;;wBACvE,QAAQ,GAAG,IAAIR,YAAO,EAAW;oBACrC,IAAI,IAAI,CAAC,eAAe,EAAE;;4BACpB,YAAY,GAAG,IAAI,CAAC,eAAe;6BACpC,IAAI,CACHO,gBAAM;;;uBAAC,UAAA,CAAC,IAAI,OAAA,CAAC,CAAC,OAAO,KAAK,OAAO,GAAA,EAAC,EAClCF,aAAG;;;2BAAC,UAAA,CAAC,IAAI,OAAAC,cAAK,CAAC,CAAC,CAAC,OAAO,EAAE,EAAE,SAAS,EAAE,CAAC,CAAC,SAAS,EAAE,CAAC,GAAA,EAAC,CACvD;6BACA,SAAS,CAAC,QAAQ,CAAC;wBACtB,YAAY,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;;4BACvB,MAAM,SAAA;wBACV,IAAI,UAAU,EAAE;4BACd,MAAM,GAAG,IAAI,CAAC,iBAAiB,CAAC,OAAO,EAAE,YAAY,CAAC,CAAC;yBACxD;wBACD,IAAI,CAAC,mBAAmB,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;wBAC3C,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,GAAG,EAAE,QAAQ,UAAA,EAAE,YAAY,cAAA,EAAE,MAAM,QAAA,EAAE,CAAC;qBAC9D;oBACD,IAAI,IAAI,CAAC,MAAM,EAAE;wBACf,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,CAAC,OAAO,CAAC,EAAE,YAAY,EAAE,YAAY,IAAI,UAAU,EAAE,CAAC,CAAC;qBAC1F;iBACF;gBACD,IAAI,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,IAAI,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,QAAQ,EAAE;oBACjF,OAAO,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,QAAQ,CAAC;iBACzC;qBAAM;oBACL,OAAO,IAAIN,YAAO,EAAW,CAAC;iBAC/B;aACF;;;;;QAED,sBAAK;;;;YAAL,UAAM,OAAe;gBACnB,IAAI,OAAO,IAAI,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,IAAI,IAAI,CAAC,MAAM,EAAE;oBACrD,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,YAAY,CAAC,WAAW,EAAE,CAAC;oBACnD,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,EAAE,QAAQ,EAAE,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;iBAClD;aACF;;;;;;QAED,wBAAO;;;;;YAAP,UAAQ,OAAe,EAAE,OAAgB;gBACvC,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;aAC7D;;;;;;;;;;;;QAED,gCAAe;;;;;;;;;;;YAAf,UAAgB,OAAe,EAAE,IAAY,EAAE,UAAkB,EAAE,gBAAwB,EAAE,QAAmB,EAAE,KAAW,EAAE,IAAa,EAAE,OAAY;gBAA1J,iBAuEC;gBAvE8H,qBAAA;oBAAA,aAAa;;gBAAE,wBAAA;oBAAA,YAAY;;;oBACpJ,OAAO,GAAG,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC;;oBACtC,SAAS,GAAG,EAAE;gBAClB,IAAI,IAAI,CAAC,OAAO,CAAC,kBAAkB,CAAC,IAAI,CAAC,EAAE;oBACzC,SAAS,IAAI,EAAE,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC;iBACvD;qBAAM;oBACL,SAAS,IAAI,EAAE,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,EAAE,EAAE,CAAC,GAAG,KAAK,CAAC;iBAC9C;;oBACG,OAAO,GAAY;oBACrB,OAAO,EAAE,OAAO;oBAChB,OAAO,EAAE,IAAI;oBACb,IAAI,EAAE,IAAI;oBACV,OAAO,EAAE,OAAO;;oBAEhB,SAAS,EAAE,IAAI,CAAC,MAAM,CAAC,EAAE;oBACzB,eAAe,EAAE,IAAI,CAAC,MAAM,CAAC,QAAQ;oBACrC,YAAY,EAAE,IAAI,CAAC,MAAM,CAAC,KAAK;oBAC/B,WAAW,EAAE,UAAU;oBACvB,iBAAiB,EAAE,gBAAgB;oBACnC,OAAO,EAAE,OAAO;oBAChB,SAAS,EAAE,CAAC,OAAO,GAAG,IAAI,GAAG,QAAQ,CAAC,IAAI;oBAC1C,SAAS,EAAE,IAAI,IAAI,EAAE;oBACrB,KAAK,EAAE,KAAK,sBAAQS,aAAI,CAAC,KAAK,EAAE,CAAC,KAAK,EAAE,OAAO,EAAE,MAAM,EAAE,OAAO,EAAE,OAAO,EAAE,MAAM,EAAE,uBAAuB,EAAE,YAAY,EAAE,gBAAgB,EAAE,SAAS,EAAE,iBAAiB,EAAE,SAAS,CAAC,CAAC,KAAG,IAAI;iBAC7L;;;;;;;oBAOG,QAAQ,GAAG,EAAE;gBACjB,IAAI,CAAC,OAAO,EAAE;oBACZ,QAAQ,GAAG,CAAC,UAAU,CAAC,CAAC;iBACzB;qBAAM;oBACL,QAAQ,GAAG,QAAQ,CAAC,MAAM,CAAC,GAAG;;;uBAAC,UAAA,CAAC,IAAI,OAAA,CAAC,CAAC,GAAG,GAAA,EAAC,CAAC;iBAC5C;gBAED,QAAQ,CAAC,OAAO;;;mBAAC,UAAA,OAAO;;wBAClB,OAAO,GAAG,CAAC,KAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,GAAG,OAAO,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,KAAI,CAAC,SAAS,CAAC,OAAO,EAAE,OAAO,CAAC;oBACjG,OAAO,CAAC,IAAI;;;uBACV,UAAA,OAAO;wBACL,IAAI,CAAC,OAAO,EAAE;4BACZ,IAAI,KAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,EAAE;gCAC1B,KAAI,CAAC,OAAO,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;gCAC/B,KAAI,CAAC,IAAI;qCACN,cAAc,CAAC,OAAO,EAAE;oCACvB,KAAK,EAAE,oBAAoB;oCAC3B,IAAI,EAAE,cAAc;oCACpB,gBAAgB,EAAE,4BAA4B,IAAI,OAAO,GAAG,OAAO,GAAG,SAAS,CAAC;oCAChF,mBAAmB,EAAE;wCACnB,iBAAiB,EAAE,IAAI;qCACxB;iCACF,CAAC;qCACD,SAAS;;+BAAC,eAAQ,EAAC,CAAC;6BACxB;iCAAM;gCACL,KAAI,CAAC,IAAI;qCACN,cAAc,CAAC,OAAO,EAAE;oCACvB,KAAK,EAAE,CAAC,OAAO,GAAG,QAAQ,CAAC,IAAI,GAAG,KAAK,GAAG,EAAE,IAAI,KAAI,CAAC,MAAM,CAAC,QAAQ;oCACpE,IAAI,EAAE,SAAS;oCACf,IAAI,EAAE,cAAc;oCACpB,gBAAgB,EAAE,4BAA4B,IAAI,OAAO,GAAG,OAAO,GAAG,SAAS,CAAC;oCAChF,IAAI,EAAE,OAAO;iCACd,CAAC;qCACD,SAAS;;+BAAC,eAAQ,EAAC,CAAC;6BACxB;yBACF;qBACF;;;uBACD,UAAA,GAAG,KAAM,EACV,CAAC;iBACH,EAAC,CAAC;gBACH,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;aAChC;;;;;QAED,+CAA8B;;;;YAA9B,UAA+B,QAAkB;gBAAjD,iBAMC;gBALC,OAAO,IAAIC,eAAU;;;mBAAU,UAAA,QAAQ;oBACrCC,gBAAO,CAAC,QAAQ;;;uBAAE,UAAC,OAAe;wBAChC,KAAI,CAAC,mBAAmB,CAAC,GAAG,CAAC,KAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,QAAQ,CAAC,SAAS;;;2BAAC,UAAA,CAAC,IAAI,OAAA,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,GAAA,EAAC,CAAC,CAAC;qBACjG,EAAC,CAAC;iBACJ,EAAC,CAAC;aACJ;;;;QAED,4BAAW;;;YAAX;;oBACM,SAAS,GAAY,IAAI;gBAC7B,IAAI;oBACF,IAAI,CAAC,MAAM,EAAE;wBACX,SAAS,GAAG,KAAK,CAAC;qBACnB;iBACF;gBAAC,OAAO,CAAC,EAAE;oBACV,IAAI,CAAC,YAAY,cAAc,EAAE;wBAC/B,SAAS,GAAG,KAAK,CAAC;qBACnB;iBACF;gBACD,OAAO,SAAS,CAAC;aAClB;;;;;QAED,qBAAI;;;;YAAJ,UAAK,IAAU;gBAAf,iBAuGC;;gBArGC,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE,EAAE;oBACvB,OAAO;iBACR;gBAED,IAAI,CAAC,gBAAgB,GAAG,CAAC,IAAI,CAAC,gBAAgB,IAAI,IAAI,CAAC,gBAAgB,CAAC,MAAM,GAAG,IAAIX,YAAO,EAAiB,GAAG,IAAI,CAAC,gBAAgB,CAAC;gBACtI,IAAI,CAAC,eAAe,GAAG,CAAC,IAAI,CAAC,eAAe,IAAI,IAAI,CAAC,eAAe,CAAC,MAAM,GAAG,IAAIA,YAAO,EAAgB,GAAG,IAAI,CAAC,eAAe,CAAC;gBACjI,IAAI,CAAC,cAAc,GAAG,CAAC,IAAI,CAAC,cAAc,IAAI,IAAI,CAAC,cAAc,CAAC,MAAM,GAAG,IAAIA,YAAO,EAAe,GAAG,IAAI,CAAC,cAAc,CAAC;gBAC5H,IAAI,CAAC,mBAAmB,GAAG,CAAC,IAAI,CAAC,mBAAmB,IAAI,IAAI,CAAC,mBAAmB,CAAC,MAAM,GAAG,IAAIC,iBAAY,EAAE,GAAG,IAAI,CAAC,mBAAmB,CAAC;gBAExI,IAAI,CAAC,MAAM,GAAG,IAAI,YAAY,CAAC,IAAI,CAAC,GAAG,EAAEW,aAAI,CAAC,cAAc,CAAC,IAAI,CAAC,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;gBACpF,IAAI,CAAC,MAAM,GAAG,IAAI,MAAM,CAAC;oBACvB,GAAG,EAAE,IAAI;oBACT,SAAS,EAAE,IAAI;oBACf,wBAAwB,EAAE,KAAK;oBAC/B,iBAAiB,EAAE,GAAG;oBACtB,eAAe,EAAE,GAAG;;;oBAGpB,UAAU,EAAE,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,kBAAkB,CAAC;oBACtD,YAAY,EAAE,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,oBAAoB,CAAC;oBAC1D,IAAI,EAAE,IAAI,CAAC,MAAM,CAAC,EAAE;iBACrB,CAAC,CAAC;gBAEH,IAAI,CAAC,mBAAmB,CAAC,GAAG,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;gBACpD,IAAI,CAAC,mBAAmB,CAAC,GAAG,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;gBACnD,IAAI,CAAC,mBAAmB,CAAC,GAAG,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;;gBAElD,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC;oBACtB,QAAQ;;;uBAAE,UAAC,CAAgB;wBACzB,IAAI,KAAI,CAAC,gBAAgB,IAAI,KAAI,CAAC,gBAAgB,CAAC,IAAI,EAAE;4BACvD,KAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;yBAC/B;qBACF,CAAA;oBACD,OAAO;;;uBAAE,UAAC,CAAe;wBACvB,IAAI,KAAI,CAAC,eAAe,IAAI,KAAI,CAAC,eAAe,CAAC,IAAI,EAAE;4BACrD,KAAI,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;yBAC9B;qBACF,CAAA;oBACD,MAAM;;;uBAAE,UAAC,CAAc;wBACrB,IAAI,KAAI,CAAC,cAAc,IAAI,KAAI,CAAC,cAAc,CAAC,IAAI,EAAE;4BACnD,IAAI,CAAC,CAAC,KAAK,EAAE;gCACX,KAAI,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;6BACpC;iCAAM;gCACL,KAAI,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;6BAC7B;yBACF;qBACF,CAAA;iBACF,CAAC,CAAC;;;oBAGC,uBAAuB,GAAG,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAACL,gBAAM;;;mBAAC,UAAC,EAAiB;wBAAf,cAAI,EAAE,oBAAO;oBAAO,OAAA,IAAI,KAAK,KAAI,CAAC,MAAM,CAAC,EAAE,IAAI,OAAO,KAAK,KAAI,CAAC,YAAY;iBAAA,EAAC,CAAC,CAAC,SAAS;;;mBAAC,UAAC,QAAuB;oBAClL,QAAQ,QAAQ,CAAC,MAAM;wBACrB,KAAK,OAAO;4BACV,KAAI,CAAC,WAAW,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;4BACvC,MAAM;wBACR,KAAK,MAAM,CAAC;wBACZ,KAAK,cAAc;4BACjB,KAAI,CAAC,WAAW,CAAC,GAAG,CAAC,QAAQ,CAAC,IAAI,EAAE,QAAQ,CAAC,KAAK,IAAI,EAAE,CAAC,CAAC;4BAC1D,MAAM;wBACR,KAAK,SAAS;4BACZ,KAAI,CAAC,WAAW,CAAC,GAAG,CAAC,QAAQ,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;4BAC1C,MAAM;wBACR,KAAK,UAAU;4BACbM,aAAI,CAAC,QAAQ,CAAC,IAAI;;;+BAAE,UAAA,MAAM;gCACxB,KAAI,CAAC,WAAW,CAAC,GAAG,CAAC,MAAM,EAAE,EAAE,CAAC,CAAC;6BAClC,EAAC,CAAC;;;;4BAIHA,aAAI,CAAC,QAAQ,CAAC,KAAK;;;+BAAE,UAAA,MAAM;gCACzB,KAAI,CAAC,WAAW,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;6BACjC,EAAC,CAAC;4BAEH,IAAI,QAAQ,CAAC,gBAAgB,IAAI,QAAQ,CAAC,OAAO,KAAK,KAAI,CAAC,YAAY,EAAE;gCACvE,KAAI,CAAC,iBAAiB,EAAE,CAAC;6BAC1B;4BACD,MAAM;qBACT;iBACF,EAAC;gBACF,IAAI,CAAC,mBAAmB,CAAC,GAAG,CAAC,uBAAuB,CAAC,CAAC;;oBAElD,mBAAmB,GAAa,EAAE;;gBAEtC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,CAAC;gBACnC,IAAI,CAAC,iBAAiB,EAAE,CAAC;gBACzB,mBAAmB,CAAC,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;;gBAG5C,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;gBAC1B,mBAAmB,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;;gBAGzC,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,OAAO,EAAE,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE;oBACzD,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,OAAO;;;uBAAC,UAAA,KAAK;wBAC/B,KAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;wBACjB,mBAAmB,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;qBACjC,EAAC,CAAC;iBACJ;gBAED,OAAO,IAAI,CAAC,8BAA8B,CAAC,mBAAmB,CAAC,CAAC;;aAEjE;;;;QAED,kCAAiB;;;YAAjB;gBAAA,iBAOC;gBANC,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,EAAE,QAAQ,EAAE,CAAC,IAAI,CAAC,YAAY,CAAC,EAAE,YAAY,EAAE,IAAI,EAAE,CAAC,CAAC,IAAI;;;mBAAC,UAAC,QAAiD;oBAChI,KAAI,CAAC,WAAW,CAAC,KAAK,EAAE,CAAC;oBACzB,QAAQ,CAAC,QAAQ,CAAC,KAAI,CAAC,YAAY,CAAC,CAAC,SAAS,CAAC,OAAO;;;uBAAC,UAAA,QAAQ;wBAC7D,KAAI,CAAC,WAAW,CAAC,GAAG,CAAC,QAAQ,CAAC,IAAI,EAAE,QAAQ,CAAC,KAAK,IAAI,EAAE,CAAC,CAAC;qBAC3D,EAAC,CAAC;iBACJ,EAAC,CAAC;aACJ;;;;QAED,2BAAU;;;YAAV;gBACE,IAAI,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,MAAM,CAAC,EAAE,IAAI,IAAI,CAAC,MAAM,EAAE;oBAChD,IAAI,CAAC,MAAM,CAAC,cAAc,EAAE,CAAC;oBAC7B,IAAI,CAAC,MAAM,CAAC,kBAAkB,EAAE,CAAC;oBACjC,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;oBACpB,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC;iBACpB;gBACD,IAAI,IAAI,CAAC,mBAAmB,EAAE;oBAC5B,IAAI,CAAC,mBAAmB,CAAC,WAAW,EAAE,CAAC;iBACxC;gBACD,OAAO,IAAI,CAAC,gBAAgB,CAAC;gBAC7B,OAAO,IAAI,CAAC,eAAe,CAAC;gBAC5B,OAAO,IAAI,CAAC,cAAc,CAAC;gBAC3B,OAAO,IAAI,CAAC,mBAAmB,CAAC;aACjC;;;;;;;QAED,+BAAc;;;;;;YAAd,UAAe,KAAK,EAAE,OAAO,EAAE,IAAI;gBAAnC,iBAQC;gBAPC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,EAAE,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,CAAC,OAAO,CAAC,EAAE,WAAW,EAAE,IAAI,EAAE;;;mBAAE,UAAA,KAAK;oBAC3F,IAAI,KAAK,EAAE;wBACT,KAAI,CAAC,GAAG,CAAC,GAAG,CAAC,0BAA0B,GAAG,KAAK,EAAE,KAAK,CAAC,CAAC;qBACzD;yBAAM;wBACL,KAAI,CAAC,GAAG,CAAC,GAAG,CAAC,4BAA4B,GAAG,KAAK,CAAC,CAAC;qBACpD;iBACF,EAAC,CAAC;aACJ;;;;;;;QAED,iCAAgB;;;;;;YAAhB,UAAiB,KAAK,EAAE,OAAO,EAAE,IAAI;gBAArC,iBAQC;gBAPC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,cAAc,CAAC,EAAE,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,CAAC,OAAO,CAAC,EAAE,WAAW,EAAE,IAAI,EAAE;;;mBAAE,UAAA,KAAK;oBAC9F,IAAI,KAAK,EAAE;wBACT,KAAI,CAAC,GAAG,CAAC,GAAG,CAAC,4BAA4B,GAAG,KAAK,EAAE,KAAK,CAAC,CAAC;qBAC3D;yBAAM;wBACL,KAAI,CAAC,GAAG,CAAC,GAAG,CAAC,8BAA8B,GAAG,KAAK,CAAC,CAAC;qBACtD;iBACF,EAAC,CAAC;aACJ;;oBAjaFC,eAAU;;;;;wBA9BIC,uBAAc;wBAAEC,gBAAO;wBAD7BC,mBAAS;wBADTC,YAAG;wBAE4BC,aAAI;wBAF9BC,mBAAU;;;QAkcxB,aAAC;KAlaD;;;;;;;QChBE,oBAAoB,MAAc,EAAU,MAAc,EAAU,OAAgB,EAAYrB,YAAoB;YAAhG,WAAM,GAAN,MAAM,CAAQ;YAAU,WAAM,GAAN,MAAM,CAAQ;YAAU,YAAO,GAAP,OAAO,CAAS;YAAY,cAAS,GAATA,YAAS,CAAW;SAAI;;;;;QAExHsB,mCAAc;;;;YAAd,UAAe,QAAkB;gBAAjC,iBAUC;gBATC,OAAO,IAAIX,eAAU;;;mBAAW,UAAC,QAA4B;oBAC3D,KAAI,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,EAAE,QAAQ,CAAC,CAAC,SAAS;;;uBAAC,UAAA,CAAC;wBAChD,KAAI,CAAC,aAAa,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC;wBAC5B,KAAI,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,SAAS;;;2BAAC,UAAA,GAAG;4BAClC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;4BACjB,QAAQ,CAAC,QAAQ,EAAE,CAAC;yBACrB,EAAC,CAAC;qBACJ,EAAC,CAAC;iBACJ,EAAC,CAAC;aACJ;;;;;QAEDW,oCAAe;;;;YAAf,UAAgB,UAAkB;gBAAlC,iBAWC;gBAVC,OAAO,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,UAAU,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC,CAAC,EAAE,KAAK,EAAE,SAAS,EAAE,QAAQ,EAAE,EAAE,GAAG,EAAE,IAAI,EAAE,EAAE,KAAK,EAAE,UAAU,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,CAChIhB,aAAG;;;mBAAC,UAAA,MAAM;oBACR,IAAI,MAAM,IAAI,MAAM,CAAC,IAAI,IAAI,MAAM,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,EAAE;;4BAC/C,QAAQ,GAAG,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC;wBAC7B,KAAI,CAAC,aAAa,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;wBACnC,OAAO,QAAQ,CAAC;qBACjB;oBACD,OAAO,IAAI,CAAC;iBACb,EAAC,CACH,CAAC;aACH;;;;;QAEDgB,mCAAc;;;;YAAd,UAAe,SAAiB;gBAAhC,iBAWC;gBAVC,OAAO,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,SAAS,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC,CAAC,EAAE,KAAK,EAAE,SAAS,EAAE,QAAQ,EAAE,EAAE,GAAG,EAAE,IAAI,EAAE,EAAE,KAAK,EAAE,SAAS,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,CAC9HhB,aAAG;;;mBAAC,UAAA,MAAM;oBACR,IAAI,MAAM,IAAI,MAAM,CAAC,IAAI,IAAI,MAAM,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,EAAE;;4BAC/C,OAAO,GAAG,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC;wBAC5B,KAAI,CAAC,aAAa,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC;wBACnC,OAAO,OAAO,CAAC;qBAChB;oBACD,OAAO,IAAI,CAAC;iBACb,EAAC,CACH,CAAC;aACH;;;;;;;QAGDgB,2BAAM;;;;;;YAAN,UAAO,OAAyB;gBAC9B,OAAO,GAAG,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,OAAO,CAAC,CAAC;gBACrC,OAAO,OAAO,CAAC,MAAM,CAAC;gBACtB,OAAO,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC;aAC7C;;;;;;;QAGDA,kCAAa;;;;;;YAAb,UAAc,OAAyB;;gBAErC,OAAO,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,SAAS,EAAE,OAAO,CAAC,GAAG,CAAC,CAAC;aACnD;;;;;QAEDA,mCAAc;;;;YAAd,UAAe,OAAiB;gBAC9B,OAAO,GAAG,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,OAAO,CAAC,CAAC;gBACrC,OAAO,OAAO,CAAC,MAAM,CAAC;gBACtB,OAAO,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,EAAE,OAAO,CAAC,CAAC;aAC9C;;;;;;;QAGDA,mCAAc;;;;;;YAAd,UAAe,QAAkB;;gBAE/B,OAAO,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,UAAU,EAAE,QAAQ,CAAC,GAAG,CAAC,CAAC;aACrD;;;;;;;;;QAGDA,8BAAS;;;;;;;;YAAT,UAAU,KAAW,EAAE,KAAY,EAAE,SAAmB;;oBAClD,QAAQ,GAAG,CAAC,EAAE,KAAK,EAAE,UAAU,EAAE,QAAQ,EAAE,EAAE,GAAG,EAAE,KAAK,EAAE,EAAE,KAAK,EAAE,CAAC,EAAE,GAAG,EAAE,KAAK,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC;gBAC7F,IAAI,KAAK,EAAE;oBACT,QAAQ,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,UAAU,EAAE,QAAQ,EAAE,EAAE,GAAG,EAAE,KAAK,EAAE,EAAE,KAAK,EAAE,CAAC,EAAE,GAAG,EAAE,KAAK,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;iBAC7F;gBACD,IAAI,CAAC,SAAS,EAAE;oBACd,QAAQ,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,UAAU,EAAE,QAAQ,EAAE,EAAE,GAAG,EAAE,KAAK,EAAE,EAAE,KAAK,EAAEC,cAAK,CAAC,QAAQ,EAAE,CAAC,CAAC;iBACvF;gBACD,gBAAW,QAAQ,GAAE,EAAE,KAAK,EAAE,SAAS,EAAE,QAAQ,EAAE,EAAE,GAAG,EAAE,MAAM,EAAE,EAAE,KAAK,EAAE,GAAG,EAAE,EAAE,EAAE,KAAK,EAAE,WAAW,EAAE,QAAQ,EAAE,EAAE,GAAG,EAAE,IAAI,EAAE,EAAE,KAAK,EAAE,SAAS,KAAK,IAAI,EAAE,GAAE;aAC/J;;;;;QAEDD,sCAAiB;;;;YAAjB,UAAkB,IAAU;gBAC1B,OAAO,CAAC,EAAE,KAAK,EAAE,UAAU,EAAE,QAAQ,EAAE,EAAE,GAAG,EAAE,KAAK,EAAE,EAAE,KAAK,EAAE,CAAC,EAAE,GAAG,EAAE,IAAI,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;aACtF;;;;;;QAEDA,kCAAa;;;;;YAAb,UAAc,OAAoC,EAAE,OAAe;gBAAnE,iBAQC;gBARmD,wBAAA;oBAAA,eAAe;;gBACjE,IAAI,OAAO,IAAI,OAAO,CAAC,KAAK,EAAE;oBAC5B,OAAO,CAAC,MAAM,GAAG,OAAO,CAAC,KAAK,CAAC,MAAM;;;uBAAC,UAAA,CAAC,IAAI,OAAA,CAAC,CAAC,GAAG,KAAK,KAAI,CAAC,OAAO,CAAC,MAAM,GAAA,EAAC,CAAC;iBAC3E;gBACD,IAAI,OAAO,KAAK,CAAC,OAAO,CAAC,OAAO,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC,EAAE;oBAC1E,OAAO,CAAC,OAAO,GAAG,QAAQ,GAAG,OAAO,CAAC,GAAG,CAAC;iBAC1C;gBACD,OAAO,OAAO,CAAC;aAChB;;;;;;;;;QAGDA,+BAAU;;;;;;;;YAAV,UAAW,KAAW,EAAE,KAAY,EAAE,SAAmB;gBAAzD,iBAsCC;gBArCC,OAAO,IAAIX,eAAU;;;mBAAmB,UAAC,QAAoC;oBAC3E,KAAI,CAAC,MAAM,CAAC,MAAM,CAAC,SAAS,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC,KAAI,CAAC,SAAS,CAAC,KAAK,EAAE,KAAK,EAAE,SAAS,CAAC,CAAC,CAAC,CAAC,SAAS;;;uBAAC,UAAA,MAAM;;4BACrG,OAAO;wBACX,IAAI,MAAM,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,EAAE;4BAC1B,OAAO,GAAG,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;4BACzB,KAAI,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;4BAC5B,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;4BACvB,QAAQ,CAAC,QAAQ,EAAE,CAAC;yBACrB;6BAAM;4BACL,OAAO,GAAG;gCACR,QAAQ,EAAE,SAAS,GAAG,CAAC,KAAI,CAAC,MAAM,CAAC,SAAS,EAAE,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG,EAAE,KAAK,CAAC,GAAG,CAAC;gCACjF,OAAO,EAAE,SAAS,GAAG,KAAI,CAAC,MAAM,CAAC,mBAAmB,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,KAAI,CAAC,MAAM,CAAC,YAAY,CAAC,KAAK,CAAC,GAAG,EAAE,KAAK,CAAC,GAAG,CAAC;gCAChH,SAAS,EAAE,SAAS,KAAK,IAAI;gCAC7B,UAAU,EAAE,KAAK;gCACjB,UAAU,EAAE,KAAK,GAAG,KAAK,CAAC,UAAU,GAAG,KAAK,CAAC,UAAU;gCACvD,KAAK,EAAE,SAAS;sCACZ;wCACE;4CACE,GAAG,EAAE,KAAI,CAAC,MAAM,CAAC,SAAS;4CAC1B,QAAQ,EAAE,oBAAoB;4CAC9B,SAAS,EAAE,OAAO;4CAClB,QAAQ,EAAE,QAAQ;4CAClB,SAAS,EAAE,mGAAmG;yCAC/G;wCACD,KAAK;qCACN;sCACD,CAAC,KAAK,EAAE,KAAK,CAAC;6BACnB,CAAC;4BACF,KAAI,CAAC,MAAM,CAAC,MAAM,CAAC,OAAO,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,KAAK,GAAG,CAAC,KAAK,CAAC,GAAG,EAAE,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC;4BAC5F,KAAI,CAAC,MAAM,oBAAM,OAAO,GAAC,CAAC,SAAS;;;+BAAC,UAAA,CAAC;gCACnC,KAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC;gCACtB,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;gCACjB,QAAQ,CAAC,QAAQ,EAAE,CAAC;6BACrB,EAAC,CAAC;yBACJ;qBACF,EAAC,CAAC;iBACJ,EAAC,CAAC;aACJ;;;;;;;QAGDW,qCAAgB;;;;;;YAAhB,UAAiB,IAAU;gBACzB,OAAO,IAAI,CAAC,UAAU,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;aAC1C;;;;;;QAEDA,iCAAY;;;;;YAAZ,UAAa,MAAc,EAAE,OAAe;gBAA5C,iBA4DC;gBA5D4B,wBAAA;oBAAA,eAAe;;gBAC1C;;;mBAAO,UAAC,GAAmB;;wBACrB,QAAQ,GAAG,EAAE;oBACjB,OAAO,IAAIX,eAAU;;;uBAAiB,UAAC,QAAkC;wBACvE,IAAI,GAAG,CAAC,IAAI,IAAI,GAAG,CAAC,IAAI,CAAC,GAAG,EAAE;4BAC5B,IAAI,CAAC,OAAO,EAAE;gCACZ,GAAG,CAAC,IAAI,GAAGa,eAAM,CAAC,GAAG,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;6BACxC;4BACD,QAAQ,GAAG,GAAG,CAAC,IAAI;iCAChB,GAAG;;;2BAAC,UAAC,OAAY;gCAChB,KAAI,CAAC,aAAa,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;gCACrC,IAAI,OAAO,CAAC,MAAM,IAAI,OAAO,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,EAAE;oCAC/C,IAAI,CAAC,OAAO,EAAE;wCACZ,OAAO,CAAC,QAAQ,GAAG,KAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;qCAChE;oCACD,OAAO,OAAO,CAAC;iCAChB;qCAAM;oCACL,OAAO,SAAS,CAAC;iCAClB;6BACF,EAAC;iCACD,MAAM;;;2BAAC,UAAA,CAAC,IAAI,OAAA,CAAC,KAAK,SAAS,GAAA,EAAC,CAAC;yBACjC;wBACD,IAAI,QAAQ,CAAC,MAAM,KAAK,CAAC,EAAE;4BACzB,QAAQ,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,IAAI,EAAE,EAAE,EAAE,CAAC,CAAC;4BACtC,QAAQ,CAAC,QAAQ,EAAE,CAAC;yBACrB;6BAAM;4BACLC,aAAQ,CACN,QAAQ,CAAC,GAAG;;;+BAAC,UAAC,OAAyB;gCACrC,OAAO,KAAI,CAAC,MAAM,CAAC,UAAU,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC,IAAI,CACpDnB,aAAG;;;mCAAC,UAAC,MAAW;oCACd,IAAI,MAAM,CAAC,MAAM,GAAG,CAAC,EAAE;wCACrB,OAAO,CAAC,WAAW,GAAG,IAAI,CAAC;wCAC3B,OAAO,CAAC,oBAAoB,GAAG,IAAI,CAAC;wCACpC,OAAO,CAAC,eAAe,GAAG,EAAE,CAAC;;4CAEzB,QAAQ,GAAG,MAAM,CAAC,CAAC,CAAC;wCACxB,IAAI,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAE;;gDACnB,WAAW,GAAG,QAAQ,CAAC,CAAC,CAAC;4CAC7B,IAAI,CAAC,OAAO,CAAC,cAAc,IAAI,OAAO,CAAC,cAAc,CAAC,OAAO,CAAC,WAAW,CAAC,SAAS,CAAC,GAAG,CAAC,EAAE;gDACxF,OAAO,CAAC,WAAW,GAAG,WAAW,CAAC,OAAO,CAAC;gDAC1C,OAAO,CAAC,eAAe,GAAG,WAAW,CAAC,SAAS,CAAC;gDAChD,IAAI,OAAO,CAAC,WAAW,IAAI,OAAO,CAAC,WAAW,CAAC,OAAO,CAAC,kBAAkB,CAAC,GAAG,CAAC,EAAE;oDAC9E,OAAO,CAAC,WAAW,GAAG,KAAI,CAAC,SAAS,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;iDACnD;gDACD,OAAO,CAAC,oBAAoB,GAAG,WAAW,CAAC,SAAS,KAAK,KAAI,CAAC,OAAO,CAAC,MAAM,CAAC;6CAC9E;yCACF;qCACF;oCACD,OAAO,OAAO,CAAC;iCAChB,EAAC,CACH,CAAC;6BACH,EAAC,CACH,CAAC,SAAS;;;+BAAC,UAAA,CAAC;gCACX,CAAC,GAAGoB,gBAAO,CAAC,CAAC,EAAE,CAAC,iBAAiB,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC,CAAC;gCAC9C,QAAQ,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,GAAG,CAAC,KAAK,EAAE,IAAI,qBAAO,CAAC,EAAA,EAAE,CAAC,CAAC;gCAClD,QAAQ,CAAC,QAAQ,EAAE,CAAC;6BACrB,EAAC,CAAC;yBACJ;qBACF,EAAC,CAAC;iBACJ,EAAC;aACH;;;;;;;QAGDJ,wCAAmB;;;;;;YAAnB,UAAoB,MAAc;gBAChC,OAAO,IAAI,CAAC,YAAY,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;aACzC;;;;;;;QAGDA,yCAAoB;;;;;;YAApB,UAAqB,MAAc;gBACjC,OAAO,IAAI,CAAC,YAAY,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;aACxC;;oBAjNFP,eAAU;;;;;wBAdFY,eAAM;wBAKN,MAAM;wBALkBV,gBAAO;wBAU/BC,mBAAS;;;QAsNlB,iBAAC;KAlND;;;;;;;;;ACNA;;QAUE,qBAEiC,UAAkB,EAEzC,eAAiC,EACf,QAAQ;YAHH,eAAU,GAAV,UAAU,CAAQ;YAEzC,oBAAe,GAAf,eAAe,CAAkB;YACf,aAAQ,GAAR,QAAQ,CAAA;YAT5B,kBAAa,GAAY,KAAK,CAAC;YAWrC,IAAI,CAACU,wBAAiB,CAAC,IAAI,CAAC,UAAU,CAAC,EAAE;gBACvC,OAAO;aACR;;YAID,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,eAAe,CAAC,cAAc,CAAC,IAAI,CAAC,QAAQ,EAAE;gBAClE,EAAE,EAAE,IAAI;gBACR,aAAa,EAAEC,sBAAiB,CAAC,IAAI;gBACrC,MAAM,EAAE,EAAE;gBACV,IAAI,EAAE,EAAE;aACT,CAAC,CAAC;;SAGJ;;;;;QACM,0BAAI;;;;YAAX,UAAY,MAAsC;gBAAtC,uBAAA;oBAAA,WAA2B,KAAK,EAAE,EAAE,EAAE;;gBAChD,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;gBACrB,IAAI,IAAI,CAAC,aAAa,EAAE;oBACtB,OAAO;iBACR;gBACD,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;;;;;;;;;;;;aAY5B;;;;;;;;;;;;;QAOM,0BAAI;;;;;;;YAAX,UAAY,EAA2C;gBAAvD,iBAoBC;gBApBW,mBAAA;oBAAA,OAA2C;;gBAAzC,IAAA,kBAAM,EAAE,qCAAe;gBACnC,IAAI,CAACD,wBAAiB,CAAC,IAAI,CAAC,UAAU,CAAC,EAAE;oBACvC,OAAO;iBACR;gBACD,IAAI,MAAM,KAAK,IAAI,CAAC,MAAM,CAAC,KAAK,EAAE;oBAChC,IAAI,CAAC,MAAM,CAAC,KAAK,GAAG,MAAM,IAAI,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC;oBAChD,IAAI,oBAAM,MAAM,IAAE,QAAQ,EAAE;wBAC1B,IAAI,CAAC,QAAQ,EAAE,CAAC;qBACjB;iBACF;;gBAED,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,MAAM;;;mBAAE,UAAC,KAAY;;;wBAEpC,IAAI,gBACL,YAAY,IACf,MAAM,EAAE,KAAI,CAAC,MAAM,CAAC,KAAK,GAC1B;oBAED,OAAO,oBAAM,MAAM,IAAE,QAAQ,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;iBAC7C,EAAC,CAAC;aACJ;;;;;;;;;;;;;;;;QASM,8BAAQ;;;;;;;;YAAf;gBACE,IAAI,CAACA,wBAAiB,CAAC,IAAI,CAAC,UAAU,CAAC,EAAE;oBACvC,OAAO;iBACR;gBACD,IAAI,CAAC,oBAAM,MAAM,IAAE,QAAQ,EAAE;oBAC3B,OAAO;iBACR;gBACD,OAAO,oBAAM,MAAM,IAAE,QAAQ,CAAC,UAAU,CAAC,CAAC;aAC3C;;;;;;;;;;;;;;;;;;;QAUM,4BAAM;;;;;;;;;;YAAb,UAAc,IAAU;gBACtB,IAAI,CAACA,wBAAiB,CAAC,IAAI,CAAC,UAAU,CAAC,EAAE;oBACvC,OAAO;iBACR;gBACD,IAAI,CAAC,oBAAM,MAAM,IAAE,QAAQ,EAAE;oBAC3B,OAAO;iBACR;gBACD,IAAI,IAAI,EAAE;oBACR,OAAO,oBAAM,MAAM,IAAE,QAAQ,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;iBAC/C;qBAAM;oBACL,OAAO,oBAAM,MAAM,IAAE,QAAQ,CAAC,QAAQ,CAAC,CAAC;iBACzC;aACF;;;;;;;;QAKM,0BAAI;;;;YAAX;gBACE,IAAI,CAACA,wBAAiB,CAAC,IAAI,CAAC,UAAU,CAAC,EAAE;oBACvC,OAAO;iBACR;gBACD,IAAI,CAAC,oBAAM,MAAM,IAAE,QAAQ,EAAE;oBAC3B,OAAO;iBACR;gBACD,OAAO,oBAAM,MAAM,IAAE,QAAQ,CAAC,MAAM,CAAC,CAAC;aACvC;;;;;;;;;;;;;;;;;QASM,0BAAI;;;;;;;;;YAAX,UAAY,OAAgB;gBAC1B,IAAI,CAACA,wBAAiB,CAAC,IAAI,CAAC,UAAU,CAAC,EAAE;oBACvC,OAAO;iBACR;gBACD,IAAI,CAAC,oBAAM,MAAM,IAAE,QAAQ,EAAE;oBAC3B,OAAO;iBACR;gBACD,IAAI,OAAO,EAAE;oBACX,OAAO,oBAAM,MAAM,IAAE,QAAQ,CAAC,MAAM,CAAC,CAAC;iBACvC;qBAAM;oBACL,OAAO,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC;iBACrC;aACF;;;;;;;;QAKM,kCAAY;;;;YAAnB;gBACE,IAAI,CAACA,wBAAiB,CAAC,IAAI,CAAC,UAAU,CAAC,EAAE;oBACvC,OAAO;iBACR;gBACD,IAAI,CAAC,oBAAM,MAAM,IAAE,QAAQ,EAAE;oBAC3B,OAAO;iBACR;gBACD,OAAO,oBAAM,MAAM,IAAE,QAAQ,CAAC,cAAc,CAAC,CAAC;aAC/C;;;;;;;;;;;;;QAOM,oCAAc;;;;;;;YAArB,UAAsB,OAAgB;gBACpC,IAAI,CAACA,wBAAiB,CAAC,IAAI,CAAC,UAAU,CAAC,EAAE;oBACvC,OAAO;iBACR;gBACD,IAAI,CAAC,oBAAM,MAAM,IAAE,QAAQ,EAAE;oBAC3B,OAAO;iBACR;gBACD,IAAI,OAAO,EAAE;oBACX,OAAO,oBAAM,MAAM,IAAE,QAAQ,CAAC,gBAAgB,EAAE,OAAO,CAAC,CAAC;iBAC1D;qBAAM;oBACL,OAAO,oBAAM,MAAM,IAAE,QAAQ,CAAC,gBAAgB,CAAC,CAAC;iBACjD;aACF;;;;;;;;;;;;;;;;;;QASM,gCAAU;;;;;;;;;;YAAjB,UAAkB,SAAiB,EAAE,QAAc;gBACjD,IAAI,CAACA,wBAAiB,CAAC,IAAI,CAAC,UAAU,CAAC,EAAE;oBACvC,OAAO;iBACR;gBACD,IAAI,CAAC,oBAAM,MAAM,IAAE,QAAQ,EAAE;oBAC3B,OAAO;iBACR;gBACD,IAAI,QAAQ,EAAE;oBACZ,OAAO,oBAAM,MAAM,IAAE,QAAQ,CAAC,YAAY,EAAE,SAAS,EAAE,QAAQ,CAAC,CAAC;iBAClE;qBAAM;oBACL,OAAO,oBAAM,MAAM,IAAE,QAAQ,CAAC,YAAY,EAAE,SAAS,CAAC,CAAC;iBACxD;aACF;;;;;;;;;;;;QAOM,kCAAY;;;;;;YAAnB;gBACE,IAAI,CAACA,wBAAiB,CAAC,IAAI,CAAC,UAAU,CAAC,EAAE;oBACvC,OAAO;iBACR;gBACD,IAAI,CAAC,oBAAM,MAAM,IAAE,QAAQ,EAAE;oBAC3B,OAAO;iBACR;gBACD,OAAO,oBAAM,MAAM,IAAE,QAAQ,CAAC,cAAc,CAAC,CAAC;aAC/C;QAOD,sBAAI,kCAAS;;;;;;;;;;;gBAAb;gBACE,IAAI,CAACA,wBAAiB,CAAC,IAAI,CAAC,UAAU,CAAC,EAAE;oBACvC,OAAO;iBACR;gBACD,IAAI,CAAC,oBAAM,MAAM,IAAE,QAAQ,EAAE;oBAC3B,OAAO;iBACR;gBACD,OAAO,oBAAM,MAAM,IAAE,QAAQ,CAAC,cAAc,CAAC,CAAC;aAC/C;;;WAAA;;;;;;;;;QAKM,4BAAM;;;;;YAAb,UAAc,OAAmB;gBAC/B,IAAI,CAACA,wBAAiB,CAAC,IAAI,CAAC,UAAU,CAAC,EAAE;oBACvC,OAAO;iBACR;gBACD,IAAI,CAAC,oBAAM,MAAM,IAAE,QAAQ,EAAE;oBAC3B,OAAO;iBACR;gBACD,OAAO,oBAAM,MAAM,IAAE,QAAQ,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC;aAClD;;;;;;;;;QAKM,4BAAM;;;;;YAAb,UAAc,OAAmB;gBAC/B,IAAI,CAACA,wBAAiB,CAAC,IAAI,CAAC,UAAU,CAAC,EAAE;oBACvC,OAAO;iBACR;gBACD,IAAI,CAAC,oBAAM,MAAM,IAAE,QAAQ,EAAE;oBAC3B,OAAO;iBACR;gBACD,OAAO,oBAAM,MAAM,IAAE,QAAQ,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC;aAClD;;;;;;;;;QAKM,yCAAmB;;;;;YAA1B,UAA2B,OAAuC;gBAChE,IAAI,CAACA,wBAAiB,CAAC,IAAI,CAAC,UAAU,CAAC,EAAE;oBACvC,OAAO;iBACR;gBACD,IAAI,CAAC,oBAAM,MAAM,IAAE,QAAQ,EAAE;oBAC3B,OAAO;iBACR;gBACD,OAAO,oBAAM,MAAM,IAAE,QAAQ,CAAC,qBAAqB,EAAE,OAAO,CAAC,CAAC;aAC/D;;;;;;QAED,0CAAoB;;;;;YAApB,UAAqB,IAAoB,EAAE,mBAAuC;;;;;;;;oBAK1E,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC;gBAC/C,CAAC,CAAC,IAAI,GAAG,iBAAiB,CAAC;gBAC3B,CAAC,CAAC,KAAK,GAAG,IAAI,CAAC;gBACf,CAAC,CAAC,GAAG,GAAG,uCAAqC,IAAI,CAAC,EAAI,CAAC;gBAEvD,IAAI,CAAC,CAAC,WAAW,EAAE;oBACjB,CAAC,CAAC,WAAW,CAAC,QAAQ,EAAE,mBAAmB,CAAC,CAAC;iBAC9C;qBAAM;oBACL,CAAC,CAAC,gBAAgB,CAAC,MAAM,EAAE,mBAAmB,EAAE,KAAK,CAAC,CAAC;iBACxD;gBAED,IAAI,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,SAAS,CAAC,WAAW,EAAE;oBAChD,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;iBACnD;gBAED,oBAAM,MAAM,IAAE,QAAQ,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;aACxC;;;;;;QAED,kCAAY;;;;;YAAZ,UAAa,MAAsB,EAAE,iBAAqC;gBACxE,IAAI,CAAC,EAAE,GAAG,MAAM,CAAC,KAAK,CAAC;;oBACjB,CAAC,sBAAQ,MAAM,EAAA;;oBACf,EAAE,GAAG,CAAC,CAAC,QAAQ;gBACrB,IAAI,OAAO,EAAE,KAAK,UAAU,EAAE;oBAC5B,EAAE,CAAC,oBAAoB,CAAC,CAAC;oBACzB,EAAE,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC;iBACtB;qBAAM;;wBACC,GAAC;;uBAAQ;wBACb,GAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC;qBAChB,CAAA;oBACD,GAAC,CAAC,CAAC,GAAG,EAAE,CAAC;oBACT,GAAC,CAAC,CAAC;;;uBAAG,UAAS,IAAS;wBACtB,GAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;qBAChB,CAAA,CAAC;oBACF,CAAC,CAAC,QAAQ,GAAG,GAAC,CAAC;oBACf,IAAI,CAAC,oBAAoB,CAAC,MAAM,EAAE,iBAAiB,CAAC,CAAC;iBACtD;aACF;;oBA1TFb,eAAU;;;;;wBAYoC,MAAM,uBAAhDe,WAAM,SAACC,gBAAW;wBArBkEC,qBAAgB;wDAwBpGF,WAAM,SAACG,eAAQ;;;QA4SpB,kBAAC;KA3TD;;;;;;ACTA;QAiBE,kBAAsB,UAAsB,EAAY,MAAc,EAAY,cAA8B,EAAY,cAA8B,EAAY,OAAgB,EAAY,WAAwB;YAA1N,iBAIC;YAJqB,eAAU,GAAV,UAAU,CAAY;YAAY,WAAM,GAAN,MAAM,CAAQ;YAAY,mBAAc,GAAd,cAAc,CAAgB;YAAY,mBAAc,GAAd,cAAc,CAAgB;YAAY,YAAO,GAAP,OAAO,CAAS;YAAY,gBAAW,GAAX,WAAW,CAAa;YANnN,iBAAY,GAAG,IAAIhC,YAAO,EAAU,CAAC;YAO1C,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,SAAS;;eAAC,cAAM,OAAA,KAAI,CAAC,IAAI,EAAE,GAAA,EAAC,CAAC;YACxD,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,SAAS;;eAAC,cAAM,OAAA,KAAI,CAAC,MAAM,EAAE,GAAA,EAAC,CAAC;YAC3D,IAAI,CAAC,cAAc,CAAC,eAAe,CAAC,SAAS;;;eAAC,UAAA,IAAI,IAAI,OAAA,KAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,GAAA,EAAC,CAAC;SAC5E;QARD,sBAAc,4BAAM;;;;gBAApB;gBACE,OAAO,IAAI,CAAC,MAAM,CAAC,UAAU,KAAK,YAAY,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,gBAAgB,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,eAAe,CAAC,CAAC;aACrI;;;WAAA;;;;QAQD,4BAAS;;;YAAT;gBACE,IAAI,IAAI,CAAC,MAAM,CAAC,KAAK,EAAE;oBACrB,OAAO,KAAK,CAAC;iBACd;gBACD,IAAI,IAAI,CAAC,UAAU,CAAC,WAAW,EAAE,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,SAAS,EAAE,EAAE;oBACjE,OAAO,KAAK,CAAC;iBACd;gBACD,OAAO,IAAI,CAAC;aACb;;;;QAED,uBAAI;;;YAAJ;;gBAEE,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,EAAE;oBACrB,OAAO;iBACR;gBACD,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,SAAS,EAAE,EAAE;oBAChC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC;oBAC9C,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC;wBACpB,MAAM,EAAE,IAAI,CAAC,MAAM;wBACnB,qBAAqB,EAAE,IAAI;qBAC5B,CAAC,CAAC;;;;;;;iBAOJ;qBAAM;;oBAEL,IAAI,IAAI,CAAC,cAAc,CAAC,UAAU,EAAE,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE;wBAC3D,IAAI,CAAC,cAAc,CAAC,qBAAqB,CAAC,MAAM,CAAC,CAAC;wBAClD,IAAI,CAAC,cAAc,CAAC,sBAAsB,CAAC,EAAE,MAAM,EAAE,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC,CAAC;qBAC7E;iBACF;aACF;;;;QAED,kCAAe;;;YAAf;gBACE,IAAI,IAAI,CAAC,UAAU,CAAC,SAAS,EAAE,EAAE;oBAC/B,IAAI,CAAC,cAAc,CAAC,eAAe,EAAE,CAAC;iBACvC;aACF;;;;QAED,yBAAM;;;YAAN;gBACE,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,EAAE;oBACrB,OAAO;iBACR;;gBAED,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,SAAS,EAAE,EAAE;oBAChC,IAAI,CAAC,WAAW,CAAC,QAAQ,EAAE,CAAC;;;;iBAI7B;qBAAM;oBACL,IAAI,CAAC,cAAc,CAAC,KAAK,EAAE,CAAC;;iBAE7B;aACF;;;;;QAED,2BAAQ;;;;YAAR,UAAS,IAAU;gBAAnB,iBA4CC;gBA3CC,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,IAAI,EAAE;oBAC9B,OAAO;iBACR;;oBACG,MAAM,GAAG;oBACX,OAAO,EAAE,IAAI,CAAC,GAAG;oBACjB,iBAAiB,EAAE,IAAI,CAAC,QAAQ;oBAChC,MAAM,EAAE;wBACN,IAAI,EAAE,QAAQ;wBACd,SAAS,EAAE,IAAI,CAAC,SAAS;qBAC1B;oBACD,KAAK,EAAE,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,QAAQ;oBAClC,QAAQ,EAAE,IAAI,CAAC,QAAQ;oBACvB,SAAS,EAAE,IAAI,CAAC,SAAS;oBACzB,QAAQ,EAAE,IAAI,CAAC,QAAQ;oBACvB,SAAS,EAAEiC,YAAI,CAACC,cAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;oBAClC,KAAK,EAAE,IAAI,CAAC,SAAS;oBACrB,MAAM,EAAE,IAAI,CAAC,MAAM;oBACnB,MAAM,EAAE,IAAI,CAAC,MAAM;oBACnB,MAAM,EAAE,IAAI,CAAC,UAAU,CAAC,cAAc,EAAE;oBACxC,OAAO,EAAE,IAAI,CAAC,OAAO;oBACrB,IAAI,EAAE,IAAI,CAAC,IAAI;oBACf,MAAM,EAAE,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,GAAG,EAAE;oBAC7C,qBAAqB,EAAE,IAAI;;;iBAG5B;gBACD,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,SAAS,EAAE,EAAE;oBAChC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;oBAChC,IAAI,CAAC,WAAW,CAAC,mBAAmB;;;uBAAC,UAAA,WAAW;wBAC9C,KAAI,CAAC,YAAY,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;qBACrC,EAAC,CAAC;;;;;;;iBAOJ;qBAAM;oBACL,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC;oBACvC,IAAI,CAAC,cAAc,CAAC,uBAAuB,EAAE,CAAC,IAAI;;;uBAAC,UAAA,WAAW;wBAC5D,KAAI,CAAC,YAAY,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;qBACrC,EAAC,CAAC;iBACJ;aACF;;;;;;QAED,6BAAU;;;;;YAAV,UAAW,SAAiB,EAAE,QAAa;gBACzC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,SAAS,EAAE,EAAE;oBAChC,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC,SAAS,EAAE,QAAQ,CAAC,CAAC;iBAClD;qBAAM;oBACL,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,SAAS,EAAE,QAAQ,CAAC,CAAC;iBACnD;aACF;;;;;QAED,yBAAM;;;;YAAN,UAAO,QAAa;gBAClB,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,SAAS,EAAE,EAAE;oBAChC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;iBACnC;qBAAM;oBACL,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC;iBAC1C;aACF;;;;QAED,uBAAI;;;YAAJ;gBACE,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,EAAE;oBACrB,OAAO;iBACR;gBACD,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,SAAS,EAAE,EAAE;oBAChC,IAAI,CAAC,WAAW,CAAC,IAAI,EAAE,CAAC;;;;iBAIzB;qBAAM;oBACL,IAAI,CAAC,cAAc,CAAC,gBAAgB,EAAE,CAAC;iBACxC;aACF;;oBAlJFpB,eAAU;;;;;wBARFM,mBAAU;wBACYe,eAAM;wBAEhBC,YAAc;wBAF1BrB,uBAAc;wBAAgBC,gBAAO;wBAKrC,WAAW;;;QAqJpB,eAAC;KAnJD;;;;;;;QCDE,kBAAoB,MAAc,EAAU,EAAa;YAArC,WAAM,GAAN,MAAM,CAAQ;YAAU,OAAE,GAAF,EAAE,CAAW;SAAI;;;;;QAE7D,iCAAc;;;;YAAd,UAAe,OAAgB;gBAC7B,OAAO;oBACL,EAAE,EAAE,OAAO,CAAC,EAAE;oBACd,OAAO,EAAE;wBACP,KAAK,EAAE,OAAO,CAAC,KAAK;wBACpB,IAAI,EAAE,OAAO,CAAC,IAAI;;wBAElB,SAAS,EAAE,OAAO,CAAC,SAAS;wBAC5B,UAAU,EAAE,OAAO,CAAC,UAAU;wBAC9B,MAAM,EAAE,OAAO,CAAC,SAAS,GAAG,IAAI,GAAG,KAAK;wBACxC,QAAQ,EAAE,OAAO,CAAC,QAAQ;qBAC3B;iBACF,CAAC;aACH;;;;;QAED,2BAAQ;;;;YAAR,UAAS,OAAgB;gBACvB,OAAO,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,MAAM,EAAE,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC,CAAC;aACzE;;;;;QAED,gCAAa;;;;YAAb,UAAc,MAAqB;gBACjC,OAAO,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE,GAAG,6BAA6B,EAAE,EAAE,MAAM,QAAA,EAAE,CAAC,CAAC;aAC1F;QAED,sBAAY,4BAAM;;;;gBAAlB;gBACE,OAAO,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE,GAAG,WAAW,CAAC;aAC9C;;;WAAA;;oBA7BFF,eAAU;;;;;wBAJFY,eAAM;wBAAEW,kBAAS;;;QAkC1B,eAAC;KA9BD;;;;;;ACNA;;AAQA;QAEE,eAAsB,OAAgB,EAAY,IAAU,EAAY,OAAgB,EAAY,YAA0B,EAAY,cAA8B,EAAY,UAAsB,EAAY,MAAc,EAAY,GAAQ,EAAY,QAAkB,EAAY,QAAkB;YAA9R,YAAO,GAAP,OAAO,CAAS;YAAY,SAAI,GAAJ,IAAI,CAAM;YAAY,YAAO,GAAP,OAAO,CAAS;YAAY,iBAAY,GAAZ,YAAY,CAAc;YAAY,mBAAc,GAAd,cAAc,CAAgB;YAAY,eAAU,GAAV,UAAU,CAAY;YAAY,WAAM,GAAN,MAAM,CAAQ;YAAY,QAAG,GAAH,GAAG,CAAK;YAAY,aAAQ,GAAR,QAAQ,CAAU;YAAY,aAAQ,GAAR,QAAQ,CAAU;YAClT,IAAI,CAAC,aAAa,EAAE,CAAC;;;SAGtB;;;;;;QAED,yBAAS;;;;;YAAT,UAAU,aAA6B,EAAE,SAA0B;gBAAzD,8BAAA;oBAAA,oBAA6B;;gBAAE,0BAAA;oBAAA,iBAA0B;;gBACjE,IAAI,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,EAAE;oBAC5B,OAAO,KAAK,CAAC;iBACd;gBACD,IAAI,IAAI,CAAC,UAAU,CAAC,WAAW,EAAE,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,SAAS,EAAE,EAAE;oBACjE,OAAO,KAAK,CAAC;iBACd;gBACD,IAAI,IAAI,CAAC,UAAU,CAAC,OAAO,EAAE,KAAK,MAAM,EAAE;oBACxC,OAAO,KAAK,CAAC;iBACd;gBACD,IAAI,IAAI,CAAC,MAAM,CAAC,KAAK,IAAI,CAAC,SAAS,EAAE;oBACnC,OAAO,KAAK,CAAC;iBACd;gBACD,IAAI,aAAa,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,UAAU,EAAE,EAAE;oBACtD,OAAO,KAAK,CAAC;iBACd;gBACD,IAAI,IAAI,CAAC,OAAO,CAAC,IAAI,IAAI,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,eAAe,EAAE;oBAC1D,OAAO,KAAK,CAAC;iBACd;gBACD,OAAO,IAAI,CAAC;aACb;;;;;;;;;;;;;;;;;;;;;;;;;;QAcD,gCAAgB;;;;;;;;;;;;;;;YAAhB;gBAAA,iBAyDC;gBAxDC,OAAO,IAAI,OAAO;;;;mBAAC,UAAC,OAAO,EAAE,MAAM;oBACjC,IAAI;wBACF,IAAI,CAAC,MAAM,CAAC,cAAc,CAAC,IAAI,KAAI,CAAC,SAAS,CAAC,KAAK,EAAE,IAAI,CAAC,EAAE;4BAC1D,IAAI,KAAI,CAAC,UAAU,CAAC,KAAK,EAAE,IAAI,KAAI,CAAC,UAAU,CAAC,SAAS,EAAE,EAAE;gCAC1D,MAAM,CAAC,cAAc,CAAC,MAAM,CAAC,QAAQ,EAAE,QAAQ,EAAE;oCAC/C,UAAU,EAAE,IAAI;oCAChB,YAAY,EAAE,IAAI;oCAClB,GAAG;;uCAAE;wCACH,OAAO,KAAI,CAAC,YAAY,CAAC,GAAG,CAAC,iBAAiB,CAAC,CAAC;qCACjD,CAAA;oCACD,GAAG;;;uCAAE,UAAA,YAAY;;4CACX,MAAM,GAAG,KAAI,CAAC,YAAY,CAAC,GAAG,CAAC,iBAAiB,CAAC;wCACrD,IAAI,MAAM,EAAE;;gDACN,OAAO,GAAG,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC;;gDAC5B,MAAI,GAAG,YAAY,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;4CACrC,OAAO,GAAG,OAAO,CAAC,MAAM;;;+CAAC,UAAA,CAAC,IAAI,OAAA,CAAC,CAAC,OAAO,CAAC,MAAI,GAAG,GAAG,CAAC,GAAG,CAAC,GAAA,EAAC,CAAC;4CACzD,OAAO,CAAC,IAAI,CAAC,YAAY,CAAC,IAAI,EAAE,CAAC,CAAC;4CAClC,MAAM,GAAG,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;yCAC7B;6CAAM;4CACL,MAAM,GAAG,YAAY,CAAC;yCACvB;wCACD,KAAI,CAAC,YAAY,CAAC,GAAG,CAAC,iBAAiB,EAAE,MAAM,CAAC,CAAC;qCAClD,CAAA;iCACF,CAAC,CAAC;6BACJ;4BAED,MAAM,CAAC,iBAAiB,CAAC,GAAG,cAAc,CAAC;4BAC3C,MAAM,CAAC,cAAc,CAAC,GAAG,MAAM,CAAC,cAAc,CAAC,IAAI;gCACjD,CAAC,EAAE,KAAI,CAAC,UAAU,CAAC,OAAO,EAAE,GAAG,KAAI,CAAC,UAAU,CAAC,MAAM,CAAC,oBAAoB,CAAC,GAAG,KAAI,CAAC,UAAU,CAAC,MAAM,CAAC,iBAAiB,CAAC;gCACvH,CAAC,EAAE,EAAE;6BACN,CAAC;4BACF,CAAC,OAAO,EAAE,MAAM,EAAE,UAAU,EAAE,cAAc,EAAE,KAAK,EAAE,mBAAmB,CAAC,CAAC,OAAO;;;+BAAC,UAAA,GAAG;gCACnF,MAAM,CAAC,cAAc,CAAC,CAAC,GAAG,CAAC;oCACzB,MAAM,CAAC,cAAc,CAAC,CAAC,GAAG,CAAC;;;2CAC3B;4CACE,MAAM,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;yCAC1E,CAAA,CAAC;6BACL,EAAC,CAAC;;gCACC,CAAC,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC;4BACxC,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC;4BACb,CAAC,CAAC,GAAG,GAAG,8CAA8C,CAAC;4BACvD,CAAC,CAAC,MAAM;;+BAAG;gCACT,OAAO,CAAC,IAAI,CAAC,CAAC;6BACf,CAAA,CAAC;4BACF,CAAC,CAAC,OAAO;;;+BAAG,UAAA,GAAG;gCACb,MAAM,CAAC,GAAG,CAAC,CAAC;6BACb,CAAA,CAAC;;gCACE,CAAC,GAAG,QAAQ,CAAC,oBAAoB,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;4BAClD,CAAC,CAAC,UAAU,CAAC,YAAY,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;yBACjC;6BAAM;4BACL,OAAO,CAAC,KAAK,CAAC,CAAC;yBAChB;qBACF;oBAAC,OAAO,GAAG,EAAE;wBACZ,MAAM,CAAC,GAAG,CAAC,CAAC;qBACb;iBACF,EAAC,CAAC;aACJ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QAiBD,sCAAsB;;;;;;;;;;;;;;;;;YAAtB;gBAAA,iBAWC;gBAVC,OAAO,IAAI,OAAO;;;mBAAC,UAAA,OAAO;oBACxB,IAAI,MAAM,CAAC,cAAc,CAAC,EAAE;wBAC1B,MAAM,CAAC,cAAc,CAAC,CAAC,YAAY;;;2BAAC,UAAA,SAAS;4BAC3C,KAAI,CAAC,GAAG,CAAC,GAAG,CAAC,wBAAwB,EAAE,SAAS,CAAC,CAAC;4BAClD,OAAO,CAAC,SAAS,CAAC,CAAC;yBACpB,EAAC,CAAC;qBACJ;yBAAM;wBACL,OAAO,CAAC,IAAI,CAAC,CAAC;qBACf;iBACF,EAAC,CAAC;aACJ;;;;QAED,kCAAkB;;;YAAlB;gBACE,OAAO,iDAAiD,CAAC;aAC1D;;;;;QAED,qCAAqB;;;;YAArB,UAAsB,GAAG;;;;;;aAMxB;;;;QAED,6BAAa;;;YAAb;gBACE,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,EAAE;oBAC1B,OAAO;iBACR;;oBACG,SAAS,IAAI,MAAM,CAAC,SAAS,GAAG,MAAM,CAAC,SAAS,IAAI,EAAE,CAAC;gBAC3D,IAAI,CAAC,SAAS,CAAC,UAAU,EAAE;oBACzB,IAAI,SAAS,CAAC,OAAO,EAAE;wBACrB,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,iCAAiC,CAAC,CAAC;qBACnD;yBAAM;wBACL,SAAS,CAAC,OAAO,GAAG,CAAC,CAAC,CAAC;wBACvB,SAAS,CAAC,OAAO,GAAG,CAAC,aAAa,EAAE,YAAY,EAAE,WAAW,EAAE,WAAW,EAAE,UAAU,EAAE,UAAU,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,MAAM,EAAE,MAAM,EAAE,KAAK,EAAE,IAAI,CAAC,CAAC;wBACvL,SAAS,CAAC,OAAO;;;2BAAG,UAAS,EAAE;4BAC7B;;+BAAO;;oCACD,CAAC,GAAG,KAAK,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC;gCAC7C,CAAC,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;gCACd,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;gCAClB,OAAO,SAAS,CAAC;6BAClB,EAAC;yBACH,CAAA,CAAC;wBACF,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,SAAS,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;;gCAC7C,CAAC,GAAG,SAAS,CAAC,OAAO,CAAC,CAAC,CAAC;4BAC5B,SAAS,CAAC,CAAC,CAAC,GAAG,SAAS,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;yBACrC;wBACD,SAAS,CAAC,IAAI;;;2BAAG,UAAS,CAAC;;gCACrB,CAAC,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC;4BACxC,CAAC,CAAC,IAAI,GAAG,iBAAiB,CAAC;4BAC3B,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC;4BACb,CAAC,CAAC,GAAG,GAAG,CAAC,QAAQ,KAAK,QAAQ,CAAC,QAAQ,CAAC,QAAQ,GAAG,UAAU,GAAG,SAAS,IAAI,kCAAkC,GAAG,CAAC,GAAG,mBAAmB,CAAC;;gCACtI,CAAC,GAAG,QAAQ,CAAC,oBAAoB,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;4BAClD,CAAC,CAAC,UAAU,CAAC,YAAY,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;yBACjC,CAAA,CAAC;wBACF,SAAS,CAAC,eAAe,GAAG,OAAO,CAAC;wBACpC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,UAAU,KAAK,YAAY,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,oBAAoB,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,uBAAuB,CAAC,CAAC,CAAC;wBACzJ,SAAS,CAAC,IAAI,EAAE,CAAC;;;;;qBAMlB;iBACF;aACF;;;;;;QAED,qBAAK;;;;;YAAL,UAAM,KAAa,EAAE,UAAmB;gBACtC,IAAI,CAAC,KAAK,IAAI,KAAK,KAAK,EAAE,EAAE;oBAC1B,OAAO;iBACR;gBACD,KAAK,GAAG,KAAK;qBACV,KAAK,CAAC,GAAG,CAAC;qBACV,GAAG;;;eAAC,UAAA,IAAI,IAAI,OAAA,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE,GAAA,EAAC;qBACvE,IAAI,CAAC,GAAG,CAAC,CAAC;gBACb,IAAI,IAAI,CAAC,OAAO,CAAC,UAAU,EAAE;oBAC3B,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,OAAO,EAAE,KAAK,EAAE,UAAU,CAAC,CAAC;iBAC1C;gBACD,IAAI,IAAI,CAAC,SAAS,EAAE,IAAI,MAAM,CAAC,SAAS,EAAE;oBACxC,IAAI;wBACF,MAAM,CAAC,SAAS,CAAC,KAAK,CAAC,KAAK,EAAE/B,cAAK,CAAC,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,UAAU,CAAC,CAAC,CAAC;qBAC9F;oBAAC,OAAO,KAAK,EAAE,GAAE;iBACnB;aACF;;;;;;;QAED,oBAAI;;;;;;YAAJ,UAAK,IAAY,EAAE,QAAiB,EAAE,UAAgB;gBACpD,IAAI,IAAI,CAAC,SAAS,EAAE,IAAI,MAAM,CAAC,SAAS,EAAE;oBACxC,IAAI;wBACF,MAAM,CAAC,SAAS,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,EAAEA,cAAK,CAAC,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,UAAU,CAAC,CAAC,CAAC;qBACtG;oBAAC,OAAO,KAAK,EAAE,GAAE;iBACnB;aACF;;;;;QAED,wBAAQ;;;;YAAR,UAAS,IAAU;gBAAnB,iBAgFC;gBA/EC,IAAI,CAAC,IAAI,EAAE;oBACT,OAAO;iBACR;gBACD,UAAU;;mBAAC;oBACT,IAAI,KAAI,CAAC,SAAS,EAAE,EAAE;;;;;;;;;;;;;;;;wBAgBpB,IAAI,MAAM,CAAC,SAAS,EAAE;4BACpB,IAAI;;oCACE,cAAc,GAAG;oCACnB,OAAO,EAAE,IAAI,CAAC,GAAG,IAAI,EAAE;oCACvB,SAAS,EAAE,IAAI,CAAC,IAAI,IAAI,EAAE;oCAC1B,KAAK,EAAE,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,QAAQ,IAAI,EAAE;oCACxC,gBAAgB,EAAE,KAAI,CAAC,UAAU,CAAC,WAAW,EAAE;oCAC/C,MAAM,EAAE,IAAI,CAAC,SAAS,IAAI,EAAE;oCAC5B,KAAK,EAAE,IAAI,CAAC,SAAS,IAAI,EAAE;oCAC3B,MAAM,EAAE,IAAI,CAAC,MAAM,IAAI,EAAE;oCACzB,MAAM,EAAE,KAAI,CAAC,UAAU,CAAC,cAAc,EAAE;oCACxC,OAAO,EAAE,KAAI,CAAC,UAAU,CAAC,aAAa,EAAE;oCACxC,aAAa,EAAEgC,eAAM,CAAC,WAAW,EAAE;iCACpC;gCACD,MAAM,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,GAAG,EAAEhC,cAAK,CAAC,KAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,EAAE,cAAc,CAAC,CAAC,CAAC;6BAC3F;4BAAC,OAAO,KAAK,EAAE,GAAE;yBACnB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;qBAgCF;oBACD,KAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;oBAC7B,UAAU;;uBAAC;wBACT,IAAI,MAAM,IAAI,MAAM,CAAC,IAAI,CAAC,IAAI,MAAM,CAAC,IAAI,CAAC,CAAC,oBAAoB,EAAE;;gCAC3D,YAAY,GAAG,MAAM,CAAC,IAAI,CAAC,CAAC,oBAAoB,EAAE;4BACtD,KAAI,CAAC,QAAQ,CAAC,MAAM,CAAC;gCACnB,YAAY,EAAE,YAAY;6BAC3B,CAAC,CAAC;yBACJ;qBACF,GAAE,IAAI,CAAC,CAAC;iBACV,GAAE,IAAI,CAAC,CAAC;aACV;;;;QAED,uCAAuB;;;YAAvB;gBACE,IAAI,CAAC,QAAQ,CAAC,eAAe,EAAE,CAAC;aACjC;;;;;QAED,kCAAkB;;;;YAAlB,UAAmB,IAAU;;oBACvB,KAAK,GAAG;oBACV,WAAW,EAAE,IAAI,CAAC,cAAc,CAAC,OAAO,EAAE,GAAG,EAAE,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM;oBACrE,aAAa,EAAE,IAAI,CAAC,QAAQ,IAAI,EAAE;oBAClC,cAAc,EAAE,IAAI,CAAC,SAAS,IAAI,EAAE;oBACpC,aAAa,EAAE,IAAI,CAAC,QAAQ,IAAI,EAAE;oBAClC,aAAa,EAAE,IAAI,CAAC,QAAQ,IAAI,EAAE;oBAClC,iBAAiB,EAAE,IAAI,CAAC,OAAO,IAAI,EAAE;oBACrC,WAAW,EAAE,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,GAAG,IAAI;oBACpD,SAAS,EAAE,IAAI,CAAC,IAAI,IAAI,EAAE;oBAC1B,UAAU,EAAE,IAAI,CAAC,OAAO,CAAC,KAAK,IAAI,EAAE;oBACpC,gBAAgB,EAAE,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,WAAW,EAAE;iBACvD;gBACD,IAAI;;wBACEiC,SAAM,SAAQ;oBAClBA,SAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,CAACC,aAAM,CAAC,CAAC;oBACnC,KAAK,GAAGlC,cAAK,CAAC,KAAK,EAAE,EAAE,IAAI,EAAEiC,SAAM,CAAC,GAAG,EAAE,CAAC,CAAC;iBAC5C;gBAAC,OAAO,GAAG,EAAE,GAAE;gBAChB,OAAO,KAAK,CAAC;aACd;;oBA3TFzB,eAAU;;;;;wBANF2B,gBAAO;wBACwBtB,aAAI;wBAAbH,gBAAO;wBADH0B,qBAAY;wBAChC3B,uBAAc;wBADXK,mBAAU;wBACkBe,eAAM;wBADtBjB,YAAG;wBAFZyB,aAAQ;wBAIpB,QAAQ;;;QAgUjB,YAAC;KA5TD;;;;;;ACRA;QAOE,qBAAoB,EAAa,EAAU,MAAc;YAArC,OAAE,GAAF,EAAE,CAAW;YAAU,WAAM,GAAN,MAAM,CAAQ;SAAI;;;;QAE7D,8BAAQ;;;YAAR;gBACE,OAAO,IAAI,CAAC,EAAE,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,iBAAiB,CAAC,CAAC,IAAI,CAC7DtC,aAAG;;;mBAAC,UAAA,GAAG;oBACL,OAAO,GAAG,CAAC,gBAAgB,CAAC;iBAC7B,EAAC,CACH,CAAC;aACH;;oBAVFS,eAAU;;;;;wBAJFuB,kBAAS;wBAAEF,eAAM;;;QAe1B,kBAAC;KAXD;;;;;;ACLA;QA0BE,mBAAsB,OAAgB,EAAY,GAAQ,EAAY,UAAsB,EAAY,MAAc,EAAYpC,YAAoB;YAAhI,YAAO,GAAP,OAAO,CAAS;YAAY,QAAG,GAAH,GAAG,CAAK;YAAY,eAAU,GAAV,UAAU,CAAY;YAAY,WAAM,GAAN,MAAM,CAAQ;YAAY,cAAS,GAATA,YAAS,CAAW;YAP9I,gBAAW,GAAG;gBACpB,KAAK,EAAE,IAAI;gBACX,KAAK,EAAE;oBACL,KAAK,EAAE,EAAE,KAAK,EAAE,IAAI,EAAE;oBACtB,MAAM,EAAE,EAAE,KAAK,EAAE,IAAI,EAAE;iBACxB;aACF,CAAC;SACwJ;;;;QAE1J,8BAAU;;;YAAV;gBACE,OAAO,IAAI,CAAC,UAAU,CAAC,SAAS,EAAE,IAAI,MAAM,CAAC,QAAQ,CAAC,CAAC;aACxD;;;;QAED,wBAAI;;;YAAJ;gBACE,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE;oBAChB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;oBACnB,IAAI,CAAC,cAAc,EAAE,CAAC;oBACtB,IAAI,IAAI,CAAC,UAAU,EAAE,IAAI,MAAM,CAAC,QAAQ,CAAC,EAAE;wBACzC,IAAI,CAAC,aAAa,EAAE,CAAC;qBACtB;yBAAM;wBACL,IAAI,CAAC,SAAS,EAAE,CAAC;qBAClB;iBACF;qBAAM;oBACL,IAAI,CAAC,SAAS,EAAE,CAAC;iBAClB;gBACD,OAAO,OAAO,CAAC,OAAO,EAAE,CAAC;aAC1B;;;;QAED,kCAAc;;;YAAd;gBACE,IAAI,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE;oBACrC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;iBACzD;qBAAM;oBACL,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC;iBACxC;aACF;;;;;QAED,mCAAe;;;;YAAf,UACE,IAAW;;oBAMP,MAAM,GAAG,EAAE;;oBACX,QAAQ,GAAG,EAAE;;oBACb,SAAS,GAAG,EAAE;gBAClB,IAAI,IAAI,EAAE;oBACR,IAAI,IAAI,CAAC,GAAG,EAAE;wBACZ,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC;qBACnB;oBACD,IAAIa,aAAI,CAAC,cAAc,CAAC,IAAI,CAAC,EAAE;wBAC7B,QAAQ,GAAGA,aAAI,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;qBACtC;oBACD,IAAI,IAAI,CAAC,SAAS,EAAE;wBAClB,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC;qBAC5B;iBACF;gBACD,OAAO;oBACL,IAAI,EAAE,QAAQ;oBACd,UAAU,EAAE,MAAM;oBAClB,SAAS,EAAE,SAAS;iBACrB,CAAC;aACH;;;;QAED,iCAAa;;;YAAb;gBAAA,iBA0BC;gBAzBC,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC,QAAQ,CAAC,CAAC;gBAC/B,IAAI,IAAI,CAAC,MAAM,EAAE;oBACf,IAAI,CAAC,MAAM;yBACR,UAAU,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,WAAW,CAAC,EAAE,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,cAAc,CAAC,CAAC;yBACvF,IAAI;;;mBAAC,UAAA,QAAQ;wBACZ,KAAI,CAAC,YAAY,GAAG,QAAQ,CAAC;wBAC7B,KAAI,CAAC,GAAG,CAAC,GAAG,CAAC,6BAA6B,EAAE,KAAI,CAAC,YAAY,CAAC,CAAC;wBAC/D,KAAI,CAAC,MAAM,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC;qBACnC,EAAC;yBACD,IAAI;;mBAAC;wBACJ,KAAI,CAAC,GAAG,CAAC,GAAG,CAAC,iBAAiB,CAAC,CAAC;wBAChC,KAAI,CAAC,MAAM,CAAC,qBAAqB,CAAC,IAAI,CAAC,CAAC;qBACzC,EAAC;yBACD,IAAI;;mBAAC;wBACJ,KAAI,CAAC,GAAG,CAAC,GAAG,CAAC,uBAAuB,CAAC,CAAC;wBACtC,KAAI,CAAC,MAAM,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;qBAChC,EAAC;yBACD,IAAI;;mBAAC;wBACJ,KAAI,CAAC,GAAG,CAAC,GAAG,CAAC,cAAc,CAAC,CAAC;wBAC7B,KAAI,CAAC,MAAM,CAAC,OAAO,CAAC,KAAI,CAAC,WAAW,EAAE,CAAC,CAAC;qBACzC,EAAC;yBACD,IAAI;;mBAAC;wBACJ,KAAI,CAAC,GAAG,CAAC,GAAG,CAAC,kBAAkB,CAAC,CAAC;qBAClC,EAAC,CAAC;iBACN;aACF;;;;QAED,6BAAS;;;YAAT;gBAAA,iBAaC;gBAZC,IAAI,CAAC,MAAM,GAAG,IAAI,SAAS,EAAE,CAAC;gBAC9B,IAAI,IAAI,CAAC,MAAM,EAAE;oBACf,OAAO,IAAI,CAAC,MAAM;yBACf,UAAU,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,WAAW,CAAC,EAAE,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,cAAc,CAAC,EAAE,IAAI,CAAC,WAAW,EAAE,CAAC;yBAC3G,IAAI;;;mBAAC,UAAA,QAAQ;wBACZ,KAAI,CAAC,YAAY,GAAG,QAAQ,CAAC;wBAC7B,KAAI,CAAC,GAAG,CAAC,GAAG,CAAC,yBAAyB,EAAE,KAAI,CAAC,YAAY,CAAC,CAAC;qBAC5D,EAAC;yBACD,KAAK;;;mBAAC,UAAA,KAAK;wBACV,KAAI,CAAC,GAAG,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;qBACvB,EAAC,CAAC;iBACN;aACF;;;;QAED,+BAAW;;;YAAX;gBACE,IAAI,IAAI,CAAC,UAAU,EAAE,EAAE;oBACrB,OAAO,IAAI,MAAM,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAE,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC;iBACtG;qBAAM;oBACL,OAAO,IAAI,CAAC,QAAQ,CAAC;iBACtB;aACF;;;;;QAED,oCAAgB;;;;YAAhB,UAAiB,KAAa;gBAC5B,IAAI,IAAI,CAAC,UAAU,EAAE,EAAE;oBACrB,OAAO,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,eAAe,EAAE,KAAK,EAAE,MAAM,EAAE,EAAE,UAAU,EAAE,MAAM,EAAE,EAAE,CAAC,CAAC;iBACvF;qBAAM;oBACL,OAAO,IAAI,CAAC,MAAM,CAAC,gBAAgB,CAAC,EAAE,KAAK,OAAA,EAAE,CAAC,CAAC;iBAChD;aACF;;;;;;QAED,kCAAc;;;;;YAAd,UAAe,IAAS,EAAE,OAA6B;gBACrD,IAAI,IAAI,CAAC,UAAU,EAAE,EAAE;oBACrB,OAAO,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,CAAC;iBACvE;qBAAM;oBACL,OAAO,IAAI,CAAC,MAAM,CAAC,cAAc,CAC/B,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,GAAG,IAAI,EAC5C,OAAO,IAAI;wBACT,WAAW,EAAE,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE;wBACzC,IAAI,EAAE;4BACJ,IAAI,EAAEA,aAAI,CAAC,cAAc,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC;4BAC5C,UAAU,EAAE,IAAI,CAAC,OAAO,CAAC,MAAM;4BAC/B,SAAS,EAAE,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,SAAS;yBACvC;wBACD,OAAO,EAAE,IAAI;wBACb,UAAU,EAAE,EAAE,MAAM,EAAE,EAAE,UAAU,EAAE,MAAM,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE;qBACpE,CACF,CAAC;iBACH;aACF;;;;QAED,6BAAS;;;YAAT;gBACE,IAAI,MAAM,IAAI,MAAM,CAAC,SAAS,EAAE;;wBAC1B,cAAY,sBAAG,MAAM,CAAC,SAAS,CAAC,YAAY,EAAO;oBACvD,cAAY,CAAC,QAAQ,GAAG,cAAY,CAAC,YAAY,IAAI,cAAY,CAAC,kBAAkB,IAAI,cAAY,CAAC,eAAe,IAAI,cAAY,CAAC,cAAc,CAAC;oBACpJ,OAAO,IAAI,OAAO;;;;uBAAU,UAAC,OAAO,EAAE,MAAM;wBAC1C,cAAY,CAAC,QAAQ,CAAC,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC,IAAI;;2BACzC;4BACE,OAAO,CAAC,IAAI,CAAC,CAAC;yBACf;;2BACD,cAAM,OAAA,OAAO,CAAC,KAAK,CAAC,GAAA,EACrB,CAAC;qBACH,EAAC,CAAC;iBACJ;qBAAM;oBACL,OAAO,OAAO,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;iBAC/B;aACF;;;;QAED,iCAAa;;;YAAb;gBACE,IAAI,MAAM,IAAI,MAAM,CAAC,SAAS,EAAE;;wBAC1B,cAAY,sBAAG,MAAM,CAAC,SAAS,CAAC,YAAY,EAAO;oBACvD,cAAY,CAAC,QAAQ,GAAG,cAAY,CAAC,YAAY,IAAI,cAAY,CAAC,kBAAkB,IAAI,cAAY,CAAC,eAAe,IAAI,cAAY,CAAC,cAAc,CAAC;oBACpJ,OAAO,IAAI,OAAO;;;;uBAAU,UAAC,OAAO,EAAE,MAAM;wBAC1C,cAAY,CAAC,QAAQ,CAAC,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC,IAAI;;2BACzC;4BACE,OAAO,CAAC,IAAI,CAAC,CAAC;yBACf;;2BACD,cAAM,OAAA,OAAO,CAAC,KAAK,CAAC,GAAA,EACrB,CAAC;qBACH,EAAC,CAAC;iBACJ;qBAAM;oBACL,OAAO,OAAO,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;iBAC/B;aACF;;;;QAED,iCAAa;;;YAAb;;oBACM,WAAW,GAAQ,IAAI,CAAC,WAAW;;oBACnC,UAAU,GAAG,IAAI,CAAC,SAAS,EAAE;;oBAC7B,UAAU,GAAG,IAAI,CAAC,aAAa,EAAE;gBACrC,UAAU,CAAC,IAAI;;;mBAAC,UAAA,MAAM;oBACpB,IAAI,CAAC,MAAM,EAAE;wBACX,WAAW,CAAC,KAAK,GAAG,KAAK,CAAC;qBAC3B;iBACF,EAAC,CAAC;gBACH,UAAU,CAAC,IAAI;;;mBAAC,UAAA,MAAM;oBACpB,IAAI,CAAC,MAAM,EAAE;wBACX,WAAW,CAAC,KAAK,GAAG,KAAK,CAAC;qBAC3B;iBACF,EAAC,CAAC;gBACH,OAAO,WAAW,CAAC;aACpB;;;;;;QAED,sCAAkB;;;;;YAAlB,UAAmB,YAAoB,EAAE,WAAwB;gBAAjE,iBAYC;gBAXC,IAAI,IAAI,CAAC,UAAU,EAAE,EAAE;oBACrB,OAAO,IAAI,CAAC,MAAM,CAAC,MAAM,CACvB,YAAY,EACZ,WAAW,CAAC,GAAG;;;uBAAC,UAAA,IAAI;;4BACd,QAAQ,GAAG,KAAI,CAAC,eAAe,CAAC,IAAI,CAAC;wBACzC,OAAO,IAAI,MAAM,CAAC,UAAU,CAAC,CAAC,QAAQ,CAAC,UAAU,EAAE,QAAQ,CAAC,IAAI,EAAE,QAAQ,CAAC,SAAS,CAAC,CAAC;qBACvF,EAAC,CACH,CAAC;iBACH;qBAAM;oBACL,OAAO,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,YAAY,EAAE,WAAW,CAAC,GAAG;;;uBAAC,UAAA,IAAI,IAAI,OAAA,IAAI,CAAC,GAAG,GAAA,EAAC,CAAC,CAAC;iBAC5E;aACF;;;;;QAED,mCAAe;;;;YAAf,UAAgB,SAAyB;gBAAzB,0BAAA;oBAAA,gBAAyB;;gBACvC,IAAI,IAAI,CAAC,UAAU,EAAE,EAAE;oBACrB,OAAO,IAAI,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC;iBAC5B;qBAAM;oBACL,OAAO,IAAI,CAAC,MAAM,CAAC,eAAe,CAAC,SAAS,CAAC,CAAC;iBAC/C;aACF;;;;;;QAED,+BAAW;;;;;YAAX,UAAY,KAAa,EAAE,OAAiB;gBAC1C,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE,IAAI,KAAK,IAAI,OAAO,EAAE;oBAC1C,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,KAAK,EAAE,OAAO,CAAC,CAAC;iBAChC;aACF;;;;;;QAED,kCAAc;;;;;YAAd,UAAe,KAAa,EAAE,OAAiB;gBAC7C,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE,IAAI,KAAK,IAAI,OAAO,EAAE;oBAC1C,IAAI,CAAC,MAAM,CAAC,cAAc,CAAC,KAAK,EAAE,OAAO,CAAC,CAAC;iBAC5C;aACF;;;;QAED,sCAAkB;;;YAAlB;gBACE,IAAI,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,MAAM,CAAC,kBAAkB,EAAE;oBACjD,OAAO,IAAI,CAAC,MAAM,CAAC,kBAAkB,EAAE,CAAC;iBACzC;gBACD,OAAO,OAAO,CAAC,OAAO,EAAE,CAAC;aAC1B;;;;QAED,6BAAS;;;YAAT;gBACE,OAAO,IAAI,CAAC,YAAY,CAAC;aAC1B;;;;;;QAED,8BAAU;;;;;YAAV,UAAW,MAAe,EAAE,WAA+B;gBACzD,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE,EAAE;oBACtB,OAAO,IAAI,CAAC,MAAM,CAAC,iBAAiB,CAAC,MAAM,IAAI,IAAI,CAAC,SAAS,EAAE,EAAE,WAAW,IAAI,IAAI,CAAC,WAAW,CAAC,CAAC;iBACnG;aACF;;;;;QAED,6BAAS;;;;YAAT,UAAU,MAAe;gBACvB,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE,EAAE;oBACtB,OAAO,IAAI,CAAC,MAAM,CAAC,gBAAgB,CAAC,MAAM,IAAI,IAAI,CAAC,SAAS,EAAE,CAAC,CAAC;iBACjE;aACF;;;;;QAED,8BAAU;;;;YAAV,UAAW,MAAe;gBACxB,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE,EAAE;oBACtB,OAAO,IAAI,CAAC,MAAM,CAAC,iBAAiB,CAAC,MAAM,IAAI,IAAI,CAAC,SAAS,EAAE,CAAC,CAAC;iBAClE;aACF;;;;;QAED,6BAAS;;;;YAAT,UAAU,MAAe;gBACvB,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE,EAAE;oBACtB,OAAO,IAAI,CAAC,MAAM,CAAC,gBAAgB,CAAC,MAAM,IAAI,IAAI,CAAC,SAAS,EAAE,CAAC,CAAC;iBACjE;aACF;;;;;;QAED,4BAAQ;;;;;YAAR,UAAS,OAAgB,EAAE,MAAe;gBACxC,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE,EAAE;oBACtB,OAAO,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,MAAM,IAAI,IAAI,CAAC,SAAS,EAAE,EAAE,OAAO,CAAC,CAAC;iBAClE;aACF;;;;;QAED,8BAAU;;;;YAAV,UAAW,MAAe;gBACxB,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE,EAAE;oBACtB,OAAO,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,MAAM,IAAI,IAAI,CAAC,SAAS,EAAE,CAAC,CAAC;iBAC3D;aACF;;;;;;;QAED,mCAAe;;;;;;YAAf,UAAgB,MAAc,EAAE,CAAS,EAAE,CAAS;gBAClD,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE,EAAE;oBACtB,OAAO,IAAI,CAAC,MAAM,CAAC,eAAe,CAAC,MAAM,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;iBAClD;aACF;;;;QAED,qCAAiB;;;YAAjB;gBACE,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE,EAAE;oBACtB,OAAO,IAAI,CAAC,MAAM,CAAC;iBACpB;qBAAM;oBACL,OAAO,IAAI,CAAC,MAAM,CAAC;iBACpB;aACF;;;;;QAED,4CAAwB;;;;YAAxB,UAAyB,MAAe;gBACtC,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE,EAAE;oBACtB,OAAO,IAAI,CAAC,MAAM,CAAC,qBAAqB,CAAC,MAAM,CAAC,CAAC;iBAClD;qBAAM;oBACL,OAAO,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;iBAC9B;aACF;;;;QAED,4CAAwB;;;YAAxB;gBACE,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE,EAAE;oBACtB,OAAO,IAAI,CAAC,MAAM,CAAC,qBAAqB,EAAE,CAAC;iBAC5C;qBAAM;oBACL,OAAO,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;iBAC9B;aACF;;;;;;QAED,oCAAgB;;;;;YAAhB,UAAiB,QAAgB,EAAE,WAAgB;gBACjD,OAAO,IAAI,CAAC,MAAM,CAAC,gBAAgB,CAAC,QAAQ,EAAE,WAAW,CAAC,CAAC;aAC5D;;;;;;QAED,qCAAiB;;;;;YAAjB,UAAkB,QAAgB,EAAE,WAAgB;gBAClD,OAAO,IAAI,CAAC,MAAM,CAAC,iBAAiB,CAAC,QAAQ,EAAE,WAAW,CAAC,CAAC;aAC7D;;;;;;QAED,oCAAgB;;;;;YAAhB,UAAiB,QAAgB,EAAE,WAAgB;gBACjD,OAAO,IAAI,CAAC,MAAM,CAAC,gBAAgB,CAAC,QAAQ,EAAE,WAAW,CAAC,CAAC;aAC5D;;;;;;QAED,qCAAiB;;;;;YAAjB,UAAkB,MAAc,EAAE,WAAgB;gBAChD,OAAO,IAAI,CAAC,MAAM,CAAC,iBAAiB,CAAC,MAAM,EAAE,WAAW,CAAC,CAAC;aAC3D;;;;;;QAED,oCAAgB;;;;;YAAhB,UAAiB,MAAc,EAAE,WAAgB;gBAC/C,OAAO,IAAI,CAAC,MAAM,CAAC,gBAAgB,CAAC,MAAM,EAAE,WAAW,CAAC,CAAC;aAC1D;;;;;;QAED,qCAAiB;;;;;YAAjB,UAAkB,MAAc,EAAE,WAAgB;gBAChD,OAAO,IAAI,CAAC,MAAM,CAAC,iBAAiB,CAAC,MAAM,EAAE,WAAW,CAAC,CAAC;aAC3D;;;;;;QAED,oCAAgB;;;;;YAAhB,UAAiB,MAAc,EAAE,WAAgB;gBAC/C,OAAO,IAAI,CAAC,MAAM,CAAC,gBAAgB,CAAC,MAAM,EAAE,WAAW,CAAC,CAAC;aAC1D;;;;;QAED,oCAAgB;;;;YAAhB,UAAiB,OAAkC;gBACjD,OAAO,IAAI,CAAC,MAAM,CAAC,gBAAgB,CAAC,OAAO,CAAC,CAAC;aAC9C;;;;QAED,mCAAe;;;YAAf;gBACE,OAAO,IAAI,CAAC,MAAM,CAAC,eAAe,EAAE,CAAC;aACtC;;;;QAED,kCAAc;;;YAAd;gBACE,OAAO,IAAI,CAAC,MAAM,CAAC,cAAc,EAAE,CAAC;aACrC;;;;QAED,iCAAa;;;YAAb;gBACE,OAAO,IAAI,CAAC,MAAM,CAAC,aAAa,EAAE,CAAC;aACpC;;;;;;QAED,mCAAe;;;;;YAAf,UAAgB,YAAoB,EAAE,MAAY;gBAChD,IAAI,YAAY,IAAI,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,MAAM,CAAC,gBAAgB,EAAE;oBAC/D,OAAO,IAAI,CAAC,MAAM,CAAC,gBAAgB,CAAC,YAAY,EAAE,MAAM,IAAI,CAAC,CAAC,CAAC;iBAChE;qBAAM;oBACL,OAAO,OAAO,CAAC,MAAM,CAAC,8BAA8B,CAAC,CAAC;iBACvD;aACF;;;;;QAED,8BAAU;;;;YAAV,UAAW,GAAW;gBACpB,OAAO,IAAI,CAAC,MAAM,CAAC,iBAAiB,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;aACjD;;;;;QAED,uCAAmB;;;;YAAnB,UAAoB,QAAiE;;oBAC/E,QAAQ,GAAQ,EAAE;;oBAClB,UAAU,GAAG,QAAQ,CAAC,UAAU;;oBAChC,KAAK,GAAG,QAAQ,CAAC,KAAK;gBAC1B,IAAI,UAAU,IAAI,UAAU,CAAC,QAAQ,EAAE;oBACrC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,gBAAgB,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC,CAAC;iBAC3D;gBACD,IAAI,KAAK,IAAI,KAAK,CAAC,QAAQ,EAAE;oBAC3B,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,gBAAgB,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC;iBACtD;gBACD,IAAI,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAE;oBACvB,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC,CAAC;iBAClC;gBACD,OAAO,QAAQ,CAAC;aACjB;;;;;;;QAED,mCAAe;;;;;;YAAf,UAAgB,KAAkB,EAAE,QAAgB,EAAE,YAAoB;gBAA1E,iBAUC;;oBATK,MAAM,GAAG,KAAK,CAAC,MAAM;;;mBAAC,UAAA,IAAI,IAAI,OAAA,IAAI,CAAC,GAAG,KAAK,KAAI,CAAC,OAAO,CAAC,MAAM,GAAA,EAAC;gBACnE,IAAI,MAAM,EAAE;oBACV,IAAI,CAAC,kBAAkB,CAAC,YAAY,EAAE,MAAM,CAAC,CAAC;oBAC9C,MAAM;yBACH,GAAG;;;mBAAC,UAAA,IAAI,IAAI,OAAA,IAAI,CAAC,GAAG,GAAA,EAAC;yBACrB,OAAO;;;mBAAC,UAAA,MAAM;wBACb,KAAI,CAAC,MAAM,CAAC,eAAe,CAAC,MAAM,EAAE,KAAI,CAAC,SAAS,CAAC,GAAG,CAAC,kBAAkB,EAAE,EAAE,IAAI,EAAEA,aAAI,CAAC,cAAc,CAAC,KAAI,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,MAAM,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,WAAW,EAAE,EAAE,YAAY,cAAA,EAAE,IAAI,EAAE,KAAI,CAAC,OAAO,CAAC,IAAI,EAAE,KAAK,OAAA,EAAE,CAAC,CAAC;qBACxN,EAAC,CAAC;iBACN;aACF;;;;QAED,8BAAU;;;YAAV;gBAAA,iBAOC;gBANC,IAAI,IAAI,CAAC,MAAM,IAAIgC,mBAAU,CAAC,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,EAAE;oBACrD,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;oBACpB,IAAI,CAAC,MAAM,CAAC,UAAU,EAAE,CAAC,IAAI;;uBAAC;wBAC5B,KAAI,CAAC,GAAG,CAAC,GAAG,CAAC,qBAAqB,CAAC,CAAC;qBACrC,EAAC,CAAC;iBACJ;aACF;;;;QAED,6BAAS;;;YAAT;gBACE,IAAI,IAAI,CAAC,UAAU,EAAE,EAAE;oBACrB,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC,CAAC;iBACzC;aACF;;;;;;QAED,4CAAwB;;;;;YAAxB,UAAyB,cAAsB,EAAE,OAAO;gBACtD,IAAI,cAAc,IAAI,OAAO,IAAI,OAAO,CAAC,MAAM,IAAI,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE;oBAC7F,IAAI,CAAC,MAAM,CAAC,eAAe,CAAC,OAAO,CAAC,OAAO,EAAE,cAAc,EAAE,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,IAAI,qBAAO,OAAO,IAAE,EAAE,EAAE,YAAY,CAAC,CAAC;iBAC3H;aACF;;;;QAED,qCAAiB;;;YAAjB;gBACEC,iBAAS,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,UAAU,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,EAAE,EAAE,CAAC,CAAC;aACjF;;;;QAED,0CAAsB;;;YAAtB;gBACEA,iBAAS,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,kBAAkB,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,EAAE,EAAE,CAAC,CAAC;aACzF;;;;QAED,uCAAmB;;;YAAnB;gBACE,OAAOA,iBAAS,CAAC,EAAE,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,EAAE,EAAE,EAAE,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC,CAAC;aACxF;;;;QAED,oCAAgB;;;YAAhB;gBACE,OAAOA,iBAAS,CAAC,EAAE,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,EAAE,EAAE,EAAE,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,cAAc,CAAC,CAAC,CAAC;aAC1F;;;;QAED,2CAAuB;;;YAAvB;gBACE,OAAOA,iBAAS,CAAC,EAAE,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,EAAE,EAAE,EAAE,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,cAAc,CAAC,CAAC,CAAC;aAC1F;;;;;QAED,iCAAa;;;;YAAb,UAAc,KAA0B;gBACtC,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;aACzB;;;;;QAED,iCAAa;;;;YAAb,UAAc,KAA6B;gBACzC,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;aACzB;;;;QAED,mCAAe;;;YAAf;gBACE,IAAI,IAAI,CAAC,UAAU,EAAE;oBACnBC,kBAAU,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;oBAC5B,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;iBACxB;aACF;;;;QAED,qCAAiB;;;YAAjB;gBACE,IAAI,IAAI,CAAC,UAAU,EAAE;oBACnB,IAAI,CAAC,UAAU,CAAC,OAAO,EAAE,CAAC;oBAC1B,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;iBACxB;aACF;;;;;QAED,wCAAoB;;;;YAApB,UAAqB,IAAS;gBAC5B,IAAI,IAAI,IAAI,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,SAAS,EAAE;oBAC1C,IAAI,CAAC,MAAM,CAAC,eAAe,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,iBAAiB,EAAE,EAAE,IAAI,EAAElC,aAAI,CAAC,cAAc,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,iBAAiB,EAAE,EAAE,WAAW,EAAE,IAAI,EAAE,CAAC,CAAC;iBACzN;aACF;;;;;;QAED,mDAA+B;;;;;YAA/B,UAAgC,KAAkB,EAAE,YAAoB;gBAAxE,iBASC;;oBARK,MAAM,GAAG,KAAK,CAAC,MAAM;;;mBAAC,UAAA,IAAI,IAAI,OAAA,IAAI,CAAC,GAAG,KAAK,KAAI,CAAC,OAAO,CAAC,MAAM,GAAA,EAAC;gBACnE,IAAI,MAAM,EAAE;oBACV,MAAM;yBACH,GAAG;;;mBAAC,UAAA,IAAI,IAAI,OAAA,IAAI,CAAC,GAAG,GAAA,EAAC;yBACrB,OAAO;;;mBAAC,UAAA,MAAM;wBACb,KAAI,CAAC,MAAM,CAAC,eAAe,CAAC,MAAM,EAAE,KAAI,CAAC,SAAS,CAAC,GAAG,CAAC,iBAAiB,EAAE,EAAE,IAAI,EAAEA,aAAI,CAAC,cAAc,CAAC,KAAI,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,MAAM,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,iBAAiB,EAAE,EAAE,UAAU,EAAE,IAAI,EAAE,CAAC,CAAC;qBACjM,EAAC,CAAC;iBACN;aACF;;;;;QAED,2CAAuB;;;;YAAvB,UAAwB,IAAS;gBAAjC,iBAUC;gBATC,IAAI,IAAI,IAAI,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,EAAE;oBACnE,IAAI,IAAI,CAAC,OAAO,CAAC,WAAW,IAAI,IAAI,CAAC,SAAS,KAAK,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,EAAE;wBACxEiC,iBAAS,CAAC,EAAE,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,EAAE,EAAE,EAAE,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,iBAAiB,CAAC,CAAC,CAAC,IAAI;;;2BAAC,UAAA,GAAG;4BAC3F,KAAI,CAAC,eAAe,EAAE,CAAC;yBACxB,EAAC,CAAC;qBACJ;yBAAM,IAAI,IAAI,CAAC,OAAO,CAAC,UAAU,EAAE;wBAClC,IAAI,CAAC,iBAAiB,EAAE,CAAC;qBAC1B;iBACF;aACF;;oBAveF/B,eAAU;;;;;wBAVFE,gBAAO;wBACPE,YAAG;wBAAEE,mBAAU;wBAMf,MAAM;wBAHNH,mBAAS;;;QA8elB,gBAAC;KAxeD;;;;;;;QCAE,4BAAoB,GAAQ,EAAU,IAAY,EAAU,YAAmB,EAAY,UAAsB,EAAY,MAAc;YAA3I,iBAgBC;YAhBmB,QAAG,GAAH,GAAG,CAAK;YAAU,SAAI,GAAJ,IAAI,CAAQ;YAAU,iBAAY,GAAZ,YAAY,CAAO;YAAY,eAAU,GAAV,UAAU,CAAY;YAAY,WAAM,GAAN,MAAM,CAAQ;YACzI,IAAI,IAAI,CAAC,SAAS,EAAE,EAAE;gBACpB,IAAI;;wBACE,YAAU,GAAG,IAAI,CAAC,MAAM,CAAC,gBAAgB,EAAE,CAAC,gBAAgB;oBAChE,IAAI,CAAC,IAAI,CAAC,iBAAiB;;uBAAC;;4BACtB,OAAO,GAAG;4BACZ,GAAG,EAAE,KAAI,CAAC,UAAU,CAAC,MAAM,CAAC,iBAAiB,CAAC;4BAC9C,OAAO,EAAE,KAAI,CAAC,UAAU,CAAC,aAAa,EAAE;4BACxC,WAAW,EAAE,CAAC,YAAU,GAAG,YAAU,CAAC,GAAG,GAAG,EAAE,KAAK,MAAM;yBAC1D;wBACD8B,WAAW,CAAC,OAAO,CAAC,CAAC;qBACtB,EAAC,CAAC;iBACJ;gBAAC,OAAO,GAAG,EAAE;oBACZ,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;iBACrB;aACF;SACF;;;;QAED,sCAAS;;;YAAT;gBACE,OAAO,IAAI,CAAC,UAAU,CAAC,OAAO,EAAE,KAAK,MAAM,IAAI,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,iBAAiB,CAAC,IAAI,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,iBAAiB,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC;aAClJ;;;;;QAED,wCAAW;;;;YAAX,UAAY,GAAQ;;oBACd,QAAQ,GAAG,KAAK;gBACpB,kBAAkB,CAAC,qBAAqB,CAAC,OAAO;;;mBAAC,UAAA,CAAC;oBAChD,IAAI,GAAG,IAAI,GAAG,CAAC,OAAO,IAAI,GAAG,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE;wBACrD,QAAQ,GAAG,IAAI,CAAC;qBACjB;iBACF,EAAC,CAAC;gBACH,IAAI,QAAQ,EAAE;oBACZ,OAAO;iBACR;gBACD,IAAI,GAAG,IAAI,IAAI,CAAC,SAAS,EAAE,EAAE;oBAC3B,IAAI;wBACFC,uBAAuB,CAAC,GAAG,CAAC,aAAa,IAAI,GAAG,CAAC,CAAC;qBACnD;oBAAC,OAAO,CAAC,EAAE,GAAE;;;oBAGd,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,WAAW,EAAE,EAAE,KAAK,EAAE,GAAG,CAAC,aAAa,IAAI,GAAG,EAAE,CAAC,CAAC;oBAC1E,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,aAAa,IAAI,GAAG,CAAC,CAAC;iBAC1C;qBAAM,IAAI,GAAG,IAAI,IAAI,CAAC,UAAU,CAAC,OAAO,EAAE,KAAK,KAAK,EAAE;oBACrD,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;iBACrB;aACF;;;;;;;QAED,qCAAQ;;;;;;YAAR,UAAS,EAAE,EAAE,KAAK,EAAE,QAAQ;gBAA5B,iBAuBC;gBAtBC,IAAI,IAAI,CAAC,SAAS,EAAE,IAAI,EAAE,EAAE;oBAC1B,IAAI;wBACF,IAAI,CAAC,YAAY,CAAC,sBAAsB,EAAE,CAAC,IAAI;;;2BAAC,UAAA,UAAU;4BACxDC,qBAAqB;;;+BAAC,UAAA,KAAK;gCACzB,KAAK,CAAC,OAAO,CAAC,EAAE,KAAK,OAAA,EAAE,QAAQ,UAAA,EAAE,EAAE,IAAA,EAAE,CAAC,CAAC;gCACvC,KAAK,CAAC,iBAAiB;;;mCAAC,UAAM,KAAK;;;4CACjC,KAAK,CAAC,QAAQ,GAAG,KAAK,CAAC,QAAQ,IAAI,EAAE,CAAC;4CACtC,KAAK,CAAC,QAAQ,CAAC,YAAY,GAAG;gDAC5B,UAAU,EAAE,UAAU;gDACtB,SAAS,EAAE,IAAI,IAAI,EAAE,CAAC,OAAO,EAAE;6CAChC,CAAC;4CACF,KAAK,CAAC,KAAK,GAAG,KAAK,CAAC,KAAK,IAAI,EAAE,CAAC;;4CAEhC,IAAI,MAAM,IAAI,MAAM,CAAC,IAAI,CAAC,IAAI,MAAM,CAAC,IAAI,CAAC,CAAC,oBAAoB,EAAE;gDAC/D,KAAK,CAAC,KAAK,CAAC,YAAY,GAAG,MAAM,CAAC,IAAI,CAAC,CAAC,oBAAoB,EAAE,CAAC;6CAChE;4CACD,sBAAO,KAAK,EAAC;;;iCACd,EAAC,CAAC;6BACJ,EAAC,CAAC;yBACJ,EAAC,CAAC;qBACJ;oBAAC,OAAO,CAAC,EAAE,GAAE;iBACf;aACF;QAtEa,wCAAqB,GAAkB,CAAC,2CAA2C,EAAE,oBAAoB,EAAE,8CAA8C,EAAE,oDAAoD,EAAE,eAAe,EAAE,sDAAsD,EAAE,2CAA2C,EAAE,2BAA2B,EAAE,uCAAuC,EAAE,0BAA0B,EAAE,0CAA0C,CAAC,CAAC;;oBAFpenC,eAAU;;;;;wBANFI,YAAG;wBADSgC,WAAM;wBAGlB,KAAK;wBAFA9B,mBAAU;wBACfe,eAAM;;;QA8Ef,yBAAC;KAzED;;;;;;;QCSA;SAYC;;;;;QANQ,sBAAO;;;;YAAd,UAAe,mBAAyC;gBAAzC,oCAAA;oBAAA,wBAAyC;;gBACtD,OAAO;oBACL,QAAQ,EAAE,cAAc;oBACxB,SAAS,WAAM,mBAAmB,GAAEd,SAAO,EAAE,QAAQ,EAAEe,YAAc,EAAE,QAAQ,EAAE,MAAM,EAAE,kBAAkB,EAAE,KAAK,EAAE,WAAW,EAAE,SAAS,EAAE,WAAW,EAAC;iBACzJ,CAAC;aACH;;oBAXFe,aAAQ,SAAC;wBACR,YAAY,EAAE,EAAE;wBAChB,OAAO,EAAE,CAACC,uBAAc,CAAC;wBACzB,OAAO,EAAE,CAACA,uBAAc,CAAC;qBAC1B;;QAQD,qBAAC;KAZD;;;;;;;QCP8B3D,4BAAM;;;SA4DnC;QAjDCC;YAFCC,iBAAQ,CAAC,UAAU,EAAE,EAAE,QAAQ,EAAE,IAAI,EAAE,IAAI,EAAEC,qBAAa,CAAC,IAAI,EAAE,CAAC;YAClEyD,mBAAU,CAAC,UAAU,CAAC;;8CACV;QAeb3D;YAbCC,iBAAQ,CAAC,UAAU,EAAE;gBACpB,IAAI,EAAEC,qBAAa,CAAC,YAAY;gBAChC,OAAO,EAAE0D,gCAAuB;gBAChC,UAAU,EAAE,IAAI;gBAChB,YAAY,EAAE,CAAC,UAAU,CAAC;gBAC1B,IAAI,EAAE,MAAM;gBACZ,QAAQ,EAAE,EAAE;gBACZ,aAAa,EAAE,IAAI;gBACnB,cAAc,EAAE,OAAO;gBACvB,KAAK,EAAE,YAAY;gBACnB,QAAQ,EAAE,KAAK;gBACf,gBAAgB,EAAE,EAAE,IAAI,EAAE,cAAc,EAAE;aAC3C,CAAC;;oDACc;QAehB5D;YAbCC,iBAAQ,CAAC,UAAU,EAAE;gBACpB,KAAK,EAAE,QAAQ;gBACf,IAAI,EAAE,GAAG;gBACT,QAAQ,EAAE,IAAI;gBACd,IAAI,EAAEC,qBAAa,CAAC,YAAY;gBAChC,cAAc,EAAE,QAAQ;gBACxB,OAAO,EAAE,CAAC,CAAC,EAAE,KAAK,EAAE,QAAQ,EAAE,QAAQ,EAAE,EAAE,GAAG,EAAE,KAAK,EAAE,EAAE,KAAK,EAAE,IAAI,EAAE,EAAE,EAAE,KAAK,EAAE,MAAM,EAAE,QAAQ,EAAE,EAAE,GAAG,EAAE,KAAK,EAAE,EAAE,KAAK,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;gBACrI,YAAY,EAAE,CAAC,QAAQ,EAAE,MAAM,CAAC;gBAChC,MAAM,EAAE,IAAI;gBACZ,YAAY,EAAE2D,2BAAkB;gBAChC,QAAQ,EAAE,IAAI;gBACd,SAAS,EAAE,KAAK;aACjB,CAAC;;+CACY;QAUd7D;YARCC,iBAAQ,CAAC,UAAU,EAAE;gBACpB,IAAI,EAAEC,qBAAa,CAAC,YAAY;gBAChC,QAAQ,EAAE,IAAI;gBACd,cAAc,EAAE,MAAM;gBACtB,SAAS,EAAE,IAAI;gBACf,QAAQ,EAAE,IAAI;gBACd,gBAAgB,EAAE,EAAE,IAAI,EAAE,UAAU,EAAE;aACvC,CAAC;sCACK,KAAK;+CAAO;QAnDR,QAAQ;YANpBC,cAAK,CAAC;gBACL,SAAS,EAAE,UAAU;gBACrB,cAAc,EAAE,UAAU;gBAC1B,MAAM,EAAE,CAAC,GAAG,CAAC;gBACb,OAAO,EAAE,CAAC,OAAO,CAAC;aACnB,CAAC;WACW,QAAQ,CA4DpB;QAAD,eAAC;KAAA,CA5D6BC,eAAM;;;;;;;QCCPL,2BAAM;;;SA8BlC;QAjBCC;YAPCC,iBAAQ,CAAC,SAAS,EAAE;gBACnB,KAAK,EAAE,IAAI;gBACX,IAAI,EAAEC,qBAAa,CAAC,WAAW;gBAC/B,QAAQ,EAAE,IAAI;gBACd,SAAS,EAAE,IAAI;aAChB,CAAC;YACDyD,mBAAU,CAAC,SAAS,CAAC;sCAClB,KAAK;2CAAS;QAIlB3D;YAFCC,iBAAQ,CAAC,SAAS,EAAE,EAAE,KAAK,EAAE,SAAS,EAAE,QAAQ,EAAE,IAAI,EAAE,IAAI,EAAEC,qBAAa,CAAC,IAAI,EAAE,CAAC;YACnFyD,mBAAU,CAAC,SAAS,CAAC;;8CACR;QAGd3D;YADCC,iBAAQ,CAAC,SAAS,EAAE,EAAE,KAAK,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE,IAAI,EAAEC,qBAAa,CAAC,QAAQ,EAAE,CAAC;;6CACxE;QASbF;YADCC,iBAAQ,CAAC,SAAS,EAAE,EAAE,KAAK,EAAE,UAAU,EAAE,IAAI,EAAEC,qBAAa,CAAC,IAAI,EAAE,CAAC;;iDACpD;QA7BN,OAAO;YANnBC,cAAK,CAAC;gBACL,SAAS,EAAE,SAAS;gBACpB,cAAc,EAAE,UAAU;gBAC1B,MAAM,EAAE,CAAC,GAAG,EAAE,gBAAgB,EAAE,eAAe,EAAE,YAAY,CAAC;gBAC9D,OAAO,EAAE,CAAC,MAAM,CAAC;aAClB,CAAC;WACW,OAAO,CA8BnB;QAAD,cAAC;KAAA,CA9B4BC,eAAM;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}
